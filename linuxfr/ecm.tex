\documentclass[a4paper,11pt]{book}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{hyperref}
\usepackage{xstring}

% Encode certains caractères UTF-8 pour l'URL
\newcommand{\MakeUTFPerCent}[1]{%
  \def\result{#1}%
  \StrSubstitute{\result}{é}{\%C3\%A9}[\result]%
  \StrSubstitute{\result}{à}{\%C3\%A0}[\result]%
  \StrSubstitute{\result}{è}{\%C3\%A8}[\result]%
  \StrSubstitute{\result}{_}{\%5F}[\result]%
}

% Macro finale
\newcommand{\myurl}[1]{%
  \MakeUTFPerCent{#1}%
  \href{\result}{#1}%
}

\begin{document}

Lien encodé : \myurl{https://fr.wikipedia.org/wiki/Idéal_premier}

\end{document}
