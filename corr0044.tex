% This is part of Exercices et corrigés de CdI-1
% Copyright (c) 2011
%   Laurent Claessens
% See the file fdl-1.3.txt for copying conditions.

\begin{corrige}{0044}

\begin{enumerate}

\item
La fonction est différentiable et continue en tout point hors de la droite $x=0$ car tant $xy$ que $x^2y^2$ sont des fonctions polynomiales. Sur la droite $x=0$ la fonction est continue partout mais n'est différentiable qu'en $(0,0)$.

Étudions plus précisément la continuité en $(0,a)$, et pour cela regardons ce qu'il se passe dans la boule $B\big( (0,a),r \big)$. D'une part, si $x>0$, alors 
\begin{equation}
	| xy |<| x |\cdot| a+r |<r| a+r |\to 0
\end{equation}
quand $r\to 0$. Et d'autre part, si $x<0$, alors
\begin{equation}
	| x^2y^2 |<| x^2 |\cdot| a+r |^2<r^2| a+r |^2\to 0.
\end{equation}
La fonction est donc continue en $(0,a)$. Faut voir maintenant si elle y est différentiable. Afin de tester la différentiabilité en $(0,a)$, nous calculons $\partial_xf(0,a)$ :
\begin{equation}
	\frac{ \partial f }{ \partial x }(0,a)=\lim_{t\to 0}\frac{ f(t,a)-f(0,a) }{ t }.
\end{equation}
Si $t>0$, alors cette limite vaut $\lim_{t\to 0}\frac{ ta }{ t }=a$. Si par contre $t<0$, alors la limite vaut $\lim_{t\to 0}\frac{ t^2a^2 }{ t }=0$. La dérivée partielle n'existe donc que si $a=0$. Donc $f$ n'est différentiable en aucun point de la forme $(0,a)$ avec $a\neq 0$.

Il est assez facile de calculer que
\begin{equation}
	\frac{ \partial f }{ \partial x }(0,0)=\frac{ \partial f }{ \partial y }(0,0)=0,
\end{equation}
donc le candidat différentielle en $(0,0)$ est $T_{(0,0)}(u)=0$. Voyons si cette forme linéaire satisfait la définition :
\begin{equation}
	\lim_{(x,y)\to(0,0)}\frac{ f(x,y)-f(0,0)-T_{(0,0)}(x-0) }{ \| (x,y) \| }=\lim_{(x,y)\to (0,0)}\frac{ f(x,y) }{ \sqrt{x^2+y^2} }.
\end{equation}
Nous étudions cette limite en coordonnées polaires. À gauche, $f(r,\theta)=r^4\cos^2(\theta)\sin^2(\theta)$, et à droite, $f(r,\theta)=r^2\cos(\theta)\sin(\theta)$. Dans les deux cas, $\lim_{r\to 0}f(r,\theta)/r=0$. 

La fonction $f$ est donc différentiable en $(0,0)$, et sa différentielle est l'application linéaire identiquement nulle.

\item 
La fonction de cet exercice est représentée sur la figure \ref{LabelFigQCb}.
\newcommand{\CaptionFigQCb}{La fonction de l'exercice \ref{exo0044}\ref{Item0044b}. En rouge, les zones où la fonction n'est pas trivialement différentiable.}
\input{Fig_QCb.pstricks}

Sur les axes, la fonction est nulle, mais $\sin(0)=0$, donc c'est une fonction continue partout. Calculons les dérivées partielles en $(a,0)$. La dérivée partielle par rapport à $x$ ne pose pas de problèmes et vaut $0$ :
\begin{equation}
	\frac{ \partial f }{ \partial x }(a,0)=0.
\end{equation}
Celle par rapport à $y$ demande de traiter les cas $t<0$ et $t>0$ séparément:
\begin{equation}
	\frac{ \partial f }{ \partial y }(a,0)=\lim_{t\to 0}\frac{ f(a,t) }{ t }=
\begin{cases}
	\lim_{t\to 0}\frac{ \sin(ta) }{ t }=a\lim_{t\to 0}\frac{ \sin(ta) }{ ta }=a	&	\text{si $t>0$}\\
	\lim_{t\to 0}\frac{ ta }{ t }=a	&	 \text{si $t<0$}.
\end{cases}
\end{equation}
Donc la candidate différentielle en $(a,0)$ est 
\begin{equation}
	T(u_1,u_2)=au_2,
\end{equation}
ou encore $T=ady$. Il faut maintenant vérifier dans la définition. D'abord, $T\big( (x,y)-(a,0) \big)=T(x-a,y)=ay$, et $f(a,0)=0$ donc nous vérifions si la limite suivante est zéro ou non :
\begin{equation}		\label{Eqd0044}
	\lim_{(x,y)\to (a,0)}\frac{ f(x,y)-ay }{ \sqrt{(x-a)^2+y^2} }.
\end{equation}
Il faut calculer différemment suivant que $y>0$ ou $y<0$. 

Si $y>0$, alors nous utilisons le fait que
\begin{equation}
	\sin(xy)-ay=ay\left( \frac{ \sin(ay) }{ ay }-1 \right)
\end{equation}
La limite \eqref{Eqd0044} devient donc
\begin{equation}		\label{Eq0044PP}
	\lim\frac{ ay }{ \sqrt{(x-a)^2+y^2} }\left( \frac{ \sin(xy) }{ ay }-1 \right).
\end{equation}
En utilisant les coordonnées polaires autour de $(a,0)$, nous voyons que 
\begin{equation}
	\frac{ ay }{  \sqrt{(x-a)^2+y^2}  }=\frac{ a }{ 2 }\sin(\theta).
\end{equation}
Pour calculer ce qui se trouve dans la parenthèse de \eqref{Eq0044PP}, nous faisons
\begin{equation}
	\frac{ \sin(xy) }{ ay }=\frac{ x\sin(xy) }{ axy }\to \frac{ x }{ a }.
\end{equation}
En recollant les bouts,
\begin{equation}
	\lim\underbrace{\frac{ ay }{ \sqrt{(x-a)^2+y^2} }}_{=\frac{ a }{ 2 }\sin(\theta)}\Big(  \underbrace{\frac{ \sin(xy) }{ ay }}_{\to \frac{ x }{ a }}-1 \Big).
\end{equation}
Le tout tend donc vers zéro. Ceci conclut le calcul de \eqref{Eqd0044} lorsque $y>0$.

Faisons maintenant le calcul de \eqref{Eqd0044} pour $t<0$. En utilisant les coordonnées polaires $x=a+r\cos(\theta)$ et $y=r\sin(\theta)$, nous trouvons
\begin{equation}
	\lim_{(x,y)\to(0,0)}\frac{ xy-ay }{ \sqrt{(x-a)^2+y^2} }=\lim_{r\to 0}\frac{ r^2\cos(\theta)\sin(\theta) }{ r }=0.
\end{equation}
Donc la fonction considérée est différentiable en $(a,0)$.

C'est un bon exercice d'écrire la différentielle, et de refaire tous les calculs sur le point $(0,a)$.

\item
En un point $(a,b)$ avec $a \neq b$, la fonction est constante
  donc différentiable et continue.

  En un point de type $(a,a)$, on a~:
  \begin{equation*}
    \limite {(x,y)} {(a,a)} f(x,y) =
    \begin{arrowcases}
      \limite[x\neq y] {(x,y)} {(a,a)} f(x,y) = e\\
      \limite[x = y] {(x,y)} {(a,a)} f(x,y) = e^{a-a^2}
    \end{arrowcases}
  \end{equation*}
  Donc la fonction $f$ est continue en $(a,a)$ si et seulement si $a = a^2+1$, c'est à dire jamais.


\item La \og zone à problèmes\fg{} est formée de points du type $(e^b,b)$. En dehors, la fonction est différentiable.

  Le calcul de limite montre que la fonction est continue en $(e^b,b)$ si et seulement si $e^b + b = 0$ ; cette équation possède
  une unique solution, notons-la $b_0$. Clairement $b_0 < 0$.

  Pour vérifier la différentiabilité en $(e^{b_0},b_0)$, calculons
\begin{equation}
	\begin{aligned}[]
    \pder f {(1,0)}(e^{b_0},b_0) &= \limite[h \neq 0] h 0 \frac{f(e^{b_0}+h,b_0) -f(e^{b_0},b_0)}h\\
	 &=
    \begin{arrowcases}
      \limite[h > 0] h 0 \frac{1 - 1}h = 0\\
      \limite[h < 0] h 0 \frac{1 - (e^{b_0} + h + b_0) - 1}h = - 1
    \end{arrowcases}
	\end{aligned}
\end{equation}
  où on a bien sûr utilisé le fait que $e^{b_0} + b_0 = 0$. Étant
  donné que cette limite, qui donne la dérivée partielle, n'existe pas
  la fonction n'est pas différentiable.

\item La \og zone à problèmes\fg{} est formée par la réunion des deux
  axes. Considérons le point $(a,b)$ sur les axes.

  Point de vue continuité : si $b = 0$, alors la fonction est continue
  pour $a >0$, non-continue si $a < 0$. Lorsque $a = 0$, la fonction
  est continue si $b = 1$, non-continue sinon.

  Elle n'est nulle part différentiable sur les axes.
\end{enumerate}

\end{corrige}
