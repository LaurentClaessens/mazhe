% This is part of Giulietta
% Copyright (c) 2010-2017, 2019, 2021-2022, 2024
%   Laurent Claessens
% See the file fdl-1.3.txt for copying conditions.


%-------------------------------------------------------
\subsection{Non compact (another try)}
%----------------------------------------------------

This subsection contains some more work about integrating non compactly supported forms. Can be skipped.


\begin{lemma}[\cite{MonCerveau}]	\label{LEMooEKYAooERjAnc}
	Let \( \omega\) be a \( n\)-differential form over the smooth manifold \( M\). Let \( \{ (U_{\alpha},\varphi_{\alpha}) \}_{\alpha\in \Lambda}\) be an orientation on \( M\). We suppose that\footnote{Lemma \ref{LEMooQGVMooSHXUmD} for the existence.}
	\begin{equation}
		\omega_m=f_{\alpha}(m)\partial_{\alpha,1}^*\wedge\ldots\wedge\partial_{\alpha,n}^*
	\end{equation}
	with \( f_{\alpha}(m)\geq 0\) for every \( m\in \varphi_{\alpha}(U_{\alpha})\).

	Then if \( m\in \varphi_{\alpha}(U_{\alpha})\cap \varphi_{\beta}(U_{\beta})\) we have
	\begin{equation}
		\omega_m=f_{\beta}(m)\partial_{\beta,1}^*\wedge\ldots\wedge\partial_{\beta,n}^*
	\end{equation}
	with \( f_{\beta}(m)\geq 0\).
\end{lemma}

\begin{proof}
	Using lemma \ref{LEMooSZTOooBIzMCc} we have
	\begin{subequations}
		\begin{align}
			f_{\beta}(m) & =\omega_m(\partial_{\beta,1},\ldots,\partial_{\beta,n})                                                                \\
			             & =f_{\alpha}(m)(\partial_{\alpha,1}\wedge\ldots\wedge\partial_{\alpha,n})(\partial_{\beta,1},\ldots,\partial_{\beta,n}) \\
			             & =f_{\alpha}(m)\det\big( d(\varphi_{\alpha}^{-1}\circ\varphi_{\beta})_{\varphi_{\beta}^{-1}(m)} \big).
		\end{align}
	\end{subequations}
	Since \( \{ \varphi_{\alpha} \}_{\alpha\in \Lambda}\) is an orientation, the determinant is positive.
\end{proof}


\begin{proposition}[\cite{MonCerveau}]	\label{PROPooDYDPooOWNtfD}
	Let \( M\) be an orientable manifold.We consider two oriented atlases with the same orientation
	\begin{subequations}
		\begin{align}
			\mA & =\{ (U_{\alpha}, \varphi_{\alpha}) \}_{\alpha\in \Lambda} \\
			\mB & =\{ (V_i,\phi_i) \}_{i\in I}.
		\end{align}
	\end{subequations}

	For each \( \alpha\in \Lambda\) we define the map \(f_{\alpha} \colon \varphi_{\alpha}(U_{\alpha}) \to \eR  \) by
	\begin{equation}
		\omega_m=f_{\alpha}(m)\partial_{\alpha,1}^*\wedge\ldots\wedge\partial_{\alpha,n}.
	\end{equation}
	We suppose that there exists a \( \alpha\in \Lambda\) such that \( f_{\alpha}\geq 0\).

	Let \( \{ \rho_{\alpha} \}_{\alpha\in\Lambda}\) be a partition of the unity subordinated to \( \mA\) and \( \{ \sigma_i \}\) be subordinate to \( \mB\).

	We suppose that
	\begin{equation}		\label{EQooUOPVooUCTfof}
		\sum_{\alpha\in\Lambda}\int_{\alpha}\rho_{\alpha}\omega<\infty.
	\end{equation}
	for every \( \alpha\in \Lambda\).

	Then
	\begin{enumerate}
		\item		\label{ITEMooXJIJooZGNRuU}
		      For every \( i\in I\) and \( \beta\in\Lambda\) we have \( f_i\geq 0\) and \( f_{\alpha}\geq 0\).
		\item		\label{ITEMooLLMCooFGNsYmi}
		      We have
		      \begin{equation}
			      \int_{\alpha}\rho_{\alpha}\omega=\sum_{i\in I}\int_{\alpha}\sigma_i\rho_{\alpha}\omega.
		      \end{equation}
		\item		\label{ITEMooGHRAooYZtFco}
		      We have
		      \begin{equation}
			      \int_{\alpha}\rho_{\alpha}\sigma_i\omega=\int_i\rho_{\alpha}\sigma_i\omega.
		      \end{equation}
		\item		\label{ITEMooJOJPooXfziTe}
		      We can commute the sums\quext{I did not seen this part actually done anywhere. Is there a simpler way ? See \cite{BIBooFSEXooCmOftt}.}:
		      \begin{equation}
			      \sum_{\alpha\in\Lambda}\sum_{i\in I}\int_{\alpha}\sigma_i\rho_{\alpha}\omega=\sum_{i\in I}\sum_{\alpha\in\Lambda}\int_{\alpha}\sigma_i
			      \rho_{\alpha}\omega.
		      \end{equation}
		\item		\label{ITEMooUTQVooHafpOr}
		      We have the equality
		      \begin{equation}
			      \sum_{\alpha\in\Lambda}\int_{\alpha}\rho_{\alpha}\omega=\sum_{i\in I}\int_i\sigma_i\omega.
		      \end{equation}
	\end{enumerate}
\end{proposition}

\begin{proof}
	Several points.
	\begin{subproof}
		\spitem[For \ref{ITEMooXJIJooZGNRuU}]
		%-----------------------------------------------------------
		This is lemma \ref{LEMooEKYAooERjAnc} and the fact that \( \{ \varphi_{\alpha},\phi_i \}_{\alpha,i}\) is an orientation (definition \ref{PROPooMKHKooUTiUjF}).

		\spitem[For \ref{ITEMooLLMCooFGNsYmi}]
		%-----------------------------------------------------------
		Let fix \( \alpha\in\Lambda\).
		\begin{equation}
			\int_{\alpha}\rho_{\alpha}\omega=\int_{\alpha}\big( \sum_{i\in I}\sigma_i \big)\rho_{\alpha}\omega.
		\end{equation}
		Our first task if to commute the sum over \( i\in I\) and the integral. We know that the partition of unity \( \{ \sigma_i \}\) is locally finite. For each \( m\in\supp(\rho_{\alpha}) \) we consider an open set \( \mO_m\) and a finite part \( I_m\subset I\) such that \( \supp(\sigma_i)\cap\mO_m\neq \emptyset\) only if \( i\in I_m\).

		These parts \( \{ \mO_m \}_{m\in\supp(\rho_{\alpha})}\) make an open covering of the compact \( \supp(\rho_{\alpha})\). Thus there exist \( m_1,\ldots,m_k\in \supp(\rho_{\alpha})\) such that \( \supp(\rho_{\alpha})\subset \bigcup_{l=1}^{k}\). If we set \( I_{\alpha}=\bigcup_{l=1}^kI_{m_l}\) we have
		\begin{equation}		\label{EQooEFMZooDbTpOl}
			\int_{\alpha}\rho_{\alpha}\omega=\int_{\alpha}\sum_{i\in I}\sigma_i\rho_{\alpha}\omega= \int_{\alpha}\sum_{i\in I_{\alpha}}\sigma_i\rho_{\alpha}\omega=\sum_{i\in I_{\alpha}}\int_{\alpha}\sigma_i\rho_{\alpha}\omega=\sum_{i\in I}\int_{\alpha}\sigma_i\rho_{\alpha}\omega
		\end{equation}
		because the sum over \( i\in I_{\alpha}\) is finite.

		\spitem[For \ref{ITEMooGHRAooYZtFco}]
		%-----------------------------------------------------------
		Now we prove that \( \int_{\alpha}\sigma_i\rho_{\alpha}\omega=\int_i\sigma_i\rho_{\alpha}\omega\). The part \( S=\supp(\rho_{\alpha})\cap \supp(\sigma_i)\) satisfy \( S\subset\varphi_{\alpha}(U_{\alpha})\cap \phi_i(V_i)\). Proposition \ref{PROPooGVQDooNwnGXs} then shows
		\begin{equation}		\label{EQooQWHLooThOixK}
			\int_{\alpha}\rho_{\alpha}\sigma_i\omega=\int_{U_{\alpha}}(\rho_{\alpha}\sigma_i\omega)\circ\varphi_{\alpha}=\int_{V_i}(\rho_{\alpha}\sigma_i)\omega \circ\phi_i=\int_i\rho_{\alpha}\sigma_i\omega.
		\end{equation}

		\spitem[For \ref{ITEMooJOJPooXfziTe}]
		%-----------------------------------------------------------
		Out task now is to commute two sums. We consider the counting measure on \( I\) and \( \Lambda\) as well as the function
		\begin{equation}
			\begin{aligned}
				g\colon \Lambda\times I & \to \eR                                    \\
				\alpha,i                & \mapsto \int_i\rho_{\alpha}\sigma_i\omega.
			\end{aligned}
		\end{equation}
		We check that \( f\in L^1(\Lambda\times I)\) by checking the inequality of corollary \ref{CorTKZKwP}\ref{ITEMooJMPLooZKwxQC} :
		\begin{subequations}
			\begin{align}
				\sum_{\alpha\in\Lambda}\left[   \sum_{i\in I} | g(\alpha,i) |  \right] & = \sum_{\alpha\in\Lambda}\left[   \sum_{i\in I}|\int_{V_i}(\rho_{\alpha}\sigma_i)\big( \phi_i(x) \big)f_i\big( \phi_i(x) \big) dx| \right]                                          \\
				                                                                       & = \sum_{\alpha\in\Lambda}\left[   \sum_{i\in I}\int_{V_i}(\rho_{\alpha}\sigma_i)\big( \phi_i(x) \big)f_i\big( \phi_i(x) \big) dx \right]   & \text{s.b.}	\label{SUBEQooXFKGooCNPMNH} \\
				                                                                       & = \sum_{\alpha\in\Lambda}\left[   \sum_{i\in I}\int_i\rho_{\alpha}\sigma_i \omega \right]                                                                                           \\
				                                                                       & = \sum_{\alpha\in\Lambda}\left[   \sum_{i\in I}\int_{\alpha}\rho_{\alpha}\sigma_i \omega  \right]                                          & \text{item \ref{ITEMooGHRAooYZtFco}}   \\
				                                                                       & = \sum_{\alpha\in\Lambda}\left[  \int_{\alpha}\sum_{i\in I}\rho_{\alpha}\sigma_i\omega  \right]                                            & \text{s.b.}		\label{SUBEQooTCEUooWOPPXf} \\
				                                                                       & =\sum_{\alpha\in\Lambda}\int_{\alpha}\rho_{\alpha}\omega                                                                                                                            \\
				                                                                       & <\infty.
			\end{align}
		\end{subequations}
		Indeed:
		\begin{itemize}
			\item
			      For \eqref{SUBEQooXFKGooCNPMNH}, this is the hypothesis that \( f_{\alpha}\geq 0\). By the way the whole point of this proposition and the definition of \( \int_M\omega\) in two steps is for this very step\quext{I saw this justification nowhere. If you can do simpler, please send me a message. See the question \cite{BIBooFSEXooCmOftt}.}.
			\item
			      For \eqref{SUBEQooTCEUooWOPPXf}, we restrict the sum over \( i\) to a finite sum as in item \ref{ITEMooLLMCooFGNsYmi}.
		\end{itemize}
		This proves that \( g\in L^1(\Lambda\times I)\). The theorem of Fubini \ref{ThoFubinioYLtPI} commutes the sums.

		\spitem[For \ref{ITEMooUTQVooHafpOr}]
		%-----------------------------------------------------------
		This is a computation using all the other items:
		\begin{subequations}
			\begin{align}
				\sum_{\alpha\in\Lambda}\int_{\alpha}\rho_{\alpha}\omega & =\sum_{\alpha\in\Lambda}\sum_{i\in I}\int_{\alpha}\sigma_i\rho_{\alpha}\omega  \\
				                                                        & =\sum_{i\in I}\sum_{\alpha\in \Lambda}\int_{\alpha}\sigma_i\rho_{\alpha}\omega \\
				                                                        & =\sum_{i\in I}\sum_{\alpha\in\Lambda}\int_i\sigma_i\rho_{\alpha}\omega         \\
				                                                        & =\sum_{i\in I}\int_i\sum_{\alpha\in\Lambda}\sigma_i\rho_{\alpha}\omega         \\
				                                                        & =\sum_{i\in I}\int_i\sigma_i\omega.
			\end{align}
		\end{subequations}
	\end{subproof}
\end{proof}

\begin{proof}
	In several parts.
	\begin{subproof}
		\spitem[Integration on one chart]
		%-----------------------------------------------------------
		Let fix \( \alpha\in \Lambda\). We prove that \( \int_{\alpha}\sigma_i\rho_{\alpha}\omega=\int_{\alpha,i}\sigma_i\rho_{\alpha}\omega\). If
		\begin{equation}
			\omega_m=f(m)\partial^*_{\alpha,\wedge\{ 1,\ldots,n \}},
		\end{equation}
		we have
		\begin{equation}
			(\sigma_i\rho_{\alpha}\omega)_m=\sigma_i(m)\rho_{\alpha}(m)f(m)  \partial^*_{\alpha,1}\wedge\ldots\wedge\partial^*_{\alpha,n},
		\end{equation}
		and then
		\begin{equation}
			\int_{\alpha}\sigma_i\rho_{\alpha}\omega=\int_{U_{\alpha}}\sigma_i\big( \varphi_{\alpha}(x) \big)\rho_{\alpha}\big( \varphi_{\alpha}(x) \big)f\big( \varphi_{\alpha}(x) \big)dx.
		\end{equation}
		Since \( \sigma_i\big( \varphi_{\alpha}(x) \big)=0\) if \( x\not\in(\varphi_{\alpha}^{-1}\circ\phi_i)(V_i)\), the integration over \( U_{\alpha}\) can be restricted to an integration over
		\begin{equation}
			U_{\alpha}\cap\varphi_{\alpha}^{-1}\big( \phi_i(V_i) \big)=\varphi_{\alpha}^{-1}\big( \varphi_{\alpha}(U_{\alpha})\cap\phi_i(V_i) \big)=W_{\alpha,i}.
		\end{equation}
		Thus we have
		\begin{subequations}
			\begin{align}
				\int_{\alpha}\sigma_i\rho_{\alpha}\omega & =\int_{U_{\alpha}}\sigma_i\big( \varphi_{\alpha}(x) \big)\rho_{\alpha}\big( \varphi_{\alpha}(x) \big)f\big( \varphi_{\alpha}(x) \big)dx                                \\
				                                         & =\int_{W_{\alpha,i}}\sigma_i\big( \varphi_{\alpha}(x) \big)\rho_{\alpha}\big( \varphi_{\alpha}(x) \big)f\big( \varphi_{\alpha}(x) \big)dx                              \\
				                                         & =\int_{W_{\alpha,i}}\sigma_i\big( \psi_{\alpha}(x) \big)\rho_{\alpha}\big( \psi_{\alpha}(x) \big)f\big( \psi_{\alpha}(x) \big)dx           \label{SUBEQooMIDLooNpqpaK} \\
				                                         & = \int_{\alpha,i}\sigma_i\rho_{\alpha}\omega.
			\end{align}
		\end{subequations}
		For \eqref{SUBEQooMIDLooNpqpaK}, we have \( \varphi_{\alpha}(x)=\psi_{\alpha,i}(x)\) whenever \( x\in W_{\alpha,i}\).

		\spitem[General case]
		%-----------------------------------------------------------
		\begin{subproof}

			\spitem[Commute two sums]		\label{SPooALWRooAGbyMn}
			%-----------------------------------------------------------

			% TODOooCPEGooCgBfnv Il faut faire ce point.

			\spitem[Conclusion]
			%-----------------------------------------------------------
			We have
			\begin{subequations}
				\begin{align}
					\sum_{\alpha\in \Lambda}\int_{\alpha}\rho_{\alpha}\omega & =\sum_{\alpha\in\Lambda}\sum_{i\in I}\int_i\sigma_i\rho_{\alpha}\omega                                                \\
					                                                         & =\sum_{i\in I}\sum_{\alpha\in\Lambda}\int_i\sigma_i\rho_{\alpha}\omega & \text{pt. \ref{SPooALWRooAGbyMn}}            \\
					                                                         & =\sum_{i\in I}\int_{i}\sum_{\alpha}\rho_{\alpha}\sigma_i\omega         & \text{cf. bellow}		\label{SUBEQooRHHNooXrXKCc} \\
					                                                         & = \sum_{i\in I}\int_i\sigma_i\omega
				\end{align}
			\end{subequations}
			For \eqref{SUBEQooRHHNooXrXKCc}, we need to redo the work of point \ref{ITEMooLLMCooFGNsYmi} with \( \alpha\) instead of \( i\).
		\end{subproof}
	\end{subproof}
\end{proof}



%+++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Manifold with boundary}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++

%-------------------------------------------------------
\subsection{Some facts about \( \eR^n_+\)}
%----------------------------------------------------

We already proved that \( \eR^n\) is \( C^{\infty}\)-diffeomorphic to \( B(0,1)\).

We write
\begin{equation}
	\eR_+^n=\{ (x_1,\ldots,x_n)\in \eR^n\tq x_n\geq 0 \}.
\end{equation}
We consider the topology induced from \( \eR^n\), and the differential structure of definition \ref{DEFooLXVNooIpoIBp}.

\begin{lemma}[\cite{MonCerveau}]	\label{LEMooBICBooFUQyYA}
	The boundary\footnote{Definition \ref{DEFooACVLooRwehTl}.} of \( \eR^n_+\) is
	\begin{equation}
		\partial \eR^n_+=\{ x\in \eR^n_+\tq x_n=0 \}.
	\end{equation}
\end{lemma}


\begin{proposition}[\cite{BIBooGOXFooBAddeQ,BIBooUCJHooPpuntW, MonCerveau}]	\label{PROPooPUREooSkeyxs}
	There are no diffeomorphism\footnote{Definition \ref{DefAQIQooYqZdya}. Bijection, differentiable, invertible with differentiable inverse in the sens of definition \ref{DEFooLXVNooIpoIBp}.} between \( \eR^n_+\) and \( \eR^n\).
\end{proposition}

\begin{proof}
	We suppose that such a diffeomorphism exists. Let \(f \colon \eR^n_+\to \eR^n  \) be a diffeomorphism. Let \( a\in \eR^n_+\) be such that \( a_n=0\). There exists open parts \( U\) of \( \eR^n_+\) and \( V\) of \( \eR^n\) and a diffeomorphism \(\hat f \colon U\to V  \) such that \( a\in U\). We use the mean value theorem \ref{LEMooYQZZooVybqjK} on \( \hat f\) :
	\begin{equation}	\label{EQooTKGQooQmlOhv}
		\hat f(a+h)=\hat f(a)+d\hat f_a(h)+\alpha(h).
	\end{equation}

	Since \( U\cap \eR^n_+\) is open in \( \eR^n_++\) and since the reciprocal of \( f\) is continuous, the part \( f(U\cap \eR^n_+)\) is open in \( \eR^n\) (and contains \( f(a)\)). Let \( r>0\) be such that
	\begin{equation}
		B\big( \hat f(a), r \big)=   B\big( f(a),r \big)\subset f\big( U\cap \eR^n_+ \big).
	\end{equation}
	From equation \eqref{EQooTKGQooQmlOhv} we get
	\begin{equation}
		\| \hat f(a+\epsilon e_n)-\hat f(a) \|\leq \epsilon\| df_a \|+\| \alpha(\epsilon e_n) \|.
	\end{equation}
	If \( \epsilon\) is small enough we have
	\begin{equation}
		\hat f(a+\epsilon e_n)\in B\big( \hat f(a),r \big)\subset f\big( U\cap \eR^n_+ \big).
	\end{equation}
	Let \( \epsilon<0\) small enough. There exists \( u\in U\cap \eR^n_+\) such that \( f(u)=\hat f(a+\epsilon e_n)\). But on \( U\cap \eR^n_+\) we have \( f=\hat f\), so that
	\begin{equation}		\label{EQooSZLJooBjICmu}
		\hat f(u)=\hat f(a+\epsilon e_n)
	\end{equation}
	Notice that \( u\neq a+\epsilon e_n\) because \( u_n\geq 0\) while \( (a+\epsilon e_n)_n=\epsilon<0\). Equation \eqref{EQooSZLJooBjICmu} contradicts that \( \hat f\) is bijective. Contradiction. Finished.
\end{proof}

\begin{lemma}[\cite{MonCerveau}]	\label{LEMooEVSVooKJrgKz}
	An open part of \( \eR^n_+\) containing an element of \( \partial\eR^n_+\) is not open in \( \eR^n\).
\end{lemma}

\begin{proof}
	Let \( A\) be open in \( \eR^n_+\) and let \( a\in A\) be such that \( a_n=0\). We suppose that \( A\) is open in \( \eR^n\). Then there exists \( r>0\) such that \( B(a,r)\subset A\). The element \( a-re_n\) belongs to \( B(a,r)\) but \( (a-re_n)_n=a_n-r<0\). Thus \( B(a,r)\) contains an element outside \( \eR^n_+\). Contradiction.
\end{proof}

\begin{lemma}[\cite{MonCerveau}]	\label{LEMooWZOBooGrvNGQ}
	Let \( X\) be a topological space, \( A\) be open in \( \eR^n_+\), and \( a\in A\) satisfying \( a_n>0\). We consider an homeomorphism \(f \colon A\to X  \). Then there exists a neighbourhood \( U\) of \( a\) in \( \eR^n\) such that \( U\subset A\) and \(f \colon U\to X  \) is homeomorphic.
\end{lemma}

\begin{proof}
	Several subsets.
	\begin{enumerate}
		\item
		      Since \( A\) is open in \( \eR^n_+\), there exists an open \( U_1\) of \( \eR^n\) such that \( A=U\cap \eR^n_+\). There exists \( r_1>0\) such that \( B(a,r_1)\subset U_1\).
		\item

		      Since the projection \( x\mapsto x_n\) is continuous on \( \eR^n\), there exists an open neighbourhood \( U_2\) of \( a\) in \( \eR^n\) such that \( y_n>0\) for every \( y\in U_2\). Let \( r_2>0\) be such that \( B(a,r_2)\subset U_2\).
		\item
		      The definition of continuity on a closed part (definition \ref{DEFooLXVNooIpoIBp}) says that there exists an open \( U_3 \) of \( \eR^n\) containing \( A\) and an homeomorphic extension \(\tilde f \colon U_3\to X  \).
	\end{enumerate}
	Taking \( r=\min\{r_1,r_2\}\) we have
	\begin{equation}
		B(a,r)\subset U_1\cap\eR^n_+=A\subset U_3.
	\end{equation}
	The extension \( \tilde f\) is thus defined on \( B(a,r)\). And, since \( B(a,r)\subset U_2\), we have \( \tilde f(x)=f(x)\) for every \( x\in B(a,r)\). Thus the map \( f \colon B(a,r)\to X  \) is an homeomorphism.
\end{proof}

\begin{lemma}[\cite{BIBooSMBNooTmuXpu}]	\label{LEMooLPXFooUBLCqA}
	Let \( U\) and \( V\) be open parts of \( \eR^n_+\). Let \(f \colon U\to V  \) be a \( C^1\)-diffeomorphism\footnote{Definition \ref{DEFooLXVNooIpoIBp}.}. Then \( f(x)_n=0\) if and only if \( x_n=0\).
\end{lemma}

\begin{proof}
	Since \( U\) and \( V\) are open in \( \eR^n_+\), there are open parts \( A\) and \( B\) of \( \eR^n\) such that \( U=A\cap \eR^n_+\) and \( V=B\cap \eR^n_+\). We also consider the smooth map
	\begin{equation}
		\begin{aligned}
			\sigma\colon \eR^n & \to \eR      \\
			x                  & \mapsto x_n.
		\end{aligned}
	\end{equation}
	Now we prove the two  parts.
	\begin{subproof}
		\spitem[Suppose \( a_n>0\)]
		%-----------------------------------------------------------
		Since \( \sigma(a)>0\), there exists an open \( B'\) of \( \eR^n\) such that \( \sigma>0\) on \( B\). Taking \( B=B'\cap A\), we have
		\begin{equation}
			a\in B\subset A
		\end{equation}
		where \( B\) is open of \( \eR^n\) and \( \sigma|_B>0\). What about \( f(B)\) ? We use the smooth invariance of the domain theorem \ref{THOooGUELooSBQhRu} with the manifolds \( M=R^n\) and \( N=\eR^n\). Since \( B\) is open and \(f \colon B\to f(B)  \) is a \( C^1\)-diffeomorphism, the part \( f(B)\) is open in \( \eR^n\).

		We show that \( f(y)_n>0\) for every \( y\in f(B)\). Suppose that \( y\in f(B)\) satisfy \( y_n=0\). Since \( f(B)\) is an open of \( \eR^n\), we have an open \( S\) of \( \eR^n\) satisfying \( y\in S\subset f(B)\). Since \( y_n=0\), there are points \( z\) of \( S\) such that \( z_n<0\). This is a contradiction because \( z\in S\subset f(B)\subset V\subset \eR^n_+\).

		\spitem[Suppose \( f(a)_n>0\)]
		%-----------------------------------------------------------
		Since \( f^{-1}\) is a \( C^1\)-diffeomorphism as well as \( f\) itself, we use the previous point to say that \( f^{-1}\big( f(a) \big)_n>0\). Thus we have \( a_n>0\).
	\end{subproof}
\end{proof}


\begin{lemma}[\cite{MonCerveau}]	\label{LEMooYWBHooDTjCyf}
	Let \( f\in L^1(\eR^n_+)\). We have
	\begin{equation}		\label{EQooIYXTooJZpqhl}
		\int_{\eR^n_+}f=\int_{\eR^{n-1}}\left[  \int_0^{\infty}f(x_1,\ldots,x_{n-1},t)dt \right]dx_1,\ldots,dx_{n-1},
	\end{equation}
	and
	\begin{equation}		\label{EQooSNGAooTSrOKX}
		\int_{\eR^n_+}f=\int_0^{\infty}\left(    \int_{\eR^{n-2}} \left[  \int_{-\infty}^{\infty}f(x_1,\ldots,x_{n-1}, t)dx_i \right]dx_1\ldots \widehat{dx_i}\ldots dx_{n-1}   \right)dt.
	\end{equation}
\end{lemma}

\begin{lemma}[\cite{MonCerveau}]	\label{LEMooZKWKooBwNywC}
	Let \(f \colon \eR^n_+\to \eR  \) be smooth with compact support. If \( i\neq n\) we have
	\begin{equation}		\label{EQooZHSPooDFLaxv}
		\int_{\eR^n_+}(\partial_if)(x)dx=0.
	\end{equation}
	In the other case,
	\begin{equation}		\label{EQooZOYBooLyeoSl}
		\int_{\eR^n_+}(\partial_nf)(x)dx=-\int_{\eR^{n-1}}f(x_1,\ldots,x_{n-1},0)dx_1\ldots dx_{n-1}.
	\end{equation}
\end{lemma}

\begin{proof}
	Two parts.
	\begin{subproof}
		\spitem[For \eqref{EQooZHSPooDFLaxv}]
		%-----------------------------------------------------------
		We apply the formula \eqref{EQooSNGAooTSrOKX} to \( \partial_if\) :
		\begin{equation}
			\int_{\eR^n_+}(\partial_if)(x)dx=\int_0^{\infty}\left(  \int_{\eR^{n-2}}\left[   \int_{\eR}(\partial_if)(x_1,\ldots,x_i,\ldots,x_{n-1},t)dx_i  \right]dx_1\ldots\widehat{dx_i}\ldots dx_{n-1} \right)dt.
		\end{equation}
		The inner most integral is vanishing as the integral on \( \eR\) of a derivative of a compactly supported function.
		\spitem[For \eqref{EQooZOYBooLyeoSl}]
		%-----------------------------------------------------------
		We start from \eqref{EQooIYXTooJZpqhl}:
		\begin{equation}		\label{EQooBOIBooPrsqyJ}
			\int_{\eR^n_+}(\partial_nf)(x)dx=\int_{\eR^{n-1}}\left(  \int_0^{\infty}(\partial_nf)(x_1,\ldots,x_{n-1},t)dt \right)dx_1\ldots dx_{n-1}.
		\end{equation}
		For fixed \( (x_1,\ldots,x_{n-1})\in \eR^{n-1}\) we set
		\begin{equation}
			\begin{aligned}
				\tilde f\colon \mathopen[ 0,\infty\mathclose[ & \to \eR                           \\
				t                                             & \mapsto f(x_1,\ldots,x_{n-1}, t).
			\end{aligned}
		\end{equation}
		The inner integral of \eqref{EQooBOIBooPrsqyJ} is
		\begin{equation}
			\int_0^{\infty}\tilde f(t)dt=\lim_{R\to \infty}\tilde f(R)-\tilde f(0)=-\tilde f(0)
		\end{equation}
		because \( \tilde f\) has compact support. Thus we have
		\begin{equation}
			\int_{\eR^n_+}(\partial_nf)(x)dx=-\int_{\eR^{n-1}}f(x_1,\ldots,x_{n-1},0)dx_1\ldots dx_{n-1}.
		\end{equation}

	\end{subproof}
\end{proof}

%-------------------------------------------------------
\subsection{Manifold with boundary}
%----------------------------------------------------

\begin{definition}[Topological manifold with boundary\cite{BIBooZBZTooYmHemH}]	\label{DEFooNETXooZaZMcm}
	A topological space \( M\) is a \defe{topological manifold with boundary}{topological manifold!with boundary} if it is Hausdorff and every element of \( M\) has a neighbourhood homeomorphic either to \( \eR^n\) or \( \eR^{n}_+\).

	Let \( M\) be a manifold with boundary. The \defe{boundary}{boundary} of \( M\) is set of points of \( M\) which have no neighbourhood homeomorphic to \( \eR^n\). And we denote by \( \partial M\) the boundary of \( M\).
\end{definition}

\begin{normaltext}
	The definition of \( \partial M\) is not a particular case of the general definition \ref{DEFooACVLooRwehTl} of a boundary because every point of a topological space is in the interior of the space itself.

	The reason of the definition is that the points of \( \partial M\) are the ones who are images of points in \( \eR^n_+\) that are on \( \partial \eR^n_+\) as we will see in proposition \ref{LEMooLPXFooUBLCqA}.
\end{normaltext}


\begin{theorem}[Smooth manifold with boundary\cite{BIBooZBZTooYmHemH}]	\label{THOooKKBLooIrITBe}
	Let \( M\) be a topological manifold with boundary. A \defe{chart}{chart with boundary} is a map \(\varphi \colon U\to M  \) where \( U\) is either homeomorphic to \( \eR^n\) or \( \eR^n_+\)\footnote{In fact \( U\) could be only homeomorphic to \( \eR^n_+\), but it would complicate everything. In particular the characterisation of \( \partial M\) as the points with coordinates \( x_n=0\).}

	A set \( \mA=\{ (U_{\alpha},\varphi_{\alpha}) \}_{\alpha\in \Lambda}\) is an atlas if
	\begin{enumerate}
		\item
		      For every \( m\in M\), there exists \( \alpha\in \Lambda\) such that \( m\in \varphi_{\alpha}(U_{\alpha})\),
		\item
		      The maps
		      \begin{equation}
			      \varphi_{\alpha}^{-1}\circ\varphi_{\beta} \colon \varphi_{\beta}^{-1}(M_{\alpha}\cap M_{\beta})\to U_{\alpha}
		      \end{equation}
	\end{enumerate}
	are homeomorphic in the sense of definition \ref{DEFooLXVNooIpoIBp}.

	If these maps are smooth, the manifold \( M\) is a \defe{smooth manifold with boundary}{smooth manifold with boundary}.
\end{theorem}


\begin{proposition}[\cite{MonCerveau}]	\label{PROPooWQHTooXhkWdZ}
	Let \( M\) be a smooth manifold with boundary and let \( (U_{\alpha}, \varphi_{\alpha})\) be a chart with \( U_{\alpha}=\eR^n_+\). Then \( m\in \partial M\cap \varphi_{\alpha}(U_{\alpha})\) if and only if \( \varphi_{\alpha}^{-1}(m)_n=0\).
\end{proposition}

\begin{proof}
	Two parts.
	\begin{subproof}
		\spitem[\( \Rightarrow\)]
		%-----------------------------------------------------------
		We suppose that \( m\in \partial M\cap \varphi_{\alpha}(U_{\alpha})\). Since \( \varphi_{\alpha}^{-1}(m)\in \eR^n_+\), we have \( \varphi_{\alpha}^{-1}(m)_n\geq 0\). Suppose that \( \varphi_{\alpha}^{-1}(m)>0\). Let \( a=\varphi_{\alpha}^{-1}(m)\). Since \( \varphi_{\alpha}^{-1}\) is continuous, there exists a neighbourhood \( U\) of \(a\in \eR^n \) such that \( y_n>0\) for every \( y\in U\). The restriction \(\varphi_{\alpha} \colon U\to M  \) is then a chart around \( m\) defined on a open part of \( \eR^n\), which is not possible because \( m\in\partial M\).

		\spitem[\( \Leftarrow\)]
		%-----------------------------------------------------------
		Suppose that \( \varphi_{\alpha}^{-1}(m)_n=0\). We have to prove that \( m\in\partial M\), in other words, every chart around \( m\) has to be from \( \eR^n_+\); there exists no charts from an open set of \( \eR^n\) to a neighbourhood of \( m\) in \( M\).

		Let \(\varphi_{\beta} \colon U_{\beta}\to M  \) be an other chart around \( m\). We write \( M_{\alpha\beta}=\varphi_{\alpha}(U_{\alpha})\cap \varphi_{\beta}(U_{\beta})\). By definition of a chart, the map
		\begin{equation}
			\varphi_{\alpha}^{-1}\circ \varphi_{\beta} \colon \varphi_{\beta}^{-1}(M_{\alpha\beta})\to \varphi_{\alpha}^{-1}(M_{\alpha\beta})
		\end{equation}
		is a \( C^{\infty}\)-diffeomorphism.

		Let \( q=\varphi_{\beta}^{-1}(m)\). We have
		\begin{equation}
			(\varphi_{\alpha}^{-1}\circ\varphi_{\beta})(q)_n=\varphi_{\alpha}^{-1}(m)_n=0,
		\end{equation}
		so that \( q_n=0\) by lemma \ref{LEMooLPXFooUBLCqA}.

		There are two possibilities : \( U_{\beta}\) is an open of \( \eR^n_+\) or \( U_{\beta}\) is an open of \( \eR^n\). These possibilities are not exclusive : \( B(10,1)\) is open in \( \eR^n\) and in \( \eR^n_+\).

		\begin{subproof}
			\spitem[If \( U_{\beta}\) is open in \( \eR^n_+\)]
			%-----------------------------------------------------------
			The part \( U_{\beta}\) is an open of \( \eR^n_+\) containing an element of \( \partial \eR^n_+\) (the point \( q\)). By lemma \ref{LEMooEVSVooKJrgKz}, the part \( U_{\beta}\) cannot be an open of \( \eR^n\). Thus \( U_{\beta}\) is \( \eR^n_+\).

			\spitem[If \( U_{\beta}\) is open in \( \eR^n\)]
			%-----------------------------------------------------------
			We set again \( q=\varphi_{\beta}^{-1}(m)\). Using the proposition  \ref{PROPooFEJXooMjsvFo}, we consider a \( C^{\infty}\)-diffeomorphism \(\psi \colon \eR^n\to B(s,r)  \) with \( s_n>0\) and \( r<\| s \|\) (so \( B(s,r)\) keeps in the interior of \( \eR^n_+\)).

			Since \( U_{\beta}\) is open in \( \eR^n\), there exists \( \delta>0\) such that \( B(q,\delta)\subset U_{\beta}\). We choose \( \delta\) small enough to have \( \varphi_{\beta}(\big( B(q,\delta) \big)\subset \varphi_{\alpha}(U_{\alpha})\). We write
			\begin{enumerate}
				\item
				      \( A=\psi\big( B(q,\delta) \big)\),
				\item
				      \( U_{\alpha}'=(\varphi_{\alpha}^{-1}\circ\varphi_{\beta})\circ\psi^{-1}(A)\).
			\end{enumerate}
			The map
			\begin{equation}
				\sigma=\varphi_{\alpha}^{-1}\circ\varphi_{\beta}\circ\psi^{-1} \colon A\to U_{\alpha}'
			\end{equation}
			is a \( C^{\infty}\)-diffeomorphism between \( A\) which is open in \( \eR^n_+\) and \( U_{\alpha}'\) which is open in \( \eR^n\). The point \( a=\psi(q)\) belongs to \( A\) and satisfy
			\begin{equation}
				\sigma(a)=\sigma\big( \psi(q) \big)=\varphi_{\alpha}^{-1}(m).
			\end{equation}
			Thus \( \sigma(a)_n=\varphi_{\alpha}^{-1}(m)_n=0 \). This is a contradiction because the map \( \psi\) takes its values in \( B(s,r)\) which does not intersect \( \partial \eR^n_+\).
		\end{subproof}
	\end{subproof}
\end{proof}


\begin{proposition}[\cite{BIBooZBZTooYmHemH,MonCerveau}]	\label{PROPooTENAooDxIAbf}
	If \( M\) is a smooth manifold with boundary, then the boundary \( \partial M\) has a structure of smooth manifold.
\end{proposition}

\begin{proof}
	Let \( \{ (U_{\alpha}, \varphi_{\alpha}) \}_{\alpha\in \Lambda}\) be an atlas for \( M\). We consider the "boundary" charts:
	\begin{equation}
		\Lambda'=\{ \alpha\in\Lambda\tq U_{\alpha}=\eR^n_+ \},
	\end{equation}
	and, for each \( \alpha\in \Lambda'\), the maps
	\begin{equation}
		\begin{aligned}
			\phi_{\alpha}\colon r(U_{\alpha}) & \to \partial M                                 \\
			(x_1,\ldots,x_{n-1})              & \mapsto \varphi_{\alpha}(x_1,\ldots,x_{n-1},0)
		\end{aligned}
	\end{equation}
	where \( r\) is the map
	\begin{equation}
		\begin{aligned}
			r\colon \eR^n    & \to \eR^{n-1}                 \\
			(x_1,\ldots,x_n) & \mapsto (x_1,\ldots,x_{n-1}).
		\end{aligned}
	\end{equation}
	Defining
	\begin{equation}
		\begin{aligned}
			s\colon \eR^{n-1} & \to \eR^n      \\
			x'                & \mapsto (x',0)
		\end{aligned}
	\end{equation}
	we have
	\begin{subequations}		\label{SUBEQSooMASYooFfkvRT}
		\begin{align}
			\phi_{\alpha}=\varphi_{\alpha}\circ s \\
			\phi_{\alpha}^{-1}=r\circ\varphi_{\alpha}^{-1}.
		\end{align}
	\end{subequations}


	We are going to use the theorem \ref{THOooFIHIooLiSUxH} to show that the maps \( \{ \big( r(U_{\alpha}), \phi_{\alpha} \big) \}_{\alpha\in \Lambda'}\) turn \( \partial M\) into a topological manifold.
	\begin{subproof}
		\spitem[\( r(U_{\alpha})\) is open in \(\eR^{n-1}\)]
		%-----------------------------------------------------------
		Since \( U_{\alpha}=\eR^{n}_+\), we have \( r(U_{\alpha})=\eR^{n-1}\) which is open in \( \eR^{n-1}\).

		\spitem[Union is \( \partial M\)]
		%-----------------------------------------------------------
		Let \( m\in \partial M\). There is a \( \alpha\in \Lambda'\) such that \( m=\varphi_{\alpha}(q)\) with \( q\in U_{\alpha}\). From proposition \ref{PROPooWQHTooXhkWdZ}, we have \( q_n=0\) and then \( m=\phi_{\alpha}\big( r(q) \big)\).

		\spitem[\( \phi\) is injective]
		%-----------------------------------------------------------
		Suppose \( \phi_{\alpha}(x)=\phi_{\alpha}(y)\). This means
		\begin{equation}
			\varphi_{\alpha}(x_1,\ldots,x_{n-1},0)=\varphi_{\alpha}(y_1,\ldots,y_{n-1},0)
		\end{equation}
		and then \( (x_1,\ldots,x_{n-1},0)=(y_1,\ldots,y_{n-1},0)\) because \( \varphi_{\alpha}\) is injective.

		\spitem[\( \phi_{\alpha}^{-1}(\ldots)\) is open in \( U_{\alpha}\)]
		%-----------------------------------------------------------
		We have to prove that \( \phi_{\alpha}^{-1}\Big( \phi_{\alpha}\big( r(U_{\alpha}) \big)\cap \phi_{\beta}\big( r(U_{\beta}) \big)  \Big)\) is open in \( r(U_{\alpha})=\eR^{n-1}\).

		By hypothesis, the part
		\begin{equation}
			\varphi_{\alpha}^{-1}\big( \varphi_{\alpha}(U_{\alpha})\cap \varphi_{\beta}(U_{\beta}) \big)
		\end{equation}
		is open in \( U_{\alpha}\). Thus the part
		\begin{equation}
			A=(r\circ \varphi_{\alpha}^{-1})  \big( \varphi_{\alpha}(U_{\alpha})\cap \varphi_{\beta}(U_{\beta}) \big)
		\end{equation}
		is open in \( \eR^{n-1}\). Notice that
		\begin{equation}
			A=\phi_{\alpha}^{-1}\Big( \varphi_{\alpha}(U_{\alpha})\cap \varphi_{\beta}(U_{\beta}) \Big)=\phi_{\alpha}^{-1} \Big( \varphi_{\alpha}(U_{\alpha})\cap \varphi_{\beta}(U_{\beta})\cap\partial M \Big)
		\end{equation}
		because \( \phi_{\alpha}\) takes its values in \( \partial M\). For \( x\in U_{\alpha}\), there are two possibilities: either \( x_n=0\) or not. In the first case, \( \varphi_{\alpha}(x)\in \partial M\), in the second case, \( \varphi_{\alpha}(x)\not\in \partial M\) (proposition \ref{PROPooWQHTooXhkWdZ}). Defining \( U'_{\alpha}=\{ x\in U_{\alpha}\ tq x_n=0 \}\) and \( U_{\beta}'=\{ x\in U_{\beta}\tq x_n=0 \}\) we have
		\begin{equation}
			A=\phi_{\alpha}^{-1} \Big( \varphi_{\alpha}(U'_{\alpha})\cap \varphi_{\beta}(U'_{\beta}) \Big)
		\end{equation}
		Let \( (x',0)\in U'_{\alpha}\). We have
		\begin{equation}
			\varphi_{\alpha}(x',0)=\phi_{\alpha}(x')=\phi_{\alpha}\big( r(x',0) \big),
		\end{equation}
		and the same with \( \beta\) instead of \( \alpha\). Thus
		\begin{equation}		\label{EQooWVGBooMzuLYh}
			A=\phi_{\alpha}^{-1} \Big( \varphi_{\alpha}(U'_{\alpha})\cap \varphi_{\beta}(U'_{\beta}) \Big)=\phi_{\alpha}^{-1}\Big( \phi_{\alpha}\big( r(U_{\alpha}) \big)\cap\phi_{\beta}\big( r(U_{\beta}) \big) \Big).
		\end{equation}
		Since \( A\) is open, the right hand side of \eqref{EQooWVGBooMzuLYh} is open too.

		\spitem[Continuity and smoothness]
		%-----------------------------------------------------------
		Using the relations \eqref{SUBEQSooMASYooFfkvRT} we have
		\begin{equation}
			\phi_{\alpha}^{-1}\circ\phi_{\beta}=r\circ \varphi_{\alpha}^{-1}\circ\varphi_{\beta}\circ s.
		\end{equation}
		Since \( \varphi_{\alpha}^{-1}\circ\varphi_{\beta}\) is smooth, the whole is smooth.
	\end{subproof}
	Now the theorem \ref{THOooFIHIooLiSUxH} produces a structure of \( n-1\)-dimensional topological manifold for \( \partial M\). The fact that the transition maps \( \phi_{\alpha}^{-1}\circ\phi_{\beta}\) is smooth makes \( \partial M\) a smooth manifold.
\end{proof}

\begin{theorem}[Induced orientation\cite{BIBooZBZTooYmHemH}]	\label{THOooENBHooOfBTlA}
	Si \( \{ (U_{\alpha}, \varphi_{\alpha}) \}_{\alpha\in \Lambda}\) is an orientation on the \( n\)-dimensional smooth manifold \( M\), then the maps \( \{ r(U_{\alpha}), \phi_{\alpha} \}_{\alpha\in \Lambda'}\) is an orientation on \( \partial M\).

	If \( n\) is even, then this is the \defe{induced orientation}{induced orientation} is that one. If \( n\) is odd, the induced orientation is the other one\footnote{Proposition \ref{PROPooNCNJooHFngBW} says that if an orientation exists, there are exactly two classes of orientation.}.
\end{theorem}

\begin{proof}
	We have to check that
	\begin{equation}
		\det\big( d(\phi_{\alpha}^{-1}\circ\phi_{\beta})_{\phi^{-1}_{\beta}(m)} \big)>0
	\end{equation}
	for every \( \mu\in\partial M\) for which it makes sense. We decompose the matrix as
	\begin{equation}
		d(\varphi_{\alpha}^{-1}\circ\varphi_{\beta})_{(x_1,\ldots,x_{n-1},0)}=\begin{pmatrix}
			\begin{pmatrix}
				 &   & \\
				 & A & \\
				 &   &
			\end{pmatrix} &
			\begin{pmatrix}
				\uparrow \\
				v        \\
				\downarrow
			\end{pmatrix}      \\  \\
			\begin{pmatrix}
				\leftarrow & w & \rightarrow
			\end{pmatrix}
			                & r
		\end{pmatrix}
	\end{equation}
	where \( A\) is \( (n-1)\times (n-1)\), \( v\) is \( (n-1)\times 1\), \( w\) is \( 1\times (n-1)\) and \( r\in \eR\). We use the proposition \ref{PROPooJMBJooQzjXYf} to study the parts of this matrix.
	\begin{subproof}
		\spitem[Part \( A\)]
		%-----------------------------------------------------------
		We have
		\begin{equation}
			A_{ij}=\partial_j(\varphi_{\alpha}^{-1}\circ\varphi_{\beta})(x_1,\ldots,x_{n-1}, 0)_i
		\end{equation}
		with \( i,j\leq n-1\). For every \( t\) we have
		\begin{equation}
			(\varphi_{\alpha}^{-1}\circ\varphi_{\beta})\big( (x_1,\ldots,x_{n-1},0)+te_j \big)=(\phi_{\alpha}^{-1}\circ\phi_{\beta})\big( (x_1,\ldots,x_{n-1})+te_j \big),
		\end{equation}
		thus
		\begin{equation}
			A=d(\phi_{\alpha}^{-1}\circ\phi_{\beta})_{(x_1,\ldots,x_{n-1})}.
		\end{equation}
		By the way, this is the part we really want to study.

		\spitem[Part \( v\)]
		%-----------------------------------------------------------
		No need to work out this part.
		\spitem[Part \( w\)]
		%-----------------------------------------------------------
		We have
		\begin{equation}
			w_i=\partial_i(\varphi_{\alpha}^{-1}\circ\varphi_{\beta})(x_1,\ldots,x_{n-1}, 0)_n
		\end{equation}
		with \( i\leq n-1\). For every \( t\), we have \( \varphi_{\beta}\big( (x_1,\ldots,x_{n-1},0)+te_i \big)\in \partial M\), so that
		\begin{equation}
			( \varphi_{\alpha}^{-1} \circ\varphi_{\beta})\big( (x_1,\ldots,x_{n-1},0)+te_i \big)_n=0.
		\end{equation}
		Thus \( w_i=0\).

		\spitem[Part \( r\)]
		%-----------------------------------------------------------
		Since \( w=0\) and the determinant of \( d(\varphi_{\alpha}^{-1}\circ\varphi_{\beta})_{x_1,\ldots,x_{n-1},0} \) is non zero (because \( \{ \varphi_{\alpha} \}_{\alpha\in \Lambda'}\)) is an orientation, we must have \( r\neq 0\).

		We have
		\begin{equation}
			r=\partial_n(\varphi_{\alpha}^{-1}\circ\varphi_{\beta})(x_1,\ldots,x_{n-1}, 0)_n.
		\end{equation}
		Let
		\begin{equation}
			\begin{aligned}
				p\colon \mathopen[ 0,\epsilon\mathclose] & \to \eR                                                                    \\
				t                                        & \mapsto (\varphi_{\alpha}^{-1}\circ\varphi_{\beta})(x_1,\ldots,x_{n-1},t).
			\end{aligned}
		\end{equation}
		We have \( r=p'(0)\). We have \( p(0)=0\) ad \( p(t)>0\) for every \( t>0\). Thus \(  r=p'(0)\geq 0\). Since we already seen that \( r\neq 0\), we have \( r>0\).
	\end{subproof}
	Putting everything together,
	\begin{subequations}
		\begin{align}
			0 & < \det\big( d(\varphi_{\alpha}^{-1}\circ \varphi_{\beta})_{(x_1,\ldots,x_{n-1}, 0)} \big)			\label{SUBEQooMBRTooViUTtT} \\
			  & =\det\big( d(\phi_{\alpha}^{-1}\circ\phi_{\beta})_{(x_1,\ldots,x_{n-1})} \big)r.
		\end{align}
	\end{subequations}
	The inequality \eqref{SUBEQooMBRTooViUTtT} is because \( \varphi_{\alpha}\) and \( \varphi_{\beta}\) have same orientation. Since \( r>0 \) we have
	\begin{equation}
		\det\big( d(\phi_{\alpha}^{-1}\circ\phi_{\beta})_{(x_1,\ldots,x_{n-1})} \big)>0.
	\end{equation}
\end{proof}

%-------------------------------------------------------
\subsection{Tangent space}
%----------------------------------------------------

The tangent space of a manifold with boundary is still to be done. Maybe in \cite{BIBooQPQXooULIQko}.
%TODOooYEOWooQGSCDJ Faire l'espace tangent, définir le fibré tangent, cotangent et une forme différentielle sur une variété à bord.


\begin{corollary}[\cite{MonCerveau}]	\label{CORooYCMSooLmSJVN}
	Let \( M\) be a manifold with boundary. We consider a chart \(\varphi_{\alpha} \colon  U_{\alpha}\to M  \). We have
	\begin{equation}
		\phi_{\alpha}\big( r(U_{\alpha}) \big)=\varphi_{\alpha}(U_{\alpha})\cap \partial M.
	\end{equation}
\end{corollary}

\begin{proof}
	Let \( x=(x_1,\ldots,x_n)\in U_{\alpha}\). We have \( r(x)=(x_1,\ldots,x_{n-1})\) and then
	\begin{equation}
		\phi_{\alpha}\big( r(x) \big)=\varphi_{\alpha}(x_1,\ldots,x_{n-1}, 0).
	\end{equation}
	Thus we have \( \varphi_{\alpha}\Big( \phi_{\alpha}\big( r(x) \big) \Big)=(x_1,\ldots,x_{n-1},0)\) and the proposition \ref{PROPooWQHTooXhkWdZ} makes \( \phi_{\alpha}\big( r(x) \big)\in \partial M\). This proves the inclusion in one sense.

	For the other inclusion, let \( m\in \varphi_{\alpha}(U_{\alpha})\cap \partial M\). We have \( \varphi_{\alpha}^{-1}(m)_n=0\). If we write \( x=\varphi_{\alpha}^{-1}(m)\) we have
	\begin{equation}
		x=(x_1,\ldots,x_{n-1}, 0).
	\end{equation}
	Let \( x'=(x_1,\ldots,x_{n-1})\). We have
	\begin{equation}
		\phi_{\alpha}(x')=\varphi_{\alpha}(x',0)=\varphi_{\alpha}(x)\in \varphi_{\alpha}(U_{\alpha}).
	\end{equation}
\end{proof}

\begin{proposition}[\cite{MonCerveau}]	\label{PROPooKBKAooKjORhq}
	Let \( M\) be a manifold with boundary. We consider a vector \( X\in T_mM\) with \( m\in \partial M\). Let \(\varphi_{\alpha} \colon U_{\alpha}\to M  \) be a chart around \( m\). We consider the corresponding chart \(\phi_{\alpha} \colon r(U_{\alpha})\to \partial M  \). We have
	\begin{equation}
		\partial_{\varphi_{\alpha},k}^*\big( di(X) \big)=\partial_{\phi_{\alpha},k}^*(X).
	\end{equation}
\end{proposition}

\begin{proof}
	We check with \( X=\partial_{\phi_{\alpha}, l}\). Taking \( x'=\phi_{\alpha}^{-1}(m)\in r(U_{\alpha})\), we have
	\begin{subequations}
		\begin{align}
			di(X) & =\frac{d}{dt} \left[ i\big( \phi_{\alpha}(x'+te_j) \big)  \right]_{t=0} \\
			      & =\frac{d}{dt} \left[ \varphi_{\alpha}(x'+te_l,0)  \right]_{t=0}         \\
			      & =\partial_{\varphi_{\alpha},l}.
		\end{align}
	\end{subequations}
	Thus we have
	\begin{equation}
		\partial_{\varphi_{\alpha},k}\big( di(\partial_{\phi_{\alpha},l}) \big)=\partial_{\varphi_{\alpha},k}^*(\partial_{\varphi_{\alpha},l})=\delta_{kl}.
	\end{equation}
	Thus with \( X=\sum_{l}X_l\partial_l\) we have
	\begin{equation}
		\partial_{\varphi_{\alpha}, k}\big( di(X) \big)=\sum_kX_k\delta_{kl}=X_k.
	\end{equation}
\end{proof}


The following proposition is the equivalent of proposition \ref{PROPooNOGKooQedJba} in the case of a manifold with boundary.

\begin{probleme}
	I'm far from being sure of proposition \ref{PROPooTSAQooWwDHlf}. If you have a better statement and a proof, let me know.
\end{probleme}


\begin{proposition}[\cite{MonCerveau}]	\label{PROPooTSAQooWwDHlf}
	Let \( M\) be a manifold with boundary. If \( \omega\) is a \( n-1\)-smooth differential form on \( M\), for each chart \(\varphi_{\alpha} \colon U_{\alpha}\to M  \), there exists a smooth map such that
	\begin{equation}
		\omega_m=\sum_{i=1}^nf_{\alpha,i}(m)\partial^{*}_{\alpha, \wedge\{ 1,\ldots,n \}\setminus\{ i \}}.
	\end{equation}

	If \(i \colon \partial M\to  M  \) is the inclusion map, we have\quext{The following formula is probably true, but its meaning is not yet clear form me because I do not have a definition of tangent bundle in the case of a manifold with boundary.}
	\begin{equation}		\label{EQooGFNFooDMSVcI}
		(i^*\omega)_m=f_{\alpha,\{ 1,\ldots,n-1 \}}(m)\partial^*_{\phi_{\alpha},\wedge \{ 1,\ldots,n-1 \}}.
	\end{equation}
\end{proposition}

\begin{proof}
	%TODOooABMIooHIguGs Faire la première partie de la preuve.
	I can prove the formula \eqref{EQooGFNFooDMSVcI}. Let \( X_1,\ldots,X_{n-1}\) be vector fields. We have
	\begin{subequations}
		\begin{align}
			(i^*\omega)_m(X_1,\ldots,X_{n-1}) & =\sum_If_{\alpha,I}(m)\partial_{\varphi_{\alpha},\wedge I}\big( di(X_1),\ldots,di(X_{n-1}) \big)                                          \\
			                                  & =\sum_If_{\alpha,I}(m)\partial_{\phi_{\alpha}, \wedge I}(X_1,\ldots,X_{n-1})                     & \text{prop. \ref{PROPooKBKAooKjORhq}}.
		\end{align}
	\end{subequations}
	This is formula \eqref{EQooGFNFooDMSVcI}.
\end{proof}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Stokes theorem}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++

Usually one writes the Stokes theorem as
\begin{equation}
	\int_Md\omega=\int_{\partial M}\omega.
\end{equation}
Obviously, the \( \omega\) on the right hand side cannot be the same as the one on the left hand side since they are not even defined on the same manifold.

\begin{theorem}[Stokes\cite{BIBooZBZTooYmHemH,MonCerveau}]	\label{THOooFTNKooQzBPIN}
	Let \( M\) be a compact manifold of dimension \( n\) with boundary. Let \( \omega\) be a smooth \( n-1\)-differential form on \( M\). We consider the inclusion \(i \colon \partial M\to M  \). We have
	\begin{equation}
		\int_Md\omega=\int_{\partial M} i^*\omega.
	\end{equation}
\end{theorem}

\begin{proof}
	Several parts.
	\begin{subproof}
		\spitem[If \( \omega\) is supported in \( M_{\alpha}\) with \( U_{\alpha}\) open in \( \eR^n\)]		\label{SPITEMooHFTEooAmNIJQ}
		%-----------------------------------------------------------
		We suppose that \( \omega\) is supported in \( \varphi_{\alpha}(U_{\alpha})\) where \( U_{\alpha}\) is open in \( \eR^n\). In other words, the support of \( \omega\) does not include points of \( \partial M\).
		\begin{subproof}
			\spitem[On \( \partial M\)]
			%-----------------------------------------------------------
			We prove that \( i^*\omega=0\). For every \( m\in \partial M\) we have
			\begin{equation}
				(i^*\omega)(X_1,\ldots,X_{n-1})=\omega_{i(m)}\big( di(X_1),\ldots,di(X_{n-1}) \big)=0
			\end{equation}
			because \( \omega_{i(m)}=0\).

			\spitem[On \( M\)]
			%-----------------------------------------------------------
			We prove that \( \int_Md\omega=0\). By proposition \ref{PROPooNOGKooQedJba} we have
			\begin{equation}
				\omega_m=\sum_{I\in C_{n-1}}f_{\alpha,I}(m)\partial_{\alpha,\wedge I}^*
			\end{equation}
			Where the sum over \( I\) is the sum over the multiidices of the form \( \{ 1,\ldots,n \}\setminus\{ i \} \). The differential is
			\begin{equation}
				d\omega_m=\sum_I(df_{\alpha,I})_m\wedge\partial^*_{\alpha,\wedge I}.
			\end{equation}
			Using proposition \ref{PROPooNAACooIUMcNw} we have
			\begin{subequations}
				\begin{align}
					d\omega_m & =\sum_I\sum_k(\partial_kf_{\alpha,I})(m)\partial^*_{\alpha,k}\wedge\partial^*_{\alpha,\wedge I}                                                                     \\
					          & =\sum_{i=1}^n\sum_{k=1}^n(\partial_kf_{\alpha,\{ 1,\ldots,n \}\setminus\{ i \}})(m)\partial_{\alpha,k}^*\wedge\partial^*_{\alpha,\{ 1,\ldots,n \}\setminus \{ i \}} \\
					          & =\sum_{i=1}^n(\partial_kf_{\alpha,\{ 1,\ldots,n \}\setminus\{ i \}})(m)\partial_{\alpha,i}^*\wedge\partial^*_{\alpha,\{ 1,\ldots,n \}\setminus \{ i \}}             \\
					          & =\sum_{i=1}^n(-1)^{i-1}(\partial_if_{\alpha,\{ 1,\ldots,n \}\setminus\{ i \}})(m)\partial^*_{\alpha,\wedge\{ 1,\ldots,n \}}.
				\end{align}
			\end{subequations}
			Thus
			\begin{equation}
				\int_{\alpha}d\omega=\sum_i(-1)^{i-1}\int_{U_{\alpha}}(\partial_{\alpha,i}f_{\alpha,i})\big( \varphi_{\alpha}(x) \big)dx
			\end{equation}
			where we write \( f_{\alpha,i}\) for \( f_{\alpha,\{ 1,\ldots,n \}\setminus \{ i \}}\).
			Since \( M\) is compact, the support of \( f_{\alpha,i}\) is closed in a compact and then is compact. The support of \( f_{\alpha,i}\circ\varphi_{\alpha}\) is compact in the open \( U_{\alpha}\) of \( \eR^{n}\). In that case we can extend \( f_{\alpha,i}\) by \( 0\) outside \( U_{\alpha}\) and we still have a smooth function. We have (dropping much indices for readability) :
			\begin{equation}
				(\partial_if)\big( \varphi_{\alpha}(x) \big)=\frac{d}{dt} \left[ f\big( \varphi_{\alpha}(x+te_i) \big)  \right]_{t=0}=\partial_i(f\circ\varphi_{\alpha})(x).
			\end{equation}
			Notice that the \( \partial_i\) on the left hand side is the vector field while the \( \partial_i\) in the right hand side is an usual partial derivative. Finally we have
			\begin{subequations}
				\begin{align}
					\int_{\alpha}d\omega & =\sum_i(-1)^{i-1}\int_{U_{\alpha}}\partial_i(f_{\alpha,i}\circ\varphi_{\alpha})(x)dx		\label{SUBEQooDLSXooNCOYzN} \\
					                     & =0
				\end{align}
			\end{subequations}
			by proposition \ref{PROPooCQEIooENbfux}.
		\end{subproof}
		\spitem[Support in \( \varphi_{\alpha}(U_{\alpha})\) with \( U_{\alpha}=\eR^n_+\)]		\label{SPITEMooHDCRooMfAROG}
		%-----------------------------------------------------------
		Two parts.
		\begin{subproof}
			\spitem[On \( M\)]
			%-----------------------------------------------------------
			The whole computation up to equation \eqref{SUBEQooDLSXooNCOYzN} is still valid:
			\begin{equation}		\label{EQooBOGGooYaNElj}
				\int_Md\omega=\sum_i(-1)^{i-1}\int_{U_{\alpha}}\partial_i(f_{\alpha,i}\circ\varphi_{\alpha})(x)dx.
			\end{equation}
			Since now \( U_{\alpha}=\eR^n_+\) is not open in \( \eR^n\), the proposition \eqref{PROPooCQEIooENbfux} does not apply.

			We deal with the terms \( i\neq n\) and \( i=n\) separately using the formulas of lemma \ref{LEMooZKWKooBwNywC}. If \( i\neq n\), the formula \eqref{EQooZHSPooDFLaxv} produces
			\begin{equation}
				\int_{U_{\alpha}}\partial_i(f_{\alpha,i}\circ\varphi_{\alpha})(x)dx=0.
			\end{equation}
			The sum in \eqref{EQooBOGGooYaNElj} reduces to the term \( i=n\) and, using \eqref{EQooZOYBooLyeoSl} we have
			\begin{equation}
				\int_{\eR^n_+}\partial_n(f_{\alpha,n}\circ\varphi_{\alpha})(x)dx=-\int_{_{\eR^{n-1}}}(f_{\alpha,n}\circ\varphi_{\alpha})(x_1,\ldots,x_{n-1},0)dx_1\ldots dx_{n)1},
			\end{equation}
			so that
			\begin{equation}		\label{EQooKAPUooQewdnN}
				\int_Md\omega=(-1)^{n}\int_{\eR^{n-1}}(f_{\alpha,n}\circ \varphi_{\alpha})(x_1,\ldots,x_{n-1},0)dx_1\ldots dx_{n-1}.
			\end{equation}

			\spitem[On \( \partial M\)]
			%-----------------------------------------------------------
			Since the support of \( \omega\) is contained in \( \varphi_{\alpha}(U_{\alpha})\), the formula \eqref{EQooGFNFooDMSVcI} says that the support of \( i^*\omega\) is contained in \( i^{-1}(M_{\alpha})\). Using the fact that \( i^{-1}(m)=\emptyset\) when \( m\notin \partial M\) and corollary \ref{CORooYCMSooLmSJVN} we have
			\begin{equation}
				i^{-1}(M_{\alpha})=i^{-1}(M_{\alpha}\cap \partial M)=M_{\alpha}\cap\partial M=\phi_{\alpha}\big( r(U_{\alpha}) \big).
			\end{equation}
			Thus we can reduce the integral
			\begin{equation}
				\int_{\partial M}i^*\omega=(-1)^n\int_{\alpha}i^*\omega.
			\end{equation}
			The factor \( (-1)^n\) comes from the fact that the orientation of \( \phi_{\alpha}\) is positive or negative following the parity of \( n\). See the definition \ref{THOooENBHooOfBTlA}. Using formula \eqref{EQooGFNFooDMSVcI} and dropping some index,
			\begin{subequations}
				\begin{align}
					\int_{\partial M}\omega & = (-1)^n\int_{\alpha}i^*\omega                                                                                                              \\
					                        & =(-1)^n\int_{r(U_{\alpha})}f_{\alpha}\circ\phi_{\alpha}                                                                                     \\
					                        & =(-1)^n\int_{\eR^{n-1}}(f_{\alpha}\circ\phi_{\alpha})(x_1,\ldots,x_{n-1})dx_1\ldots dx_{n-1}       & \text{s.b.}		\label{SUBEQooCLZZooLyJFLV} \\
					                        & =(-1)^n\int_{\eR^{n-1}}(f_{\alpha}\circ\varphi_{\alpha})(x_1,\ldots,x_{n-1},0)dx_1\ldots dx_{n-1}.
				\end{align}
			\end{subequations}
			For \eqref{SUBEQooCLZZooLyJFLV}, we have \( U_{\alpha}=\eR^n_+\) and then \( r(U_{\alpha})=\eR^{n-1}\). We got the same result as in equation \eqref{EQooKAPUooQewdnN}.

		\end{subproof}
		\spitem[General case]
		%-----------------------------------------------------------
		We consider a locally finite partition of unity \( \{ \rho_{\alpha} \}_{\alpha\in \Lambda}\). Since \( M\) is compact, the partition of unity is not only locally finite, but also finite. Let's see that. For each \( m\in M\), we have an open neighbourhood \( A_{m}\) and a finite subset \( \Lambda_m\subset \Lambda\) such that \( \rho_{\alpha}\neq 0\)  on \( A_{m}\) only if \( \alpha\in \Lambda_m\). Since \( M\) is compact, we extract a finite subcovering \( \{ A_{m_i} \}_{i=1,\ldots,k}\). If \( \alpha\) does not belong to \( \Lambda_{m_i}\) for some \( i\), then \( \rho_{\alpha}=0\) on \( M\). For that reason, we can commute the integral and the sum over \( \alpha\) in the following computation :
		\begin{subequations}
			\begin{align}
				\int_{\partial M}i^*\omega & =\int_{\partial M}\sum_{\alpha}\rho_{\alpha}(i^*\omega)                                                                             \\
				                           & =\sum_{\alpha}\int_{\partial M}\rho_{\alpha}(i^*\omega)                                                                             \\
				                           & =\sum_{\alpha}\int_Md\big( \rho_{\alpha}\omega \big)                                      & \text{s.b.} \label{SUBEQooOPYCooBSsmHI} \\
				                           & = \sum_{\alpha} \int_Md\rho_{\alpha}\wedge \omega+\sum_{\alpha}\int_M\rho_{\alpha}d\omega                                           \\
				                           & = \sum_{\alpha} \int_Md\rho_{\alpha}\wedge \omega+\int_Md\omega
			\end{align}
		\end{subequations}
		For \eqref{SUBEQooOPYCooBSsmHI}, we used one of the cases \ref{SPITEMooHFTEooAmNIJQ} or \ref{SPITEMooHDCRooMfAROG} following the nature of \( U_{\alpha}\). We have:
		\begin{subequations}
			\begin{align}
				\sum_{\alpha}\int_Md\rho_{\alpha}\wedge \omega & =\int_M\sum_{\alpha}(d\rho_{\alpha}\wedge\omega)  \\
				                                               & =\int_Md(\sum_{\alpha}\rho_{\alpha})\wedge \omega \\
				                                               & =0.
			\end{align}
		\end{subequations}
	\end{subproof}
\end{proof}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Integration of a differential form}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

I think that this whole section is useless because the matter is already done before.

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Open set in \( \eR^n\)}
%---------------------------------------------------------------------------------------------------------------------------

Let \( U\) be an open set of \( \eR^n\). A differential form of degree \( n\) over \( U\) can always be written under the form
\begin{equation}
	\omega_x=f(x)dx_1\wedge\ldots\wedge dx_n;
\end{equation}
this is proposition~\ref{ProprbjihK}.

\begin{definition}      \label{DEFooEYRFooRQTmRF}
	The integral of \( \omega\) on \( U\) is
	\begin{equation}
		\int_{U}f\,dx_1\wedge\ldots\wedge dx_n=\int_Uf
	\end{equation}
	The second integral is the integral of a function on \( \eR^n\), that is definition~\ref{DefTVOooleEst} where the measure is the Lebesgue measure on \( \eR^n\).
\end{definition}

\begin{lemma}[Change of variable]       \label{LEMooNCYSooXtnCKq}
	Let \( f\colon V\to U\) be a diffeomorphism of open sets in \( \eR^n\) and \( \omega\) be a \( n\)-form on \( U\). Then we have
	\begin{equation}
		\int_U\omega=\int_{f^{-1}(U)}f^*\omega
	\end{equation}
	if \( \det(f)>0\). A sign change if \( \det(df)<0\).
\end{lemma}

\begin{proof}
	Let, for \( y\in U\), write the form \( \omega\) as \( \omega_y=h(y)dy_1\wedge\ldots\wedge dy_n\). Taking \( v_i\in \Gamma(TV)\) we have
	\begin{subequations}
		\begin{align}
			(f^*\omega)_x(v_1,\ldots, v_n) & =\omega_{f(x)}\big( df_xv_1,\ldots, df_xv_n \big)                       \\
			                               & =h\big( f(x) \big)\det\begin{pmatrix}
				                                                       df_xv_1 \\
				                                                       \vdots  \\
				                                                       df_xv_n
			                                                       \end{pmatrix}                                    \\
			                               & =(h\circ f)(x)\det(df_x)\det\begin{pmatrix}
				                                                             v_1    \\
				                                                             \vdots \\
				                                                             v_n
			                                                             \end{pmatrix}                              \\
			                               & =(h\circ f)(x)\det(df_x)(dx_1\wedge\ldots\wedge dx_n)(v_1,\ldots, v_n).
		\end{align}
	\end{subequations}
	Thus
	\begin{equation}
		f^*\omega= (h\circ f)\det(df)dx_1\wedge\ldots\wedge dx_n
	\end{equation}
	Using the usual change of variable theorem~\ref{THOooUMIWooZUtUSg}\ref{ITEMooAJGDooGHKnvj} (and taking a sign if \( \det(df)<0\) because there is an absolute value in around the jacobian in \eqref{EQooLYAWooTArAZR}) :
	\begin{equation}
		\int_{f^{-1}(U)}f^*\omega=\int_V(h\circ f)\det(df)=\int_{f(V)}h=\int_Uh=\int_U\omega.
	\end{equation}
\end{proof}

That is for integrating a differential form on an open set of \( \eR^n\). In order to integrate on a manifold we ``simply'' use a pull-back with a chart system. There will be three complications
\begin{itemize}
	\item If an atlas is made from more than one chart, what about the intersections ?
	\item Independence with respect to the choice of the chart.
	\item Integrating a vector field (that is not obviously a \( n\)-form).
\end{itemize}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{One chart on a manifold}
%---------------------------------------------------------------------------------------------------------------------------

We suppose \( (M,g)\) to be a \( n\)-dimensional Riemannian manifold and \( S\) to be a \( (n-1)\)-dimensional submanifold. We suppose that both are inside only one chart
\begin{equation}
	\phi\colon U\subset \eR^n\to M
\end{equation}
and
\begin{equation}
	\varphi\colon A\subset \eR^{n-1}\to S.
\end{equation}
We also consider a differential form \( \omega\in \Wedge^n(T^*M)\) and \( \sigma\in\Wedge^{n-1}(T^*M)\). These are respectively \( n\) and \( n-1\) differential forms on \( M\).  We also consider \( v\), a vector field on \( M\) and \( \tau\), a \( 1\)-form on \(M\).

Let us see what is possible to integrate.

\begin{definition}[\cite{ooMLEZooCKxedX}]       \label{DEFooPDRCooPiBklC}
	Let \( \omega\) be a \( n\)-form defined on \( \phi(U)\) (vanishing everywhere else). Its integral is :
	\begin{equation}
		\int_{\phi(U)}\omega=\int_U\phi^*\omega.
	\end{equation}
	The last integral is an integral of type \( \int_{U}F(x_1,\ldots, x_n)dx_1\wedge\ldots \wedge dx_n\) on an open set in \( \eR^n\). That is definition~\ref{DEFooEYRFooRQTmRF}.
\end{definition}

This definition is nothing if it depend on the parametrisation. The following proposition show slightly more than the independence.
\begin{proposition}[\cite{MonCerveau,ooBTXRooUEBLMV}]       \label{PROPooNJCLooMqeeeX}
	Let be the charts \( \phi\colon U\to M\) and \( \psi\colon V\to N\) and a map \( f\colon M\to N\). The whole is supposed to be minimal :
	\begin{equation}
		f\big( \phi(U) \big)=\psi(V).
	\end{equation}
	Then we have the ``change of variable'' formula :
	\begin{equation}
		\int_{\phi(U)}\omega=\int_{\psi(V)}(f^{-1})^*\omega.
	\end{equation}
\end{proposition}

\begin{proof}
	By definition \( \int_{\phi(U)}\omega=\int_U\phi^*\omega\) and we have the diffeomorphism
	\begin{equation}
		\phi^{-1}\circ f^{-1}\circ \psi\colon V\to U,
	\end{equation}
	so that we can use the result of lemma~\ref{LEMooNCYSooXtnCKq} :
	\begin{equation}
		\int_U\phi^*\omega=\int_{(\phi^{-1}\circ f^{-1}\circ \psi)^{-1}(U)}  (\phi^{-1}\circ f^{-1}\circ \psi)^*\phi^*\omega=\int_{(\psi^{-1}\circ f\circ \phi )U}\psi^*(f^{-1})^*\omega=\int_{\psi^{-1}(N)}\psi^*(f^{-1})^*\omega.
	\end{equation}
	The last integral is the definition of an integral on \( N\) :
	\begin{equation}
		\int_{\psi^{-1}(N)}\psi^*(f^{-1})^*\omega=\int_N(f^{-1})^*\omega.
	\end{equation}
\end{proof}

Here is the lemma that shows the independence of definition~\ref{DEFooPDRCooPiBklC} with respect to the change of chart system.
\begin{lemma}
	Let \( \varphi\colon V\to M\) be a chart such that \( \varphi(V)\cap \varphi(U)=N\) is not empty. We define \( U'=\phi^{-1}(N)\) and \( V'=\varphi^{-1}(N)\). Then
	\begin{equation}        \label{EQooLSZMooPcyMWN}
		\int_{\phi(U')}\omega=\int_{\varphi(V')}\omega.
	\end{equation}
\end{lemma}
This lemma allows us to write \( \int_N\omega\) the common value of both sides of \eqref{EQooLSZMooPcyMWN}.

\begin{proof}
	Taking \( f=\id\) and two charts for the same open set in \( M\) in proposition~\ref{PROPooNJCLooMqeeeX} shows the result.
\end{proof}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{On manifold that require a finite atlas}
%---------------------------------------------------------------------------------------------------------------------------

We restrict ourself to manifolds that accept a finite atlas.

\begin{definition}[\cite{ooBTXRooUEBLMV}]      \label{DEFooITDTooWwrPPr}
	If \( \omega\) is a \( n\)-form on \( M\) and if \( \{ f_{\alpha} \} \) is a partition of unity\footnote{See theorem~\ref{THOooPCHDooITWKpC}.} subordinate to the finite atlas \( \{ U_{\alpha} \}\) then
	\begin{equation}
		\int_M\omega=\sum_{\alpha}\int_{\phi_{\alpha}(U_{\alpha})}f_{\alpha}\omega.
	\end{equation}
\end{definition}

We show that this definition does not depend on the choice of the partition of unity.
\begin{lemma}[\cite{MonCerveau,ooBTXRooUEBLMV}] \label{LEMooCMIZooHhHaHV}
	The definition~\ref{DEFooITDTooWwrPPr} is independent of the choice of atlas and partition of unity.
\end{lemma}

\begin{proof}
	Let \(  \{ U_{\alpha},\phi_{\alpha},f_{\alpha} \}_{\alpha\in A}  \) and \( \{ V_i,\varphi_i,g_i \}_{i\in I}\) be two choices of atlas, charts and subordinate partition of unity. We have to show that
	\begin{equation}        \label{EQooPVQZooHvbioJ}
		\sum_{\alpha\in A}\int_{\phi_{\alpha}(U_{\alpha})}f_{\alpha}\omega=\sum_{i\in I}\int_{\varphi_i(V_i)}g_i\omega.
	\end{equation}
	Since \( \{ g_i \}\) is a partition of unity,
	\begin{equation}
		\spadesuit=\sum_{\alpha}\int_{\phi_{\alpha}(U_{\alpha})}f_{\alpha}\omega=\sum_{\alpha}\int_{\phi_{\alpha}(U_{\alpha})}\sum_ig_if_{\alpha}\omega.
	\end{equation}
	Since the atlas are finite, the sums are finite and can be permuted with the integral. Moreover the function \( g_if_{\alpha}\) is nonzero only on \( \phi_{\alpha}(U_{\alpha})\cap\varphi_i(V_i)\) so that the integral can be taken on \( \phi_{\alpha}(U_{\alpha})\), \( \phi_{\alpha}(U_{\alpha})\cap\varphi_i(V_i)\) or \( \varphi_i(V_i)\). We have
	\begin{subequations}
		\begin{align}
			\spadesuit=\sum_i\sum_{\alpha}\int_{\phi_{\alpha(U_{\alpha})}}g_if_{\alpha}\omega & =  \sum_i\sum_{\alpha}\int_{\phi_{\alpha(U_{\alpha})}\cap \varphi_i(V_i)}g_if_{\alpha}\omega \\
			                                                                                  & =  \sum_i\sum_{\alpha}\int_{\varphi_i(V_i)}g_if_{\alpha}\omega                               \\
			                                                                                  & = \sum_i\int_{\varphi_i(V_i)}g_i\sum_{\alpha}f_{\alpha}\omega                                \\
			                                                                                  & =\sum_i\int_{\varphi_i(V_i)}g_i\omega.
		\end{align}
	\end{subequations}
\end{proof}
The common values of both sides of \eqref{EQooPVQZooHvbioJ} is denoted by \( \int_M\omega\).

The following is not really a definition, but a particular case of~\ref{DEFooPDRCooPiBklC}. The integral of a \( n-1\)-form on a \( (n-1)\)-submanifold is
\begin{equation}        \label{EQooYPOGooRYOXQe}
	\int_S\sigma=\int_A\varphi^*\sigma.
\end{equation}
Once again the last integral is an integral of a \( n-1\)-form on an open set in \( \eR^{n-1}\).

\begin{definition}[\cite{ooMLEZooCKxedX}]       \label{DEFooAXFXooWiMLKP}
	The integral of a \( 1\)-form on a \( n-1\) dimensional submanifold is :
	\begin{equation}
		\int_S\tau=\int_S\hodge\tau
	\end{equation}
	where \( \hodge\) is the Hodge dual defined by~\ref{DEFooUOJQooSzKjNR}.
\end{definition}
The last integral is the integral of a \( (n-1)\)-form on a \( (n-1)\)-submanifold, given by \eqref{EQooYPOGooRYOXQe}.

\begin{definition}      \label{DEFooAXZGooJairMQ}
	The integral of a vector field on a \( (n-1)\)-submanifold is :
	\begin{equation}
		\int_Sv=\int_Sv^{\flat}
	\end{equation}
	where \( v^{\flat}\) is the \( 1\)-form defined by the musical isomorphism \eqref{EQooBTWXooTqoNxa}.
\end{definition}

The following proposition provides a much more explicit formula for the integral of a vector field.

\begin{proposition}     \label{PROPooETLZooAVsrwy}
	Let \( \varphi\colon A\subset \eR^{n-1}\to \eR^n\) be an hypersurface and \( X\) be a vector field in \( \eR^n\). Then
	\begin{subequations}
		\begin{align}
			\int_SX & =\int_A\det\big( X,\frac{ \partial \varphi }{ \partial y_1 },\ldots, \frac{ \partial \varphi }{ \partial y_{n-1} } \big)  \label{SUBEQooWJSPooImJjQN} \\
			        & =\int_A X\cdot\det\begin{pmatrix}
				                            e_1 & \ldots                    & e_n \\
				                                & \partial_{y_1}\varphi     &     \\
				                                & \vdots                    &     \\
				                                & \partial_{y_{n-1}}\varphi &
			                            \end{pmatrix}                                                                        \\
			        & =\int_A X\cdot n
		\end{align}
	\end{subequations}
	where \( \{ y_1,\ldots, y_{n-1} \}\) are the coordinates on \( A\) and \( n\) is the normal vector to the parametrization.
\end{proposition}
Note : thanks to lemma~\ref{LEMooCMIZooHhHaHV}, the value of \( n\) can depend on the choice of coordinates, but the integral will not depend.

\begin{proof}
	If \( X=\sum_{i=1}^nX_i\partial_i\), then \( X^{\flat}=\sum_{i}X_idx_i\) and its Hodge dual is
	\begin{equation}
		\sum_{i}(-1)^i dx_1\wedge\ldots\wedge\widehat{dx_i}\wedge\ldots\wedge dx_n
	\end{equation}
	where the hat denotes a factor that is not present. Using the definitions~\ref{DEFooAXZGooJairMQ},~\ref{DEFooAXFXooWiMLKP} and~\ref{DEFooPDRCooPiBklC} it remains to integrate
	\begin{equation}
		\int_A\sum_i(-1)^iX_i\varphi^*\big( dx_1\wedge\ldots\wedge\widehat{dx_i}\wedge\ldots\wedge dx_n \big).
	\end{equation}
	If \( u_1,\ldots, u_{n-1}\) are vectors on \( A\) (that is on \( T_xA\) where \( x\) is the integration variable) we have
	\begin{subequations}
		\begin{align}
			\varphi^*(dx_1\wedge\ldots\wedge \widehat{dx_i}\wedge\ldots\wedge dx_n)(u_1,\ldots, u_{n-1}) & = (dx_1\wedge\ldots\wedge \widehat{dx_i}\wedge\ldots\wedge dx_n)(d\varphi u_1,\ldots, d\varphi u_{n-1}) \\
			                                                                                             & =\det\big( \tau_id\varphi u_1,\ldots, \tau_id\varphi u_{n-1} \big)
		\end{align}
	\end{subequations}
	where we used the lemma~\ref{LEMooICRXooFKPCRd}.

	What lies in the integral is the \( (n-1)\) differential form
	\begin{subequations}        \label{EQooEVAPooSbRfaj}
		\begin{align}
			(u_1,\ldots, u_{n-1})\mapsto \sum_{i}(-1)^iX_i & \det\big(    \tau_id\varphi u_1,\ldots, \tau_id\varphi u_{n-1}  \big) \\
			                                               & =\det\big( X,d\varphi u_1,\ldots, d\varphi u_{n-1} \big).
		\end{align}
	\end{subequations}
	Since this is a \( (n-1)\) differential form over \( \eR^{n-1}\), this has to be proportional to \( dy_1\wedge\ldots dy_{n-1}\). The proportionality factor is found by applying \eqref{EQooEVAPooSbRfaj} to the basis \( \{ e_1,\ldots, e_n \}\). Since \( d\varphi(e_i)=\frac{ \partial \varphi }{ \partial y_i }\) we have the proportionality factor
	\begin{equation}
		\det\left( X,\frac{ \partial \varphi }{ \partial y_1 },\ldots, \frac{ \partial \varphi }{ \partial y_n } \right)
	\end{equation}
	and the integral to be computed is
	\begin{equation}
		\int_A\det\left( X,\frac{ \partial \varphi }{ \partial y_1 },\ldots, \frac{ \partial \varphi }{ \partial y_n } \right)dy_1\wedge\ldots\wedge dy_{n-1}=\int_A\det\left( X,\frac{ \partial \varphi }{ \partial y_1 },\ldots, \frac{ \partial \varphi }{ \partial y_n } \right).
	\end{equation}
	The formula \eqref{SUBEQooWJSPooImJjQN} is proven. The two others are application of lemma~\ref{LEMooFRWKooVloCSM}.
\end{proof}

\begin{example}
	Let us make the example with \( n=3\). We have
	\begin{equation}
		\varphi^*(dx\wedge dy)(v_1,v_2)=(dx\wedge dy)(d\varphi v_1 , d\varphi v_2)=\det
		\begin{pmatrix}
			d\varphi(v_1)_x & d\varphi(v_2)_x \\
			d\varphi(v_1)_y & d\varphi(v_2)_y
		\end{pmatrix},
	\end{equation}
	and then
	\begin{subequations}
		\begin{align}
			\sum_i(-1)^iX_i \varphi^*(   \Wedge_{k\neq i}dx_k    )(v_1,v_2) & =\sum_i(-1)^iX_i
			\begin{pmatrix}
				d\varphi(v_1)_x & d\varphi(v_2)_x \\
				d\varphi(v_1)_y & d\varphi(v_2)_y
			\end{pmatrix}
			\\ &=
			\det\begin{pmatrix}
				    X_1 & d\varphi (v_1)_x & d\varphi(v_2)_x \\
				    X_2 & d\varphi (v_1)_y & d\varphi(v_2)_y \\
				    X_3 & d\varphi (v_1)_z & d\varphi(v_2)_z
			    \end{pmatrix}
		\end{align}
	\end{subequations}
\end{example}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Integrating by part}
%---------------------------------------------------------------------------------------------------------------------------

\begin{proposition}[\cite{MonCerveau}]
	Let \( \Omega\) be an open set in an manifold \( M\) of dimension \( n\) and \( \varphi\colon A\to \eR^n\) be a parametrisation of the boundary \( \partial\Omega\) with tangent vector field \( n\) (defined on \( \partial\Omega\)). Let \( u,v\in  C^{\infty}(M)\). Then we have
	\begin{equation}        \label{EQooQSMNooKHwbqp}
		\int_{\partial \Omega}uv\,n_j=\int_{\Omega}\frac{ \partial u }{ \partial x_j }v+\int_{\Omega}u\frac{ \partial v }{ \partial x_j }.
	\end{equation}
\end{proposition}

\begin{proof}
	We use the Stokes formula (theorem~\ref{ThoATsPuzF}) on the \( (n-1)\)-form
	\begin{equation}
		\omega=uv\,dx_1\wedge\ldots\wedge\widehat{dx_j}\wedge\ldots\wedge dx_n,
	\end{equation}
	and we know from example~\ref{EXooCIYIooFPMLMU} that \( \omega=(-1)^{j+1}\hodge dx_j\). On the other hand,
	\begin{equation}
		d\omega=\sum_k\frac{ \partial (uv) }{ \partial x_k }dx_j\wedge dx_1\wedge\ldots\wedge\widehat{dx_j}\wedge\ldots\wedge dx_n=\frac{ \partial (uv) }{ \partial x_j }(-1)^{j+1}dx_1\wedge\ldots\wedge dx_n.
	\end{equation}
	We can use the Stokes formula :
	\begin{equation}
		\int_{\partial \Omega} uv dx_1\wedge\ldots\wedge\widehat{dx_j}\wedge\ldots\wedge dx_n=  (-1)^{j+1} \int_{\Omega}\frac{ \partial (uv) }{ \partial x_j }.
	\end{equation}
	The left-hand side can be transformed as
	\begin{equation}
		\int_{\partial\Omega}\hodge(dx_j)=\int_{\partial\Omega}uv\partial_j=\int_{\partial\Omega}uv\,n_j
	\end{equation}
	where we used the definition~\ref{DEFooAXFXooWiMLKP} and the proposition~\ref{PROPooETLZooAVsrwy}.

	The coefficients \( (-1)^{j+1}\) simplify and the derivation of product produce the result.
\end{proof}

\begin{example}     \label{EXooWLUVooNamnKG}
	If we integrate by part the function \( u\frac{ \partial^2 v }{ \partial x_j^2 }\) we have
	\begin{equation}
		\int_{\omega}u\frac{ \partial^2 }{ \partial x_j^2 }=-\int_{\Omega}\frac{ \partial u }{ \partial x_j }\frac{ \partial v }{ \partial x_j }+\int_{\partial \Omega}u\frac{ \partial v }{ \partial x_j }n_j.
	\end{equation}
	Summing over \( j\) we have the interesting formula
	\begin{equation}        \label{EQooJLDTooIMtxEX}
		\int_{\Omega}u\Delta v=-\int_{\Omega}\nabla u\cdot\nabla v+\int_{\partial \Omega}u\frac{ \partial v }{ \partial n }
	\end{equation}
	where \( \Delta v=\sum_j\frac{ \partial^2v }{ \partial x_j^2 }\) and \( \frac{ \partial v }{ \partial n }\) is a notation for \( \nabla v\cdot n\).
\end{example}
