% This is part of Giulietta
% Copyright (c) 2013-2015, 2019-2022, 2024
%   Laurent Claessens
% See the file fdl-1.3.txt for copying conditions.


%--------------------------------------------------------------------------------------------------------------------------- 
\subsection{Exponential and subspace}
%---------------------------------------------------------------------------------------------------------------------------

\begin{lemma}[\cite{BIBooTKQTooGjFxwB}]     \label{LEMooFXKBooRnzZKQ}
	Let \( G\) be an analytic Lie group and \( H\) be a closed subgroup of \( G\). The set
	\begin{equation}
		\lH=\{ X\in \lG\tq  e^{tX}\in H\forall t\in \eR \}
	\end{equation}
	is a vector subspace of \( \lG\).
\end{lemma}

\begin{proof}
	Let \( X,Y\in \lH\), \( \lambda\in \eR\) and \( t\in \eR\). The element \( \lambda X\) belongs to \( \lH\). We have to prove that \( X+Y\in \lH\).

	For every \( n\in \eN\), we have \(  e^{tX/n} e^{tY/n}\in H\) because \( H\) is a subgroup. For every \( n\) we also have
	\begin{equation}
		\big(  e^{tX/n} e^{tY/n} \big)^n\in H.
	\end{equation}
	we have to following computation :
	\begin{subequations}        \label{SUBEQSooMDRVooQXBwiS}
		\begin{align}
			\big(  e^{tX/n} e^{tY/n} \big)^n & =\left[ \exp\left( \frac{ t(X+Y) }{ n }+\frac{ t^2 }{ n^2 }\alpha(t/n) \right)  \right]^n \label{SUBEQooUYNCooJVIWMi} \\
			                                 & =\exp\left( t(X+Y)+\frac{ t^2 }{n  }\alpha(t/n) \right)    \label{SUBEQooUYKKooXtGaxL}
		\end{align}
	\end{subequations}
	Justifications.
	\begin{itemize}
		\item For \eqref{SUBEQooUYNCooJVIWMi}. This is lemma \ref{LEMooMJBRooMOuJpa}\ref{ITEMooWIQIooHphJcP}.
		\item For \eqref{SUBEQooUYKKooXtGaxL}. The \( n\) enters the exponential from lemma \ref{LEMooRPHVooAtZJnz}.
	\end{itemize}
	We have the limit
	\begin{equation}        \label{EQooTJWDooVJsDJt}
		\lim_{n\to \infty} \exp\left( t(X+Y)+\frac{ t^2 }{n  }\alpha(t/n) \right) =  e^{t(X+Y)}
	\end{equation}
	because the exponential is continuous\footnote{See \ref{PROPooYFZZooLUOuOj}.} and the properties of \( \alpha\). Since the limit exists on the right hand side of \eqref{SUBEQSooMDRVooQXBwiS}, the limit exists on the left hand side too.

	The limit
	\begin{equation}
		\lim_{n\to \infty} \big(  e^{tX/n} e^{tY/n} \big)^n
	\end{equation}
	is a limit of elements in \( H\). Since \( H\) is closed, this is an element of \( H\). We deduce that \eqref{EQooTJWDooVJsDJt} is an element of \( H\).
\end{proof}

\begin{lemma}[\cite{BIBooTKQTooGjFxwB}]     \label{LEMooFDIIooCkSJpY}
	Let \( G\) be an analytic Lie group and \( H\) be a closed subgroup of \( G\). We consider the set
	\begin{equation}
		\lH=\{ X\in \lG\tq  e^{tX}\in H\forall t\in \eR \}.
	\end{equation}

	Let \( (X_i)\) be a sequence in \( \lG\) such that\footnote{The topology and the norm on \( \lH\) are given in definition \ref{PROPooHJOXooMGANfd}.}
	\begin{enumerate}
		\item       \label{ITEMooWQZAooTTnenM}
		      \( X_i\to 0\)
		\item
		      \(  e^{X_i}\in H\) for every \( i\).
		\item       \label{ITEMooFLLRooCUXnHb}
		      The limit \( \lim_{i\to \infty} \frac{ X_i }{ \| X_i \| }\) exists. We name it \( X\).
	\end{enumerate}
	Then \( X\in \lH\).
\end{lemma}

\begin{proof}
	We consider \( n_i=\integer(t/\| X_i \|)\) where \( \integer\) is the «integer part» defined in \ref{LEMooLEXTooGAQxGB}, and we write
	\begin{equation}
		n_iX_i=\integer\big( \frac{ t }{ \| X_i \| } \big)X_i=\| X_i \|\integer\big( \frac{ t }{ \| X_i \| } \big)\frac{ X_i }{ \| X_i \| }.
	\end{equation}
	Using the hypothesis \ref{ITEMooWQZAooTTnenM} and \ref{ITEMooFLLRooCUXnHb} and the limit of lemme \ref{LEMooLSJZooDauTkc} we have
	\begin{equation}
		\lim_{i\to \infty} n_iX_i=\lim_{i\to \infty} \| X_i \|\integer\big( \frac{ t }{ \| X_i \| } \big)\frac{ X_i }{ \| X_i \| }=tX.
	\end{equation}

	Using the continuity of the exponential (it commutes with the limit), we have
	\begin{subequations}
		\begin{align}
			e^{tX} & =\exp\big( \lim_{i\to \infty} n_iX_i \big) \\
			       & =\lim_{i\to \infty}  e^{n_iX_i}            \\
			       & =\lim_{i\to \infty} \exp(X_i)^{n_i}.
		\end{align}
	\end{subequations}
	Since \( X_i\in \lH\), we have \( \exp(X_i)\in H\), and \( \exp(X_i)^{n_i}\in H\) because \( H\) is a group.

	Thus the sequence \( \exp(X_i)^{n_i}\) is a sequence contained in the closed space \( H\) and which has a limit (\( \exp(tX)\)). Thus the limit is contained in \( H\) by proposition \ref{PROPooBBNSooCjrtRb}. We conclude that \(  e^{tX}\in H\).
\end{proof}

\begin{lemma}[\cite{BIBooJOSEooGOmqoQ}]     \label{LEMooNPLBooBrwNWY}
	Let \( G\) be a Lie group, \( \lG\) its Lie algebra and \( H\), a closed subgroup of \( G\). We consider
	\begin{equation}
		\lH=\{ X\in \lG\tq \exp(tX)\in H\forall t\in \eR \}.
	\end{equation}
	There exists a neighbourhood \( \mO\) of \( 0\) in \( \lH\) and \( V\) of \( e\) in \( H\) such that
	\begin{equation}
		\exp\colon U\to V
	\end{equation}
	is  a bijection.
\end{lemma}

\begin{proof}
	Several steps.
	\begin{subproof}
		\spitem[The map \( \phi\)]
		Let \( \lH'\) be a subspace of \( \lG\) such that \( \lG=\lH\oplus\lH'\) and consider the map
		\begin{equation}
			\begin{aligned}
				\phi\colon \lH\oplus\lH' & \to G                   \\
				X+Y                      & \mapsto \exp(X)\exp(Y).
			\end{aligned}
		\end{equation}
		\spitem[\( \phi\colon \lG\to G \) is a local bijection]
		% -------------------------------------------------------------------------------------------- 
		Let \( X\in \lH\) and \( Y\in \lH'\). Using the Leibniz rule \ref{PROPooAXYRooWVhXRa} we have
		\begin{equation}
			d\phi_0(X+Y)=\Dsdd{ \phi(tX,tY) }{t}{0}=\Dsdd{ \exp(tX)\exp(tY) }{t}{0}=X+Y.
		\end{equation}
		In other words, \( d\phi_0=\id\). Since the exponential is continuous\footnote{Proposition \ref{PROPooMAGKooInwNom}.}, the local inversion theorem \ref{THOooDWEXooMClWVi} says that \( \phi\) is a local bijection.

		Let \( \mO\) be a neighbourhood of \( 0\) in \( \mG\) and \( v\) a neighbourhood of \( e\) in \( G\) such that \( \phi\colon \mO\to V\) is a bijection.

		\spitem[\( \phi\) is a local bijection between \( \lH\) and \( H\)]
		% -------------------------------------------------------------------------------------------- 

		We recall that the definition \ref{PROPooMAGKooInwNom} says that the topology on \( \lG\) is any norm topology. Suppose that \( \phi\) is not a local bijection between \( \lH\) and \( H\). That means that if \( U\) is a neighbourhood of \( 0\) in \( \lH\) and \( V\) is a neighbourhood of \( e\) in \( H\), then \( \phi\) is not a bijection between \( U\) and \( V\).

		Let \( \mO_i=B(0,r_i)\) in \( \lG\) with \( r_i\to 0\) be as small as \( \mO_i\subset \mO\) for every \( i\). Let \( V_i=\phi(\mO_i)\). The part \( B(0,r_i)\cap \lH\) is a neighbourhood of \( 0\) in \( \lH\) and \( V_i\cap H\) is a neighbourhood of \( e\) in \( H\). This \( \phi\) is not a bijection between \( B(0,r_i)\cap\lH\) and \( V_i\cap H\).

		Since \( \phi(\lH)\subset H\), we have \( \phi\big( B(0,r_i)\cap \lH \big)\subset V_i\cap \lH\). Since the map \( \phi\) is injective and not bijective, it has to be not surjective. Thus there exists \( h_i\in (V_i\cap H)\setminus\phi\big( B(0,r_i)\cap \lH \big)\). Now every element of \( V_i\) is the image of an element of \( B(0,r_i)\), thus there exits \( Z_i\in B(0,r_i)\) such that \( \phi(Z_i)=h_i\).

		The element \( Z_i\) can be decomposed into \( Z_i=X_i+Y_i\) with \( X_i\in \lH\) and \( Y_i\in \lH'\). Since \( h_i\) is not in the image of \( B(0,r_i)\cap\lH\) we deduce that \( Y_i\neq 0\). Let us summarize:
		\begin{itemize}
			\item \( X_i+Y_i\stackrel{\lG}{\longrightarrow}0\)
			\item
			      \( \phi(X_i+Y_i)\in H\)
			\item
			      \( Y_i\neq 0\)
			\item
			      \( \exp(X_i)\in H\).
		\end{itemize}
		We have
		\begin{equation}
			\underbrace{\phi(X_i+Y_i)}_{\in \lH}=\underbrace{\exp(X_i)}_{\in \lH}\exp(Y_i),
		\end{equation}
		and then \( \exp(Y_i)\in\lH\).

		Now we consider the limit
		Lemme \ref{LEMooFDIIooCkSJpY} says that the limit \( Y=\lim_{i\to \infty} Y_i/\| Y_i \|\) exists and belongs to \( \lH\). But \( \lH'\) is closed (because finite dimensional vector subspace), so that a limit in \( \lH'\) remains in \( \lH'\). We deduce that
		\begin{equation}
			Y\in\lH\cap\lH'=\{ 0 \}.
		\end{equation}
		This is impossible because \( \| Y \|=1\).

		Then \( \phi\) is a local bijection between \( \lH\) and \( H\): there exists a neighbourhood \( \mO\) of \( 0\) in \( \lH\) and a neighbourhood \( V\) of \( e\) in \( H\) such that \( \phi\colon \mO\to V\) is a bijection.

		\spitem[Conclusion]
		% -------------------------------------------------------------------------------------------- 

		The map \( \exp\colon \mO\to V\) is bijective because, on \( \lH\) we have \( \exp=\phi\).

	\end{subproof}
\end{proof}

\begin{lemma}[\cite{BIBooJOSEooGOmqoQ}]       \label{LEMooOBIMooVvIDnb}
	Let $G$ be a Lie group and $H$, a Lie subgroup of $G$ ($\lG$ and $\lH$ are the corresponding Lie algebras). If $H$ is a topological subspace of $G$, then there exists an open neighbourhood $U$ of $0$ in $\mG$ such that
	\begin{enumerate}
		\item $\exp$ is a diffeomorphism between $U$ and an open neighbourhood of $e$ in~$G$,
		\item
		      \( \exp\colon U\cap\lH\to \exp(U)\cap H\) is a smooth diffeomorphism.
	\end{enumerate}
	%TODOooBXXQooWlbCEI. Prouver ça.
\end{lemma}

\begin{lemma}  \label{LEMooEBQUooKXkCda}
	Let $\lG$ admit a direct sum decomposition (as vector space) $\lG=\lM\oplus\lN$. Then there exists open and bounded neighbourhoods $\mU_m$ and $\mU_n$ of $0$ in $\lM$ and $\lN$ such that the map
	\begin{equation}
		\begin{aligned}
			\phi \colon \mU_m\times\mU_n & \to G          \\
			(A,B)                        & \mapsto e^Ae^B
		\end{aligned}
	\end{equation}
	is a diffeomorphism between $\mU_m\times\mU_n$ and an open neighbourhood of $e$ in $G$.
\end{lemma}


\begin{corollary}
	Let $G$ be a Lie group, and $K$, $H$ two differentiable subgroups of $G$. We suppose $K\subset H$. Then $K$ is a differentiable subgroup of the Lie group $H$.
\end{corollary}

\begin{proof}
	The Lie algebras of $K$ and $H$ are respectively denoted by $\lK$ and $\lH$. We denote by $K^*$ the differentiable subgroup of $H$ which has $\lK$ as Lie algebra. The differentiable subgroups $K$ and $K^*$ have same Lie algebra, and then coincide as Lie groups.
\end{proof}


\begin{theorem}[Cartan\cite{BIBooGZHEooBPsXQy,BIBooFLEXooPgvAlz}]     \label{THOooDEJHooVKJYBL}
	Let \( G\) be a smooth Lie group. If \( H\) is a closed subgroup of \( G\).

	\begin{enumerate}
		\item
		      There exists a unique structure of smooth manifold on \( H\) such that the inclusion map \( \iota\colon H\to G\) is a smooth embedding\footnote{Definition \ref{DEFooQLGLooNyXaOV}.}.
		\item
		      With that structure, \( H\) is a smooth Lie subgroup of \( G\).
	\end{enumerate}
\end{theorem}

\begin{proof}
	By proposition \ref{PROPooYFZZooLUOuOj}  \ldots
	%TODOooYVFYooQwfUiy: finir cette preuve
\end{proof}

%--------------------------------------------------------------------------------------------------------------------------- 
\subsection{Campbell-Baker-Hausdorff formula}
%---------------------------------------------------------------------------------------------------------------------------

\begin{theorem}     \label{THOooYJPEooSpKHnC}
	Let \( G\) be a Lie group with Lie algebra \( \lG\). For every \( X,Y\in \lG\), there exists \( Z\in \lG\) such that
	\begin{equation}
		e^{X} e^{Y}= e^{Z}.
	\end{equation}
\end{theorem}
%TODOooVIFLooKbKMRv: we need an explicit formula, or at least prove analyticity, because it is used at ooPFNFooFvYtHr

%--------------------------------------------------------------------------------------------------------------------------- 
\subsection{Smooth and analytic Lie group}
%---------------------------------------------------------------------------------------------------------------------------

We recall that a manifold is a set with its charts. Usually we write ``Let \( M\) be a manifold'' where we should write ``Let \( (M,\{ \varphi_{\alpha} \}_{\alpha\in I})\) be a manifold''. Changing the set of charts can completely change the properties of a manifold. That subtlety is crucial in the following theorem which basically says ``every smooth Lie group is analytic''.
\begin{theorem}[\cite{BIBooSYWXooYSgEgW}]       \label{THOooSQVCooCyEPOS}
	Let \( (G,\{ \varphi_{\alpha} \}_{\alpha\in A})\) be a smooth Lie group\footnote{Definition \ref{DEFooGDWTooTvINuw}.}.
	\begin{enumerate}
		\item
		      There exists an atlas \( \{ \phi_i \}_{i\in I}\) of \( G\) for which the transition functions are analytic.
		\item
		      The multiplication and the inverse of \( G\) are analytic on the manifold \( \big( G,\{ \phi_i \}_{i\in I} \big)\).
	\end{enumerate}
\end{theorem}

\begin{probleme}
	We have to complete the proof; in particular we have to state and prove all the quoted results.
\end{probleme}


\begin{proof}
	We initiate by considerate a vector space isomorphism \( \sigma\colon \eR^n\to \lG\) where \( \lG\) is the Lie algebra of \( G\). Let \( U'\) be a neighbourhood of \( 0\) in \( \lG\) from which the exponential is a smooth diffeomorphism. We write \( U=\sigma^{-1}(U')\). For \( g\in G\) we consider the chart
	\begin{equation}
		\begin{aligned}
			\phi_g\colon U & \to G                               \\
			v              & \mapsto g\exp\big( \sigma(v) \big).
		\end{aligned}
	\end{equation}
	Here are some facts\quext{that need some justifications.}.
	%TODOooBZLSooJeHmXD: provide some justifications to these facts.
	\begin{enumerate}
		\item
		      These maps \( \phi_g\) are smooth and then are charts of \( (G,\{ \varphi_{\alpha} \})\).
		\item
		      The set \( \{ \phi_g \}_{g\in G}\) is an atlas of \( (G,\{ \varphi_{\alpha} \})\).
		\item
		      The transitions functions \( \phi_h^{-1}\circ\phi_g\) are analytic\footnote{As functions from an open set of \( \eR^n\) to an open set of \( \eR^n\).} where they are defined.
		\item
		      The multiplication and the inverse are analytic for the manifold \( (G,\{ \phi_g \}_{g\in G})\).
	\end{enumerate}
	Here is an hint for the last point. Let \( g,h\) be in a neighbourhood of \( e\) such that \( g,h\in \phi_e(U)\). Let \( g=\exp(X_0)\) and \( h=\exp(X)\). We look at the map
	\begin{equation}
		\begin{aligned}
			\mu\colon \lG & \to G             \\
			X             & \mapsto g\exp(X).
		\end{aligned}
	\end{equation}
	The element \( \phi_e\big( \mu(X) \big)\) satisfy
	\begin{equation}
		\exp(X_0)\exp(X)=\exp\Big( \phi_e^{-1}\big( \mu(X) \big) \Big).
	\end{equation}
	In other terms, \( \phi_e^{-1}(X)\) is given by the Campbell-Baker-Hausdorff formula, which is analytic\quext{This affirmation should require some more work.}, theorem \ref{THOooYJPEooSpKHnC}.
	% Analyticity of CBH used here ooPFNFooFvYtHr
\end{proof}

\begin{normaltext}      \label{NORMooKCBMooGWQZJY}
	From now on, we will always consider analytic Lie groups. The interesting point is that, if we show that some charts are smooth, theorem \ref{THOooSQVCooCyEPOS} allows us to say that the group is analytic by choosing the correct atlas.
\end{normaltext}


%--------------------------------------------------------------------------------------------------------------------------- 
\subsection{Topological Lie subgroup}
%---------------------------------------------------------------------------------------------------------------------------

\begin{remark}
	A \textit{topological} Lie subgroup\index{topological!Lie subgroup} is stronger that a common Lie subgroup because it needs to be a topological subgroup: it must carry \emph{exactly} the induced topology. In our definition of a Lie group, this feature doesn't appears.
\end{remark}

\begin{theorem} \label{THOooXVXBooZDJzQo}
	Let $G$ be a Lie group whose Lie algebra is $\lG$ and $H$, a closed subgroup (not specially a \emph{Lie} subgroup) of $G$. Then there exists one and only one analytic structure on $H$ for which $H$ is a topological Lie subgroup of $G$.
\end{theorem}


\begin{proof}
	The unicity part comes from the corollary~\ref{CORooMCWWooXkpkNO}.

	We will work with
	\begin{equation}\label{eq:lH_de_G}
		\lH=\{X\in\lG\tq \forall t\in\eR,\, e^{tX}\in H\}.
		%TODOooVKBWooYUnOkA:  finir la preuve.
	\end{equation}
\end{proof}

%--------------------------------------------------------------------------------------------------------------------------- 
\subsection{Action from Lie algebra to Lie group}
%---------------------------------------------------------------------------------------------------------------------------

A very important point\cite{ooOLNIooDLmxkR} is that when \( G\) is acting on $M$, one can reconstruct the action of \( G\) only knowing the action of \( \lG\). Let \( X\in \lG\) and \( x\in M\). We consider the path
\begin{equation}
	\begin{aligned}
		\gamma\colon \eR & \to M                \\
		t                & \mapsto \exp(tX)(x).
	\end{aligned}
\end{equation}
This map satisfies \( \gamma(0)=x\). We also have, using proposition~\ref{PROPooWEYCooCvyHNr},
\begin{equation}
	\gamma(t_0+u)=\big( \exp(uX)\circ\exp(t_0X)\big)(x)=\exp(uX)\gamma(t_0).
\end{equation}
In that, we used the fact that \( G\) acts on \( M\), so that we have transformed the product inside the group \( \exp\big( (u+t_0)X \big)= \exp(uX)\exp(t_0x) \) into a composition of map.  Then
\begin{equation}
	\Dsdd{ \gamma(t_0+u) }{u}{0}=X\big( \gamma(t_0) \big)
\end{equation}
We conclude that \( \gamma\) satisfies the differential equation
\begin{equation}        \label{EQooFGSIooUplbmN}
	\gamma'(t)=-X\big( \gamma(t) \big).
\end{equation}
When \( M=\eR^n\), the Cauchy-Lipschitz theorem~\ref{ThokUUlgU} provides unicity of the solution on a maximal domain providing the map \( X\colon \eR^n\to \eR^n\) has nice properties.

\begin{normaltext}      \label{NORMooMGAUooIoLtjW}
	If we have to determine the transformations of \( \eR^n\) that satisfies some properties, the strategy is then the following:
	\begin{itemize}
		\item Suppose the searched group to be a connected Lie group.
		\item Write the condition with the groupe element \( \exp(tX)\) and differentiate with respect to \( t\). This point is what physicist call ``consider an infinitesimal transformation and neglect the higher order terms''.
		\item This provides an equation for \( X\). Typically a differential equation for the map \( X\colon \eR^n\to \eR^n\). Solve it.
		\item The group action is then retrieved solving the differential equation \eqref{EQooFGSIooUplbmN}.
	\end{itemize}
	Using that technique we will determine the isometries of \( \eR^n\) in proposition~\ref{PROPooDVIWooAFDNPy} and determine the conformal group around definition~\ref{DEFooVKNBooFBWQQM}.  % position 10906-29466: provides a more precise reference to the result instead of the definition.
\end{normaltext}

\begin{remark}
	When the Lie algebra is made of linear transformations, the last differential equation to solve is actually exponentiating a matrix.
\end{remark}

%---------------------------------------------------------------------------------------------------------------------------
\subsection{Example: determining the smooth isometries of the flat vector space}
%---------------------------------------------------------------------------------------------------------------------------

We know from theorem~\ref{ThoDsFErq} that the isometries of \( \eR^n\) are affine functions. We give now an alternative proof of that result.

\begin{proposition}     \label{PROPooDVIWooAFDNPy}
	The smooth\footnote{In fact we only need \( C^2\).} isometries of \( (\eR^n,\| . \|)  \)  are affine maps.
\end{proposition}

\begin{proof}
	The condition for a diffeomorphism \( \phi\colon \eR^n\to \eR^n\) to be an isometry is
	\begin{equation}        \label{EQooRKYWooFIKfYZ}
		\| \phi(x)- \phi(y) \|^2=\| x-y \|^2.
	\end{equation}
	We write \( \phi_t(x)= e^{-tX}x\) and take the derivative of \eqref{EQooRKYWooFIKfYZ} with respect to \( t\) at \( t=0\) taking into account that \( \phi_0(x)=x\):
	\begin{equation}        \label{EQooXEKMooGOktOj}
		\big( X(y)-X(x) \big)\cdot (x-y)=0.
	\end{equation}
	We used the fact that \( \Dsdd{ \phi_t(x) }{t}{0}=-X(x)\).

	We write the condition \eqref{EQooXEKMooGOktOj} with \( tx\) and take the derivative with respect to \( t\): \( dX_0(x)\cdot y+X(y)\cdot x=0\). The same with \( y\) gives
	\begin{equation}
		dX_0(x)\cdot y+dX_0(y)\cdot x=0.
	\end{equation}
	Taking \( x=e_i\) and \( y=e_j\) this equation reads
	\begin{equation}
		\frac{ \partial X_j }{ \partial x_i }+\frac{ \partial X_i }{ \partial x_j }=0.
	\end{equation}
	With \( i=j\) we get \( \frac{ \partial X_i }{ \partial x_i }=0\). The we compute
	\begin{equation}
		\frac{ \partial  }{ \partial x_j }\frac{ \partial X_i }{ \partial x_j }=-\frac{ \partial  }{ \partial x_j }\left( \frac{ \partial X_j }{ \partial x_i } \right)=-\frac{ \partial  }{ \partial x_i }\frac{ \partial X_j }{ \partial x_j }=0.
	\end{equation}
	We used the fact that \( X_j\) is of class \( C^2\) in order to permute the derivatives (lemma~\ref{LemPermDerrxyz}). We proved that
	\begin{equation}
		\frac{ \partial^2 X_i  }{ \partial x_j }=0
	\end{equation}
	for all \( i,j\). Thus \( X\) is linear.
\end{proof}

%--------------------------------------------------------------------------------------------------------------------------- 
\subsection{Other stuff}
%---------------------------------------------------------------------------------------------------------------------------



\begin{lemma}
	Let $\lG$ be a Lie algebra and $A$, a linear operator on $\lG$ (see as a common vector space) such that $\forall t\in\eR$, the map $e^{tA}$ is an automorphism of $\lG$. Then $A$ is a derivation of $\lG$.
	\label{lem:autom_derr}
\end{lemma}

\begin{proof}
	Let us consider $X$, $Y\in\lG$;  the assumption is
	\[
		e^{tA}[X,Y]=[e^{tA}X,e^{tA}Y].
	\]
	Since $e^{tA}$ is a linear map, it has a ``good behavior''\ with the derivations:
	\[
		\Dsddc{e^{tA}[X,Y]}{t}{0}=\Dsddc{e^{tA}}{t}{0}[X,Y]=A[X,Y].
	\]
	Using on the other hand the linearity of $\ad$, we can see
	\[
		(\ad(e^{tA}X))(e^{tA}Y)
	\]
	as a product ``matrix times vector''. Then
	\begin{equation}
		\begin{split}
			\Dsddc{[e^{tA}X,e^{tA}Y]}{t}{0}&=\Dsddc{(\ad e^{tA}X)Y}{t}{0}+\Dsddc{(\ad X)(e^{tA}Y)}{t}{0}\\
			&=(\ad AX)Y+(\ad X)(AY).
		\end{split}
	\end{equation}
	Finally, $A[X,Y]=[AX,Y]+[X,AY]$.

\end{proof}

As notational convention, if $G$ and $H$ are Lie groups, their Lie algebra are denoted by $\lG$ and $\lH$.

\begin{lemma}		\label{LemAlgEtGroupesGenere}
	Let $\lG$ be a Lie algebra ans $\lS$ be a subset of $\lG$. The algebra of the group generated by $ e^{\lS}$ is the algebra generated by $\lS$.
\end{lemma}

Invariant vector fields are also often used in order to transport a structure from the identity of a Lie group to the whole group by $A_g(X_g)=A_e(dL_{g^{-1}}X_g)$ where $A_e$ is some structure and $X_g$, a vector at $g$.


\begin{corollary}\label{Ad_e}
	An useful formula:
	\[
		\Ad(e^X)=e^{\ad X}.
	\]
\end{corollary}

\begin{corollary}
	Another useful corollary of lemma~\ref{lemsur5d} is the particular case $\phi=\AD(e^X)$:
	\[
		e^Xe^Ye^{-X}=e^{Ad(e^Y)X}.
	\]
	\label{cor:eXeYe-X}
\end{corollary}

\begin{proposition}
	Let $G$ be a connected Lie group.
	\begin{enumerate}

		\item
		      All the left invariant vector fields are complete. That means that the map $X\mapsto  e^{X}$ is defined for every $X\in \mG$.
		\item
		      The map $\exp\colon \mG\to G$ is a local diffeomorphism in a neighbourhood of $0$ in $\mG$.
	\end{enumerate}
\end{proposition}

\begin{proof}
	\begin{enumerate}

		\item
		      The flow is a one parameter subgroup. Thus if $ e^{tX}$ is defined for $t\in[0,a]$, by composition, $ e^{2a}$ is defined. So $ e^{tX}$ is defined for every value of $t$ in $\eR$.
		\item
		      Let us consider the manifold $G\times \mG$ and the vector field $\Xi$ defined by
		      \begin{equation}
			      \Xi_{(g,X)}=\tilde X_g\oplus 0\in T_g(G)\oplus T_X\mG\simeq T_{(g,X)}(G\times \mG).
		      \end{equation}
		      The flow of that vector field is given by
		      \begin{equation}
			      \Phi_t(g,X)=\big( g\exp(tX),X \big).
		      \end{equation}
		      In particular, $\Xi$ is a complete vector field, and we consider the global diffeomorphism
		      \begin{equation}
			      \begin{aligned}
				      \Phi_1\colon G\times \mG & \to G\times \mG                 \\
				      (g,X)                    & \mapsto \big( g\exp(X),X \big).
			      \end{aligned}
		      \end{equation}
		      On the point $(e,X)$ we have $\Phi_1(e,X)=(\exp(X),X)$. Thus the exponential is the projection on the first component of $\Phi_1(e,X)$ and we can write
		      \begin{equation}
			      \exp(X)=\pr_1\circ\Phi_1(e,X).
		      \end{equation}
		      It is a smooth function since both the projection and $\Phi_1$ are smooth.

		      Now, the differential $(d\exp)_0$ is the identity on $\mG$, so that the theorem of inverse function\footnote{Theorem \ref{ThoXWpzqCn}.} makes $\exp$ a local diffeomorphism.
	\end{enumerate}
\end{proof}


\begin{lemma}
	In a Lie group, $e$ is an isolated fixed point for the inversion.
\end{lemma}

\begin{proof}
	One can use an exponential map in a neighbourhood of $e$. In this neighbourhood, an element $g$ can be written as $g=e^X$ for a certain $X\in\lG$. The equality $g=g^{-1}$ gives (because the exponential is a diffeomorphism) $X=-X$, so that $X=0$ and $g=e$.
\end{proof}

%--------------------------------------------------------------------------------------------------------------------------- 
\subsection{Lie algebra of a Lie subgroup}
%---------------------------------------------------------------------------------------------------------------------------

\begin{probleme}
	The proposition \ref{PROPooCRKMooIIbKUM} is the same as \ref{PROPooLUEJooAAyHVh}, but with more assumptions. Why ?
\end{probleme}

% note pour moi-même: j'ai déjà téléchargé BIBooDUPSooZjcTHL et tout mis en un seul fichier 18F.pdf
% théorème 1.3 page 90 dans lecture 18.
\begin{proposition}[\cite{BIBooDUPSooZjcTHL}]       \label{PROPooLUEJooAAyHVh}
	Let \( G\) be a Lie group and \( H\) be a Lie subgroup of \( G\). If \( \lG\) is the Lie algebra of \( G\) and \( \lH\) the one of \( H\), then we have
	\begin{equation}
		\lH=\{ X\in \lG\tq \exp(tX)\in H\,\forall t\in \eR \}.
	\end{equation}
\end{proposition}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
\section{Lifting a Lie subalgebra}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

\begin{theorem}[Chevalley\cite{BIBooFLEXooPgvAlz}]       \label{THOooXALIooGiPVdD}
	We consider a class \( \mA\) (smooth, analytic) of functions. Let \( G\) be a \( \mA\)-Lie group and \( \lH\) be a Lie subalgebra of \( \lG\). There exists an unique connected \( \mA\)-Lie subgroup \( H\) whose Lie algebra is \( \lH\).
\end{theorem}

\begin{proof}
	Let \( X_1,\ldots, X_k\) be a basis of \( \lH\) in \( \lG\). We consider the corresponding left invariant vector fields \( X_i^L(g)=(dL_g)_e(X_i)\).
	\begin{subproof}
		\spitem[A distribution]
		By lemma \ref{LEMooWTNRooCjlYMJ}, the vectors \( X_i^L(g)\) are linearly independents in \( T_gG\). Thus by setting
		\begin{equation}
			\mD_g=\Span\{ X_i^L(g) \}
		\end{equation}
		we define a \( k\) dimensional distribution\footnote{Definition \ref{DEFooYOMHooZJvsSt}.} on \( G\).
		\spitem[Involutive]
		Since \( (dL_g)_e\) is linear we have
		\begin{equation}
			[X_i^L,X_j^L]=[X_i,X_j]^L,
		\end{equation}
		and since \( \lH\) is a Lie algebra, we have \( [X_i,X_j]\in \lH\), so that \( [X_i,X_j]^L\in\mD\).
		\spitem[Frobenius]
		The Frobenius theorem \ref{THOooVRDYooIusxwW} says that \( \mD\) is integrable : there exists an unique maximal integral connected manifold \( H\) trough \( e\). There exists in particular an immersion \( i\colon H\to G\).
		\spitem[\( H\) is a group]
		Note that, if \( g\in G\), then \( L_g(H)\) is still an integral manifold of \( \mD\). Let \( h_1,h_2\in H\). We have
		\begin{equation}
			h_1=L_{h_1}(e)\in H\cap L_{h_1}(H)
		\end{equation}
		because \( h_1\in H\) and \( L_{h_1}(e)\in L_{h_1}(H)\). We have:
		\begin{itemize}
			\item
			      The integral manifold \( H\) is maximal,
			\item
			      \( L_{h_1}(\mD)\) is still an integral manifold
			\item
			      The intersection \( L_{h_1}(\mD)\cap H\) is not empty.
		\end{itemize}
		From these properties we deduce \( L_{h_1}(H)\subset H\). Since \( h_2\in H\), we have in particular \( L_{h_1}(h_2)\in H\), so that \( h_1h_2\in H\).

		For the inverse, let \( h\in H\). We have \( L_{h^{-1}}(h)=e\in H\). So \( L_{h^{-1}}(H)\) is an integral manifold with an intersection with \( H\). Thus \( L_{h^{-1}}(H)\subset H\). In particular \( h^{-1}=L_{h^{-1}}(e)\in H\).

		We conclude that \( H\) is a subgroup of \( G\).
		\spitem[\( G\) is a Lie group]
		The manifold structure on \( H\) is the one of submanifold of \( G\). The fact that the multiplication and the inverse are in the class \( \mA\) as maps on the manifold \( G\) implies that they are in the same class \( \mA\) for the manifold \( H\).

		Thus \( H\) is a \( \mA\)-Lie group.
		\spitem[The inclusion is injective]
		This is always true for an inclusion map.
		\spitem[\( H\) is a Lie group]
		The manifold structure on \( H\) is given by the charts \( \psi_i\) of proposition \ref{PROPooRZIHooXIhnpq} which are composition of charts of \( G\) with the inclusion. The product and the inverse of \( H\) are the restrictions of the product and the inverse on \( G\); just check that their composition with the charts \( \psi_i\) are smooth.
		\spitem[The inclusion is an immersion]
		The inclusion of a submanifold is an immersion from proposition \ref{PROPooEWUCooTStAvb}.
		\spitem[\( H\) is a Lie subgroup of \( G\)]
		The conditions of the definition \ref{DEFooGCHDooHUMSju} are satisfied.
	\end{subproof}
	The existence part is proven. Now we prove the unicity.

	Let \( K\) be a Lie subgroup of \( G\) whose algebra is \( \lH\).
	\begin{subproof}
		\spitem[\( T_kK=\mD_k\)]
		The map \( (dL_g)_e\colon T_eG\to T_gG\) is an isomorphism of vector spaces. Thus we have
		\begin{equation}
			T_kK=(dL_k)_e(\lH)=\Span\{ (dL_k)_e(X_i) \}=\Span\{ X_i^L(k) \}=\mD_k.
		\end{equation}
		\spitem[Maximality]
		Thus \( K\) is an integral manifold of \( \mD\) trough \( e\). Thanks to the maximality of \( H\), we have \( K\subset H\). Since \( T_eK=T_eH\), the inclusion \( \iota\colon K\to H\) is a local isomorphism. There exists a neighbourhood \( V\) of \( e\) in \( G\) such that \( K\cap V=H\cap V\).

		Since a connected Lie group is generated by any neighbourhood of \( e\), we have \( K=H\).
	\end{subproof}
\end{proof}


%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
\section{Covering}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

\begin{lemma}[\cite{BIBooFLEXooPgvAlz}]     \label{LEMooSYVQooTjkgBL}
	Let \( G\) and \( H\) be connected Lie groups. We consider map \( \Phi\colon G\to H\) such that
	\begin{enumerate}
		\item
		      \( \Phi\) is a smooth Lie group diffeomorphism\footnote{See definition \ref{DefAQIQooYqZdya}. Everywhere ``smooth'' means \(  C^{\infty}\).}.
		\item
		      The map \( d\Phi_e\colon \lG\to \lH\) is bijective.
	\end{enumerate}
	Then \( \Phi\) is a covering\footnote{Definition \ref{DEFooQBDWooVVrkkh}.}.
\end{lemma}

\begin{proof}
	Several points.
	\begin{subproof}
		\spitem[\( \Phi\) is surjective]
		Let \( h\in H\). From proposition \ref{PROPooYFZZooLUOuOj}, there exists a neighbourhood \( V\) of \( e\) in \( H\) on which the exponential is surjective. From proposition \ref{PropUssGpGenere}, there exist \( h_1,\ldots, h_n\) in \( V\) such that \( h=\prod_{i=1}^nh_i\).

		Since \( \exp\colon \lH\to V\) is surjective, there exist \( Y_i\in \lH\) such that \( h_i=\exp(Y_i)\). We know that \( d\Phi\colon \lG\to \lH\) is surjective, so there exist \( X_i\in\lG\) such that \( Y_i=d\Phi_e(X_i)\). Thus we have
		\begin{equation}
			h_i=\exp\big( d\Phi(X_i) \big)=\Phi\big( \exp(X_i) \big)
		\end{equation}
		from lemma \ref{lemsur5d}.

		As far as a product is concerned,
		\begin{subequations}
			\begin{align}
				h_ih_j & =\Phi\big( \exp(X_i) \big)\Phi\big( \exp(X_j) \big)                \\
				       & =\Phi\big( \exp(X_i)\exp(X_j) \big)    \label{SUBEQooRTXGooZNrvUY} \\
				       & =\Phi\big( \exp(Z) \big).      \label{SUBEQooFHKGooGHUITs}
			\end{align}
		\end{subequations}
		Justifications.
		\begin{itemize}
			\item For \eqref{SUBEQooRTXGooZNrvUY}. The map \( \Phi\) is a group morphism.
			\item For \eqref{SUBEQooFHKGooGHUITs}. The element \( Z\) is given by the Campbell-Baker-Hausdorff formula, theorem \ref{THOooYJPEooSpKHnC}.
		\end{itemize}
		\spitem[Continuous]
		The map \( \Phi\) is continuous as part of the definition of smooth diffeomorphism.
		\spitem[The third condition]
		Since the differential \( d\Phi_e\colon \lG\to \lH\) is bijective, the inversion theorem \ref{THOooDWEXooMClWVi} says that there exist open neighbourhood \( U_0\) of \( e\) and \( V_0\) of \( \Phi(e)\) such that  the restriction \( \Phi\colon U_0\to V_0\) is bijective.

		Since \( U_0\) and \( U_0^{-1}\) are open sets, the intersection is still open and still contain \( e\). We consider \( U=U_0\cap U_0^{-1}\), and \( V=\Phi(U)\). Now the restriction \( \Phi\colon U\to V\) is still a bijection.

		Let \( \Gamma=\Phi^{-1}(e)\). Since \( \Phi\) is not injective, this \( \Gamma\) can be a set.
		\begin{subproof}
			\spitem[\( \Gamma\) is a subgroup]
			Let \( g_1,g_2\in \Gamma\). Since \( \Phi\) is a group morphism, we have \( \Phi(g_1g_2)=\Phi(g_1)\Phi(g_2)=ee=e\), so that \( g_1g_2\in \Gamma\).
			\spitem[As an union]
			Let \( g\in\Phi^{-1}(V)\). There exists a \( g_0\in U\) such that \( \Phi(g_0)=\Phi(g)\). Recall that \( \Phi\) is not injective; \( g_0\) and \( g\) are element of \( G\) that are mapped on the same point in \( V\). Since \( \Phi\) is a morphism,
			\begin{equation}
				\Phi(gg_0^{-1})=\Phi(g)\Phi(g_0^{-1})=\Phi(g)\Phi(g_0)^{-1}=e.
			\end{equation}
			Thus \( gg_0^{-1}\in \Gamma\). Since \( U^{-1}=U\) we have proved that if \( g\in \Phi^{-1}(V)\), there exists \( a\in \Gamma\) and \( s\in U\) such that \( as=g\). In other words,
			\begin{equation}        \label{EQooEZBDooBIfRJx}
				\Phi^{-1}(V)=\bigcup_{a\in \Gamma}L_a(U).
			\end{equation}
			\spitem[Disjoint]
			It remain to be proven that the union \eqref{EQooEZBDooBIfRJx} is disjoint. Let \( a,b\in \Gamma\) such that \( L_a(U)\cap L_b(U)\neq \emptyset\). We'll prove the \( a=b\). Let \( x\in L_a(U)\cap L\b(U)\); we have
			\begin{equation}
				L_{b^{-1}}(x)\in L_{b^{-1} a}(U)\cap U.
			\end{equation}
			So, with \( c=b^{-1} a\), we have \( c\in\Gamma\) and
			\begin{equation}        \label{EQooVNIFooBtjxRi}
				L_c(U)\cap U\neq\emptyset.
			\end{equation}
			Thus there exist \( p_1,p_2\in U\) such that \( cp_1=p_2\) (these are two ways to write an element of \eqref{EQooVNIFooBtjxRi}). In particular we have \( \Phi(cp_1)=\Phi(p_2)\). Since \( c\in \Gamma\) we also have
			\begin{equation}
				\Phi(p_2)= \Phi(cp_1)=\Phi(c)\Phi(p_1)=\Phi(p_1).
			\end{equation}
			But \( \Phi\colon U\to V\) is injective. We deduce that \( p_1=p_2\), so that \( c=e\) and \( b^{-1}a=e\). Thus \( a=b\).
		\end{subproof}
	\end{subproof}
\end{proof}

\begin{proposition}[\cite{BIBooFSPWooQoosA}]        \label{PROPooIORNooLeuXPW}
	Let \( G,H\) be smooth Lie groups. If \( f\colon G\to H\) is a smooth morphism\footnote{The map is smooth with respect to the manifold structure while being a morphism of groups.}, then it has constant rank.
\end{proposition}

\begin{proof}
	Let \( G\) and \( H\) be Lie groups, let \( f\colon G\to H\) be a smooth morphism and \( g_0\in G\). We will prove that \( df_{g_0}\) has the same rank as \( df_e\).

	Since \( f\) is a morphism we have
	\begin{equation}
		(f\circ L_{g_0})(g)=f(g_0g)=f(g_0)f(g)=L_{f(g_0)}\big( f(g) \big)=\big( L_{f(g_0)}\circ f \big)(g).
	\end{equation}
	Thus we have \( f\circ L_{g_0}=L_{f(g_0)}\circ f\). We take the differential on both sides. On the left hand side:
	\begin{equation}
		d(f\circ L_{g_0})_e=df_{L_{g_0}(e)}\circ(dL_{g_0})_e,
	\end{equation}
	and on the right hand side:
	\begin{equation}
		d\big( L_{f(g_0)}\circ f \big)=(dL_{f(g_0)})_{f(g_0)}\circ df_e
	\end{equation}
	We know from lemma \ref{LEMooPIUFooHjyXln} that for every \( g,h\in G\), the differential \( (dL_h)_g\) is a vector space isomorphism. The composition of a linear map with a vector space isomorphism does not change the rank. Thus
	\begin{equation}
		\rank\Big[ (dL_{f(g_0)})_{f(g_0)}\circ df_e \Big]=\rank(df_e),
	\end{equation}
	and
	\begin{equation}
		\rank\big[ df_g\circ(dL_{g_0})_e \big]=\rank(df_g),
	\end{equation}
	so that \( \rank(df_g)=\rank(df_e)\).
\end{proof}

\begin{proposition}[\cite{BIBooFLEXooPgvAlz}]
	Let \( f\colon G\to H\) be a smooth morphism of Lie groups\footnote{This is a morphism of groups which is smooth.}. Then
	\begin{enumerate}
		\item
		      The set \( \ker(f)\) is a closed subgroup of \( G\).
		\item
		      The group \( \ker(f)\) is a Lie group.
		\item
		      The Lie algebra of \( \ker(f)\) is \( \ker(df)\).
	\end{enumerate}
\end{proposition}

\begin{proof}
	In several parts.
	\begin{subproof}
		\spitem[\( \ker(f)\) is a subgroup]
		If \( g_1,g_2\in \ker(f)\), then
		\begin{equation}
			f(g_1g_2)=f(g_1)f(g_2)=ee=e,
		\end{equation}
		so that \( g_1g_2\in\ker(f)\). Moreover \( f(e)=e\), so that \( e\in \ker(f)\). This proves that \( \ker(f)\) is a subgroup of \( G\).
		\spitem[\( \ker(f)\) is closed]
		We are going to prove that \( G\setminus\ker(f)\) is open. For that we consider \( g\in G\setminus\ker(f)\) and we prove that there exists a neighbourhood of \( g\) contained in \( G\setminus\ker(f)\).

		Let \( g\in G\setminus\ker(f)\). We know that \( f(g)\neq e\) in \( H\), so that we can consider an open neighbourhood \( V\) of \( f(g)\) in \( H\) such that \( e\notin V\).

		Since \( f\) is continuous, \( f^{-1}(V)\) is an open set which contains \( g\). We have \( f^{-1}(V)\cap \ker(f)=\emptyset\) because if \( x\in f^{-1}(V)\cap\ker(f)\), we would have \( f(x)\in V\) and \( f(x)=e\) which is impossible. We deduce that \( f^{-1}(V)\cap\ker(f)=\emptyset\). Thus \( G\setminus\ker(f)\) contains \( f^{-1}(V)\) which is a neighbourhood of \( g\). We conclude that \( G\setminus \ker(f)\) is open, so that \( \ker(f)\) is closed.
		\spitem[\( \ker(f)\) is a Lie group]
		From the Cartan theorem \ref{THOooDEJHooVKJYBL}, we know that \( \ker(f)\) is a Lie subgroup of \( G\).
		\spitem[Lie algebra]
		Proposition \ref{PROPooLUEJooAAyHVh} says that the Lie algebra of \( \ker(f)\) is
		\begin{equation}
			\lK=\{ X\in \lG\tq \exp(tX)\in \ker(f)\,\forall t\in \eR \}.
		\end{equation}
		We have to prove that \( \lK=\ker(df)\). Let \( X\in \lG\). We have:
		\begin{subequations}
			\begin{align}
				X\in\ker(df) & \Leftrightarrow df(X)=0                                                                      \\
				             & \Leftrightarrow df(tX)=0\,\forall t\in \eR                                                   \\
				             & \Leftrightarrow \exp\big( df(tX) \big)=e\,\forall t\in \eR       \label{SUBEQooVVVKooVHdrfC} \\
				             & \Leftrightarrow f\big( \exp(tX) \big)=e\,\forall t\in \eR  \label{SUBEQooCUSGooKTlkJn}       \\
				             & \Leftrightarrow tX\in\ker(f)\,\forall t\in \eR                                               \\
				             & \Leftrightarrow X\in\lK.
			\end{align}
		\end{subequations}
		Justifications.
		\begin{itemize}
			\item For \eqref{SUBEQooVVVKooVHdrfC}. The exponential is a bijection between a neighbourhood of \( 0\) in \( \lG\) and a neighbourhood of \( e\) in \( G\) (proposition \ref{PROPooYFZZooLUOuOj}). Thus if \( X\neq 0\) we can choose \( t_1,t_2\in \eR\) such that \( \exp(t_1X)\neq \exp(t_2X)\).
			\item For \eqref{SUBEQooCUSGooKTlkJn}. Lemma \ref{lemsur5d}.
		\end{itemize}
	\end{subproof}
\end{proof}

\begin{proposition}[\cite{BIBooFLEXooPgvAlz}]
	A continuous morphism between Lie groups is smooth.
\end{proposition}

\begin{proof}
	Let \( \phi\colon G\to H\) be a continuous morphism. We consider
	\begin{equation}
		\Gamma=\{ (g,h)\in G\times H\tq \phi(g)h^{-1}=e \}.
	\end{equation}
	\begin{subproof}
		\spitem[\( \Gamma\) is a subgroup of \( G\times H\)]
		Let \( (g_1,h_1)\) and \( (g_2,h_2)\) be in \( \Gamma\). We have \( (g_1,h_1)(g_2,h_2)=(g_1g_2,h_1h_2)\) while
		\begin{equation}
			\phi(g_1g_2)(h_1h_2)^{-1}=\phi(g_1)\underbrace{\phi(g_2)h_2^{-1}}_{=e}h_1^{-1}=e
		\end{equation}
		\spitem[\( \Gamma\) is closed]
		We consider
		\begin{equation}
			\begin{aligned}
				f\colon G\times H & \to H                  \\
				(g,h)             & \mapsto \phi(g)h^{-1}.
			\end{aligned}
		\end{equation}
		This is a continuous map because \( \phi\) is continuous (as well as the product and the inverse in \( H\)) and \( \Gamma=\ker(f)\). Thus \( \Gamma\) is closed.
		\spitem[\( \Gamma\) is a Lie subgroup]
		The Cartan theorem \ref{THOooDEJHooVKJYBL} says that \( \Gamma\) being a closed subgroup, it is a smooth Lie subgroup.
		\spitem[The projection]
		We introduce the projection
		\begin{equation}
			\begin{aligned}
				p\colon \Gamma & \to G     \\
				(g,h)          & \mapsto g
			\end{aligned}
		\end{equation}
		and we given some properties.
		\begin{subproof}
			\spitem[Smooth]
			By proposition \ref{PROPooCHVLooVFScOl}, the projection is smooth.
			\spitem[Bijective]
			Let \( (g_1,h_1),(g_2,h_2)\in \Gamma\) such that \( p(g_1,h_1)=p(g_2,h_2)\). Then \( g_1=g_2\). But for each \( i\) we have \( \phi(g_i)=h_i\), so \( h_1=\phi(g_1)=\phi(g_2)=h_2\).
			\spitem[Morphism]
			Because
			\begin{equation}
				p\big( (g_1,h_1)(g_2,h_2) \big)=p(g_1g_2,h_1h_2)=g_1g_2=p(g_1,h_1)p(g_2,h_2).
			\end{equation}
			For the inverse, \( (g,h)^{-1}=(g^{-1},h^{-1})\), so that
			\begin{equation}
				p\big( (g,h)^{-1}\big)=p(g^{-1},h^{-1})=g^{-1}=p(g,h)^{-1}.
			\end{equation}
			So \( p\) is a group morphism.
		\end{subproof}
		\spitem[Smooth diffeomorphism]
		The differential of \( p\) at \( (e,e)\) is the map\footnote{Proposition \ref{PROPooKITOooTcsIiu}.} \( dp_{(e,e)}\colon \lG\times \lH\to \lG\) given by
		\begin{equation}
			dp_{(e,e)}(X,Y)=\Dsdd{ p( e^{tX},  e^{tX}) }{t}{0}=\Dsdd{  e^{tX} }{t}{0}=X,
		\end{equation}
		so that \( dp_{(e,e)}\) is surjective on \( \lG\). Its rank is the dimension of \( \lG\).

		Proposition \ref{PROPooIORNooLeuXPW} shows that \( p\) has constant rank. We know that this rank is maximal, so that the theorem \ref{THOooDWEXooMClWVi} thus says that \( p\) is a local smooth diffeomorphism everywhere.

		Since \( p\) is invertible, it is a global smooth diffeomorphism.
		\spitem[Conclusion]
		We have
		\begin{equation}
			\phi=\pr_2\circ p^{-1}.
		\end{equation}
		Since \( p^{-1}\) and \( \pr_2\) are smooth, the map \( \phi\) is smooth.
	\end{subproof}
\end{proof}

\begin{theorem}[\cite{BIBooFLEXooPgvAlz}]       \label{THOooZAEYooXCdxKI}
	Let \( G\) and \( H\) be Lie groups. We suppose that \( G\) is connected and simply connected. Let \( \rho\colon \lG\to \lH\) be a morphism of Lie algebra.

	There exists an unique smooth morphism \( f\colon G\to H\) such that \( df_e=\rho\).
\end{theorem}

\begin{proof}
	Let \( \lS\) be the graph of \( \rho\):
	\begin{equation}
		\lS=\{ (X,Y)\in \lG\oplus\lH\tq Y=\rho(X) \}.
	\end{equation}
	Since \( \rho\) is linear, the set \( \lS\) is a vector subspace of \( \lG \oplus\lH\). Moreover \( \lS\) is a Lie subalgebra. Indeed, if \( Y_i=\rho(X_i)\) we have
	\begin{equation}
		[Y_1,Y_2]=\big[ \rho(X_1),\rho(X_2) \big]=\rho\big( [X_1,X_2] \big)
	\end{equation}
	and then
	\begin{equation}
		\big[ (X_1,Y_1),(X_2,Y_2) \big]=\big( [X_1,X_2],[Y_1,Y_2] \big)=\Big( [X_1,X_2],\rho\big( [X_1,X_2] \big) \Big)\in\lS.
	\end{equation}
	The Chevalley theorem \ref{THOooXALIooGiPVdD} says that there exists a unique connected Lie subgroup \( S\) of \( G\times H\) whose Lie algebra is \( \lS\).

	We consider the inclusion \( \iota\colon S\to G\times H\) and the map
	\begin{equation}
		\begin{aligned}
			\varphi=\pr_1\circ\iota\colon S & \to G      \\
			(g,h)                           & \mapsto g.
		\end{aligned}
	\end{equation}
	This is a smooth morphism, so that its differential is a morphism of Lie algebra.
	\begin{subproof}
		\spitem[\( d\varphi_{(e,e)}\) is bijective]
		We study the map
		\begin{equation}
			d\varphi_{(e,e)}=(d\pr_1)_{(e,e)}\circ d\iota_{(e,e)}\colon \lS\to \lG.
		\end{equation}
		\begin{subproof}
			\spitem[Injection]
			Let \( (X_1,Y_1)\) and \( (X_2,Y_2)\) be elements of \( \lS\) such that \( d\varphi_{(e,e)}(X_1,Y_1)=d\varphi_{(e,e)}(X_2,Y_2)\). Since \( d\iota_{(e,e)}\) is the identity, we have
			\begin{equation}
				(d\pr_1)_{(e,e)}(X_1,Y_2)=(d\pr_1)_{(e,e)}(X_2,Y_2).
			\end{equation}
			We deduce \( X_1=X_2\). By definition of \( \lS\) we also have \( Y_i=\rho(X_i)\) and then
			\begin{equation}
				Y_1=\rho(X_1)=\rho(X_2)=Y_2.
			\end{equation}
			\spitem[Surjection]
			Let \( X\in\lG\). We consider \( Y=\rho(X)\), so that \( (X,Y)\in \lS\) and
			\begin{equation}
				d\varphi_{(e,e)}(X,Y)=X.
			\end{equation}
		\end{subproof}
		\spitem[Diffeomorphism]
		We know that \( \varphi\colon S\to G\) is a smooth morphism and that \( d\varphi_{(e,e)}\) is bijective. Theorem \ref{THOooDWEXooMClWVi} concludes that \( \varphi\) is a local smooth diffeomorphism. So there exists a neighbourhood \( V_1\) of \( (e,e)\) in \( S\) and a neighbourhood \( V_2\) of \( e\) in \( G\) such that \( V_2=\varphi(V_1)\). By proposition \ref{PropUssGpGenere}, the map \( \varphi\) is surjective on the connected component of \( e\) in \( G\). Since \( G\) is connected, \( \varphi\) is a global smooth diffeomorphism.
		\spitem[The map \( \Phi\)]
		We define
		\begin{equation}
			\begin{aligned}
				\Phi\colon G & \to H                     \\
				\Phi         & =\pr_2\circ \varphi^{-1}.
			\end{aligned}
		\end{equation}
		As composition of smooth morphisms, the map \( \Phi\) is a smooth morphism. We have to prove that \( d\Phi_e=\rho\).
		\spitem[The map \( d\varphi^{-1}_e\)]
		Let \( X\in\lG\). We have
		\begin{subequations}
			\begin{align}
				d\varphi_{(e,e)}\big( X,\rho(X) \big) & =(d\pr_1)_e\circ d\iota_{(e,e)}\big( X,\rho(X) \big) \\
				                                      & =(d\pr_1)_e\big( X,\rho(X) \big)                     \\
				                                      & =X.
			\end{align}
		\end{subequations}
		The proposition \ref{PROPooPEMLooPQcywG} concludes that
		\begin{equation}
			(d\varphi^{-1})_e(X)=\big( X,\rho(X) \big).
		\end{equation}
		\spitem[Conclusion]
		Now we conclude with the differential of \( \Phi\); if \( X\in\lG\) we have
		\begin{subequations}
			\begin{align}
				d\Phi_e(X) & =(d\pr_2)_{\varphi^{-1}(e)}\circ (d\varphi^{-1})_e(X) \\
				           & =(d\pr_2)_{\varphi^{-1}(e)}\big( X,\rho(X) \big)      \\
				           & =\rho(X)
			\end{align}
		\end{subequations}
		and \( \Phi\) is the map we were searching for.
	\end{subproof}
\end{proof}


\begin{proposition}     \label{PROPooCRKMooIIbKUM}
	Let $G$ be a Lie group and $H$, a Lie subgroup of $G$ ($\lG$ and $\lH$ are the corresponding Lie algebras). We suppose that $H$ has at most a countable number of connected components. Then
	\begin{equation}
		\lH=\{ X\in\lG:\forall t\in\eR,e^{tX}\in H \}
	\end{equation}
\end{proposition}

\begin{proof}
	We will once again use the lemma ~\ref{LEMooEBQUooKXkCda} with $\lN=\lH$ and $\lM$, a complementary vector space of $\lH$ in $\lG$. We define
	\[
		V=\exp\mU_m\exp\mU_h
	\]
	where $\mU_m$ and $\mU_h$ are the sets given by the lemma. We consider on $V$ the induced topology from $G$. If we define
	\[
		\mA=\{A\in\mU_m:e^{A}\in H\},
	\]
	we have
	\begin{equation}\label{eq:union_A}
		H\cap V=\bigcup_{A\in\mA}e^{A}e^{\mU_h}.
	\end{equation}
	First, the definition of $V$ makes clear that the elements of the form $\exp A\exp\mU_h$ are in $V$. They are also in $H$ because $\exp A\in H$ (definition of $\mA$) and $\exp\mU_h$ still by definition. In order to see the inverse inclusion, let us consider a $h\in H\cap V$. We know that
	\begin{equation}\label{eq:AB_to_exp}
		(A,B)\to\exp A\exp B
	\end{equation}
	is a diffeomorphism between $\mU_m\times\mU_h$ and a neighbourhood of $e$ in $G$ which we called $V$. Thus any element of $V$ (\emph{a fortiori} in $V\cap H$) can be written as $\exp A\exp B$ with $A\in\mU_m$ and $B\in\mU_h$. Then $h=e^Ae^B$ for some $A\in\mU_m$, $B\in\mU_h$. Since $H$ is a group and $e^B\in H$, in order the product to belongs to $H$, $e^A$ must lies in $H$: $A\in\mA$.

	\begin{remark}\label{rem:union_disj}
		Note that since \eqref{eq:AB_to_exp} is diffeomorphic, the union in right hand side of \eqref{eq:union_A} is disjoint. Each member of this union is a neighbourhood in $H$ because it is a set $h\exp\mU_h$ where $\exp\mU_h$ is a neighbourhood of $e$ in $H$.
	\end{remark}

	Now we consider the map $\dpt{\pi}{V}{\mU_m}$,
	\[
		\pi(e^{X}e^Y)=X
	\]
	if $X\in\mU_m$ and $Y\in\mU_h$. This is a continuous map which sends $H\cap V$ into $\mA$. The identity component of $H\cap V$ (in the sense of topology of $V$) is sent to a countable subset of $\mU_m$. Indeed by remark~\ref{rem:union_disj}, identity component of $H\cap V$ is only one of the terms in the union \eqref{eq:union_A}, namely $A=0$. But we know that $\pi^{-1}(o)=\exp\mU_h$, thus $\exp\mU_h$ is the identity component of $H\cap V$ for the topology of $V$.
\end{proof}



Now we take back our example with $G=S^1\times S^1$, $H=\gamma(\eR)$. In this case, the theorem doesn't works. Let us see why as deep as possible. We have $\lG=\eR\oplus\eR=\eR^2$ and $\lH=\eR$, a one-dimensional vector subspace of $\lG$. ($\lH$ is a ``direction ''\ in $\lG$) First, we build the neighbourhood $V$ of $0$ in $\lG$. It is standard to require that $\exp$ is diffeomorphic between $V$ and an open around $(1,1)\in S^1\times S^1$. It also must satisfy $e^{V\cap\lH}=e^V\cap H$. This second requirement is impossible.

Intuitively. We can see $V\subset\lG$ as a little disk tangent to  the torus. The exponential map deposits it on the torus, as well that $e^V$ covers a little area on $G$. Then $e^V\cap H$ is one of these amazing open subset of $\Gamma$ which are dense in a certain domain of $G$.

On the other hand, $V\cap\lH$ is just a little vector in $\lH$; the exponential deposits it on a small line in $G$. This is not the same at all.

Let $W_0\subset\lG$  be a neighbourhood of $0$ which is in bijection with an open around $e$ in $G$. We consider $N_0$, an open subset of $H$ such that $N_0\subset W_0$ and $N_0$ is in bijection with $N_e$, a neighbourhood of $e$ in $G$. Until here, no problems. But now the proof says that there exists an open $U_e$ in $G$ such that $N_e=U_e\cap H$. This is false in our case. Indeed, $N_e=e^{N_0}$ is just a segment in $G$ while any subset of $G$ of the form $U_e\cap H$ is an ``amazing''\ open.

So we see that deeply, the obstruction for a Lie subgroup to be a topological Lie subgroup resides in the fact that the topology of a submanifold is \emph{more} than the induced topology, so that we can't automatically find the open $U_e$ in $G$.


Note that two groups which have the same Lie algebra are not necessarily isomorphic. For example the sphere $S^2$ and $\eR^2$ both have $\eR^2$ as Lie algebra. But two groups with same Lie algebra are locally the same. More precisely, we have the following lemma.

\begin{lemma}
	If $G$ is a Lie group and $H$, a topological subgroup of $G$ with the same Lie algebra ($\lH=\lG$), then there exists a common neighbourhood $A$ of $e$ of $G$ and $G$ on which the products in $G$ and $H$ are the same.
\end{lemma}

\begin{proof}
	The exponential is a diffeomorphism between $U\subset\lG$ and $V\subset G$ and between $U'\subset\lH$ and $W\subset H$ (obvious notations). We consider an open $\mO\subset\lH$ such that $\mO\subset U\subset U'$. The exponential is diffeomorphic from $\mO$ to a certain open $A$ in $G$ and $H$. Since $H$ is a subgroup of $G$, the product $e^Xe^Y$ of elements in $A$ is the same for $H$ and $G$. (cf error~\ref{err:gp_meme_alg})
\end{proof}

Under the same assumptions, we can say that $H$ contains at least the whole $G_0$ because it is generated by any neighbourhood of the identity. Since $H$ is a subgroup, the products keep in $H$.

For a semisimple Lie group, the Lie algebras $\partial(\lG)$ and $\ad(\lG)$ are the same. Then $\Int(\lG)$ contains at least the identity component of $\Aut(\lG)$. Since $\Int(\lG)$ is connected, for a semisimple group, it is the identity component of $\Aut(\lG)$.

\begin{proposition}     \label{ProplGcompactKillNeg}\label{prop:compact_Killing}
	Let $\lG$ be a real Lie algebra.
	\begin{enumerate}
		\item If $\lG$ is semisimple, then $\lG$ is compact if and only if  the Killing form is strictly negative definite.
		\item If it is compact then it is a direct sum
		      \begin{equation}
			      \lG=\mZ\oplus [\lG,\lG]
		      \end{equation}
		      where $\mZ$ is the center of $\lG$ and the ideal $[\lG,\lG]$ is compact and semisimple.
	\end{enumerate}
\end{proposition}

\begin{proof}
	\subdem{If the Killing form is nondegenerate}
	We consider $\lG$, a Lie algebra whose Killing form is strictly negative definite. Up to some dilatations (and a sign), this is the euclidian metric. Then $O(B)$, the group of linear transformations which leave $B$ unchanged is compact in the topology of $\GL(\lG)$: this is almost the rotations. From equation \eqref{eq:Aut_Iso}, $\Aut(\lG)\subset O(B)$. With this, $\Aut(\lG)$ is closed in a compact, then it is compact. Then $\Int(\lG)$ is closed in $\Aut(\lG)$ --here is the assumption of semi-simplicity-- and $\Int(\lG)$ is compact.
	\subdem{If $\lG$ is compact}
	Since $\lG$ is compact, $\Int(\lG)$ is compact in the topology of $\Aut(\lG)$; then there exists an $\Int(\lG)$-invariant quadratic form $Q$. In a suitable basis $\{X_1,\ldots,X_n\}$ of $\lG$, we can write this form as
	\[
		Q(X)=\sum x_i^2
	\]
	for $X=\sum x_iX_i$. In this basis the elements of $\Int(\lG)$ are orthogonal matrices and the matrices of $\ad(\lG)$ are skew-symmetric matrices (the Lie algebra of orthogonal matrices). Let us consider a $X\in\lG$ and denote by $a_{ij}(X)$ the matrix of $\ad(X)$. We have
	\begin{equation}
		\begin{split}
			B(X,X)=\tr(\ad X\circ\ad X)
			=\sum_i\sum_ja_{ij}(X)a_{ji}(X)
			=-\sum_{ij}a_{ij}(X)^2\leq 0.
		\end{split}
	\end{equation}
	Then the Killing form is negative definite\footnote{Here we use ``negative definite''\ and ``\emph{strictly} negative definite''; in some literature, the terminology is slightly different and one says ``\emph{semi} negative definite''\ and ``negative definite''.}. On the other hand, $B(X,X)=0$ implies $\ad(X)=0$ and $X\in\mZ(\lG)$. Thus $\lG^{\perp}\subset\mZ$. If $\lG$ is semisimple, this center is zero; this conclude the first item of the proposition.

	Now $\mZ$ is an ideal and corollary~\ref{cor:decomp_ideal} decomposes $\lG$ as
	\begin{equation}
		\lG=\mZ\oplus\lG'.
	\end{equation}
	Let us suppose that the restriction of $B$ to $\lG'\times\lG'$ is actually the Killing form on $\lG'$ (we will prove it below). Then the Killing form on $\lG'$ is strictly negative definite; then $\lG'$ is compact.

	Now we prove that the Killing form on $\lG$ descent to the Killing form on~$\lG'$. Remark that $\mZ$ is invariant under all the automorphism. Indeed consider $Z\in\mZ$, i.e.  $[X,Z]=0$. If $\sigma$ is an automorphism,
	\[
		[X,\sigma Z]=\sigma[\sigma^{-1} X,Z]=0.
	\]
	Here the difference between $\Int(\lG)$ and $\Aut(\lG)$ is the fact that $\Int(\lG)$ is compact; then we can construct a $\Int(\lG)$-invariant quadratic form $Q$, but not a $\Aut(\lG)$-invariant one. We consider an orthogonal complement (with respect to $Q$) $\lG'$ of $\mZ$:
	\begin{equation}
		\lG=\lG'\oplus_{\perp}\mZ.
	\end{equation}
	The algebra $\lG'$ is also invariant because for any $Z\in\mZ$,
	\[
		Q(Z,\sigma X)=Q(\sigma^{-1}(Z),X)=0.
	\]
	It is also clear that $\mZ$ is invariant under $\ad\lG$ because $(\ad X)Z=0$. Finally $\lG'$ is invariant as well under $\ad(\lG)$. Indeed $a\in\ad(\lG)$ can be written as $a=a'(0)$ for a path $a(t)\in\Int(\lG)$. We identify $\lG$ and his tangent space (as vector spaces),
	\[
		aX=\Dsdd{ a(t)X }{t}{0}.
	\]
	If $X\in\lG'$, $a(t)X\in\lG'$ for any $t$ because $\lG'$ is invariant under $\Int(\lG)$\footnote{As physical interpretation, if something is invariant under a group of transformations, it is invariant under the infinitesimal transformations as well.}. Thus $a(t)X$ is a path in $\lG'$ and his derivative is a vector in $\lG'$.

	All this make $\lG'$ an ideal in $\lG$; then the Killing form descent by lemma~\ref{lem:Killing_descent_ideal}. Now if $X\in\lG$, we have
	\begin{equation}
		B(X,X)=\tr(\ad X\circ\ad X)
		=\sum_{ij}a_{ij}(X)a_{ji}(X)
		=-\sum_{ij}a_{ij}(X)^2;
	\end{equation}
	then $B(X,X)\leq 0$ and the equality holds if and only if $\ad X=0$ i.e. if and only if $X\in\mZ$. Thus $B$ is strictly negative definite on $\lG'$.

	Up to now we have proved that $\lG'$ is semisimple (because $B$ is nondegenerate) and compact (because $B$ is strictly negative definite).

	It remains to be proved that $\lG'=[\lG,\lG]=\dD(\lG)$. From corollary~\ref{cor:decomp_ideal}, $\dD\lG$ has a complementary $\lA$ which is also an ideal: $\lG=\dD\lG+\lA$. Then $[\lG,\lA]\subset\dD\lG$ and $[\lG,\lA]\subset\lA\cap\dD\lG:\{0\}$. Then $\lA\subset\mZ$, so that
	\begin{align}\label{eq:G_Z_B}
		\lG=\mZ+\dD\lG &  & \text{(non direct sum)}.
	\end{align}
	Now we have to prove that the sum is actually direct. The ideal $\mZ$ has a complementary ideal $\lB$: $\lG=\mZ\oplus\lB$ and
	\[
		\dD\lG=[\lG,\lG]\subset\underbrace{[\lG,\mZ]}_{=0}+[\lG,\lB]\subset\lB.
	\]
	Then $\dD\lG\subset\lB$ which implies that $\dD\lG\cap\mZ=\{0\}$ because the sum $\lG=\mZ\oplus\lB$ is direct. Then the sum \eqref{eq:G_Z_B} is direct.

\end{proof}

\begin{proposition}
	A real Lie algebra $\lG$ is compact if and only if one can find a compact Lie group $G$ which Lie algebra is isomorphic to $\lG$.
	\label{prop:alg_grp_compact}
\end{proposition}

\begin{proof}
	\subdem{Direct sense} Since $\lG$ is compact, $\lG=\mZ\oplus\dD\lG$ with $\dD\lG=\lG'$ compact and semisimple; in particular, the center of $\lG'$ is $\{0\}$. Since $\mZ$ is compact and abelian, it is isomorphic to the torus $S^1\times\ldots\times S^1$. Since $\lG'$ is compact, $\Int(\lG')$ is compact, but the Lie algebra if $\Int(\lG')$ is --by definition--  $\ad(\lG')$. The center of a semisimple Lie algebra is zero; then $\ad X'=0$ implies $X=0$ (for $X\in\lG'$). Then $\ad$ is an isomorphism between $\lG'$ and $\ad\lG'$.

	All this shows that --up to isomorphism-- $\mZ$ and $[\lG,\lG]$ are Lie algebras of compact groups. We know from lemma~\ref{lemLeibniz} that the Lie algebra of $G\times H$ is $\lG\oplus\lH$. Thus, here, $\lG$ is the Lie algebra of the compact group $S^1\times\ldots\times S^1\times\Int(\lG)$.
	\subdem{Reverse sense}
	We consider a compact group $G$ and we have to see the its Lie algebra $\lG$ is compact. If $G$ is connected, $\Ad_G$ is an analytic homomorphism from $G$ to $\Int(\lG)$. If $G$ is not connected, the Lie algebra of $G$ is $T_eG_0$ ($G_0$ is the identity component of $G$) where $G_0$ is connected and compact because closed in a compact.
\end{proof}

\begin{proposition}
	Let $\lG$ be a real Lie algebra and $\mZ$, the center of $\lG$. We consider $\lK$, a compactly embedded in $\lG$. If $\lK\cap\mZ=\{0\}$ then the Killing form of $\lG$ is strictly negative definite on $\lK$.
	\label{prop:K_Z_Killing}
\end{proposition}

\begin{proof}
	Let $B$ be the Killing form on $\lG$ and $K$ the analytic subgroup of $\Int(\lG)$ whose Lie algebra is $\ad_{\lG}(\lK)$. By assumption, $K$ is a compact Lie subgroup of $\GL(\lG)$. Then there exists a quadratic form on $\lG$ invariant under $K$, and a basis in which the endomorphisms $\ad_{\lG}(T)$ for $T\in\lK$ are skew-symmetric because the matrices of $K$ are orthogonal. If the matrix of $\ad T$ is $(a_{ij})$, then
	\begin{equation}
		B(T,T)=\sum_{ij}a_{ij}(T)a_{ji}(T)
		=-\sum_{ij}a_{ij}^2(T)\leq 0,
	\end{equation}
	and the equality hold only if $\ad T=0$ i.e. if $T\in\mZ$. From the assumptions, $\lK\cap\mZ=\{0\}$; then $B(T,T)=0$ if and only if $T=0$.
\end{proof}
