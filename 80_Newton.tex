% This is part of Mes notes de mathématique
% Copyright (c) 2011-2016
%   Laurent Claessens
% See the file fdl-1.3.txt for copying conditions.

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
\section{Prolongement de fonctions et complétion d'espaces métriques}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

Sources : \cite{RasclAnaFonc}

\begin{lemma}   \label{LemdCOMQM}
    Soit \( E\), un espace vectoriel normé complet et \( (A_n)\) une suite emboité de fermés non vides dont le diamètre tend vers zéro. Alors l'intersection \( \bigcap_{n\in \eN}A_n\) contient exactement un point.
\end{lemma}

\begin{proof}
    Si l'intersection contenait deux points distincts \( a\) et \( b\), alors nous aurions \( \diam(A_n)\geq\| a-b \|\), ce qui contredirait la limite.

    Soit une suite \( (x_n)\) avec \( x_k\in A_k\) pour tout \( k\in \eN\). C'est une suite de Cauchy. En effet si \( \epsilon>0\), considérons \( N\) tel que \( \diam(A_N)<\epsilon\). Dans ce cas dès que \( n,m>N\) nous avons \( x_n,x_m\in A_{N}\) et donc \( \| x_n-x_m \|\leq \epsilon\). La suite \( x_n\) converge donc vers un élément dans \( E\).

    Nous devons montrer que \( x\in A_k\) pour tout \( k\). La queue de suite \( (x_n)_{n\geq k}\) est une suite de Cauchy dans \( A_k\) qui converge donc vers un élément de \( A_k\) (ici nous utilisons le fait que \( A_k\) est fermé). Par unicité de la limite, cette dernière doit être \( x\). Par conséquent \( x\in\bigcap_{n\in \eN}A_n\).
\end{proof}

\begin{theorem}[\cite{MaurayAnalSpec}]      \label{ThoCaMpKO}
    Soient \( X\) et \( Y\) des espaces vectoriels normés. Pour une application linéaire \( f\colon X\to Y\), les assertions suivantes sont équivalentes :
    \begin{enumerate}
        \item
            \( f\) est continue sur \( X\),
        \item
            \( f\) est continue en un point de \( X\),
        \item
            \( f\) est bornée.
    \end{enumerate}
\end{theorem}

\begin{proposition} \label{PropTTiRgAq}
    Soit un espace normé \( X\), un espace de Banach \( F\) et une partie dense \( A\) de \( X\). Si l'application linéaire
    \begin{equation}
        f\colon   \big( A,\| . \|_X \big)  \to F
    \end{equation}
    est continue\footnote{Nous avons bien mis sur \( A\) la topologie induite de \( X\). Notons que ce n'est pas toujours celle qui est la plus naturelle sur \( A\).}, alors il existe une unique application linéaire continue \( \tilde f\colon X\to F\) prolongeant \( f\). De plus \( \| \tilde f \|=\| f \|\).
\end{proposition}

\begin{proof}
    Soit \( x\in X\) et la suite d'ensemble
    \begin{equation}
        A_n=\{ y\in A\tq \| x-y \|\leq 2^{-n}\}.
    \end{equation}
    Étant donné que \( A\) est dense, ces ensembles sont tous non vides. De plus \( \diam A_n\to 0\) parce que si \( y,y'\in A_n\) alors
    \begin{equation}
        \| y-y' \|\leq\| y-x \|+\| x-y' \|\leq 2^{-n+1}.
    \end{equation}
    Vu que \( f\) est bornée, la suite d'ensembles \( f(A_n)\) est une suite emboitée d'ensembles non vides de \( F\). De plus leur diamètre tend vers zéro. En effet si \( z,z'\in f(A_n)\), nous posons \( z=f(y)\), \( z'=f(y')\) et nous avons
    \begin{equation}
        \| z-z' \|\leq \| f(y)-f(x) \|+\| f(x)-f(y') \|\leq \| f \|\big( \| y-x \|+\| x-y' \| \big),
    \end{equation}
    ce qui montre que \( \diam f(A_n)\leq \| f \|2^{-n+1}\).  Notons que nous avons utilisé la linéarité de \( f\). Par le lemme \ref{LemdCOMQM}, l'intersection \( \bigcap_{n\in \eN}\overline{ f(A_n) }\) contient exactement un point. Nous posons
    \begin{equation}
        S(x)=\bigcap_{n\in \eN}\overline{ f(A_n) }.
    \end{equation}
    Nous allons montrer que l'application \( x\mapsto S(x)\) ainsi définie est l'application que nous cherchons. 

    Nous commençons par montrer que pour toute suite \( y_k\to x\) avec \( y_k\in A\) nous avons 
    \begin{equation}    \label{EqBnRZxW}
        f(y_k)\to S(x).
    \end{equation}
    Pour cela nous considérons \( n_0\in \eN\) et \( k_0\) tel que \( y_{k_0}\in A_{n_0}\). Avec cela nous avons
    \begin{equation}
        \| f(y_k)-S(x) \|\leq \diam(A_{n_0})\leq \| f \|2^{-n_0+1}.
    \end{equation}
    Pour montrer que \( S\) est linéaire, nous considérons deux suites dans \( A\) : \( y_k\to x\) et \( y'_k\to x'\) ainsi que la somme \( y_k+y'k\to x+x'\). Nous écrivons la relation \eqref{EqBnRZxW} pour ces trois suites :
    \begin{subequations}
        \begin{align}
            f(y_k)\to S(x)\\
            f(y'_k)\to S(x')\\
            f(y_k+y'_x)\to S(x+x').
        \end{align}
    \end{subequations}
    Cependant, étant donné que \( f\) est linéaire, pour tout \( k\) nous avons \( f(y_k+y'_k)=f(y_k)+f(y'_k)\) et par conséquent
    \begin{equation}
        f(y_k+y'_k)\to S(x)+S(x').
    \end{equation}
    Par unicité de la limite, \( S(x+x')=S(x)+S(x')\). Le même genre de raisonnement montre que \( S(\lambda x)=\lambda S(x)\). L'application \( S\) est donc linéaire.

    En ce qui concerna la continuité, nous avons
    \begin{equation}
            \| S(x) \|=\lim\| f(y_k) \|\leq \| f \|\| \lim y_k \|=\| f \|\| x \|,
    \end{equation}
    donc \( \| S \|\leq \| f \|\), c'est à dire que \( S\) est borné et donc continue parce que linéaire (théorème \ref{ThoCaMpKO}).

    Nous montrons maintenant que \( S\) prolonge \( f\). Si \( x\in A\), alors nous avons \( \bigcap_{n\in \eN}f(A_n)=f(x)\), et donc \( S(x)=f(x)\). Cela montre du même coup que \( \| f \|\leq \| S \|\) et que par conséquent \( \| f \|=\| S \|\).

    Passons à la partie sur l'unicité. Soient donc \( S\) et \( T\), deux prolongements continus de \( f\) sur \( X\). Soit \( x\in X\) et une suite \( x_n\to x\) dans \( A\). Par continuité nous avons \( T(x_n)\to T(x)\) et \( S(x_n)\to S(x)\). Étant donné que par ailleurs pour tout \( n\) nous avons \( S(x_n)=T(x_n)\), l'unicité de la limite montre que \( T(x)=S(x)\).
\end{proof}

\begin{definition}
    Soit une application \( f\colon X\to Y\). Le \defe{module de continuité}{module!de continuité} de \( f\) est la fonction \( \omega_f\colon \eR\to \eR\) définie comme suit. On pose \( \omega_f(x)=0\) pour \( x\leq 0\) et si \( h>0\),
    \begin{equation}
        \omega_f(h)=\sup_{\substack{x,y\in X\\d_X(x,y)<h}} d_Y\big( f(x),f(y) \big).
    \end{equation}
\end{definition}

\begin{lemma}   \label{LemLUbgYeo}
    Soit \( f\in C^0\big( \mathopen[ 0 , 1 \mathclose],\eC \big)\) et \( \omega\) son module de continuité. Si \( \lambda\) et \( h\) sont strictement positifs avec \( \lambda h\in\mathopen[ 0 , 1 \mathclose]\) alors 
    \begin{equation}
        \phi(\lambda h)\leq (\lambda+1)\omega(h).
    \end{equation}
\end{lemma}

\begin{proof}
    La fonction \( \omega\) est décroissante, et pour \( h,k>0\) nous avons \( \omega(h+k)\leq\omega(h)+\omega(k)\). Par récurrence pour tout \( k\in \eN\) nous avons
    \begin{equation}
        \omega(kh)\leq k\omega(h).
    \end{equation}
    En écrivant cela pour \( k=\lceil \lambda\rceil\), nous avons
    \begin{equation}
        \omega(\lambda h)\leq \omega(kh)\leq k\omega(h)\leq (\lambda+1)\omega(h).
    \end{equation}
\end{proof}

\begin{lemma}   \label{LemeERapq}
    Une fonction \( f\) est uniformément continue si et seulement si son module de continuité est continu en zéro.
\end{lemma}

Dans la même veine que la proposition \ref{PropTTiRgAq} nous avons ce résultat.
\begin{theorem}[\cite{ZHDEie}]      \label{ThoPVFQMi}
    Soient \( E\) et \( F\), deux espaces métriques complets ainsi que \( A\) dense dans \( E\). Si \( u\colon A\to F\) est uniformément continue, alors elle se prolonge de façon unique en une fonction continue \( \tilde u\colon E\to F\). De plus ce prolongement est uniformément continu.
\end{theorem}
\index{densité!prolongement}
\index{prolongement!par densité}
\index{complétude}
\index{prolongement!de fonctions}

\begin{proof}
    Soit \( x\in E\setminus A\) et une suite \( (x_n)\) contenue dans \( A\) et convergente vers \( x\). Nous voulons définir
    \begin{equation}
        \tilde u(x)=\lim_{n\to \infty} u(x_n)
    \end{equation}
    mais pour ce faire nous devons prouver que la suite \( \big( u(x_n) \big)\) converge dans \( F\) et que la limite ne dépend pas de la suite choisie parmi les suites de \( A\) qui convergent (dans \( E\)) vers \( x\).

    Commençons par montrer que \( \big( u(x_n) \big)\) est de Cauchy dans \( F\). Pour cela nous prenons \( \epsilon>0\) et \( \eta>0\) telle que \( d_E(a,b)<\eta\) implique \( d_F\big( u(a),u(b) \big)<\epsilon\) (uniforme continuité de \( u\)). Après, il suffit de choisir \( N\) tel que pour tout \( n,m>N\) nous ayons \( d(x_m,x_n)<\eta\) (parce que \( u_n\) est de Cauchy). Avec tout ça nous avons 
    \begin{equation}
        d_F\big( u(x_m),u(x_n) \big)<\epsilon,
    \end{equation}
    ce qui signifie que \( \big( u(x_n) \big)\) est de Cauchy et donc convergente dans \( F\). 
    
    Nous voulons montrer maintenant que si \( (x_n)\) et \( (y_n)\) sont deux suites dans \( A\) convergentes vers \( x\) alors \( \lim_{n\to \infty} u(x_n)=\lim_{n\to \infty} u(y_n)\). Pour cela nous considérons la suite \( z=(x_1,y_1,x_2,y_2,\ldots)\). Nous avons évidemment \( z_n\to x\), et donc \( u(z_n)\) converge dans \( F\) par ce qui a été dit plus haut. Mais \( u(x_n)\) et \( u(y_n)\) en sont deux sous-suites convergentes. Donc leurs limites sont égales.

    Il reste à montrer que ce \( \tilde u\) est continue et uniformément continue. Pour cela nous utilisons le module de continuité et le lemme \ref{LemeERapq}. Étant donné que \( \tilde u\) prolonge \( u\) nous avons 
    \begin{equation}        \label{EqFRYqON}
        \omega_{\tilde u}(h)\geq \omega_u(h).
    \end{equation}
    Soit \( h>0\) et \( \epsilon>0\); soit aussi \( x,y\in E\) tels que \( d(x,y)<h\). Nous prenons des suites \( (a_n)\to x\) et \( (y_n)\to y\) tout en choisissant \( n\) assez grand pour avoir \( d_E(a_n,b_n)<h\). Nous avons
    \begin{equation}
        d_F\big( \tilde u(x),\tilde u(y) \big)\leq d_F\big( \tilde u(x),u(a_n) \big)+d\big( u(a_n),u(b_n) \big)+d_F\big( u(b_n),\tilde u(y) \big).
    \end{equation}
    Si \( n\) est assez grand, par construction de \( \tilde u\), le premier et le dernier terme sont plus petits que \( \epsilon\). Par définition du module de continuité nous avons d'autre part \( d_F\big( u(a_n),u(b_n) \big)\leq \omega_u(h)\). Du coup
    \begin{equation}
        d_F\big( \tilde u(x),\tilde u(y) \big)\leq \omega_u(h)+2\epsilon.
    \end{equation}
    Si nous prenons le supremum sur les \( x\) et \( y\) vérifiant \( d_E(x,y)<h\), à gauche nous obtenons \( \omega_{\tilde u}(h)\) tandis que le membre de droite ne dépend pas de \( x\) et\( y\). Donc pour tout \( \epsilon\), nous avons
    \begin{equation}
        \omega_{\tilde u}(h)\leq \omega_u(h)+2\epsilon.
    \end{equation}
    En comparaison avec \eqref{EqFRYqON}, nous trouvons
    \begin{equation}
        \omega_{\tilde u(h)}\leq \omega_u(h).
    \end{equation}
    Les fonctions \( u\) et \( \tilde u\) ayant le même module de continuité, le lemme \ref{LemeERapq} nous enseigne que l'une est uniformément continue si et seulement si l'autre l'est. Vu que \( u\) est uniformément continue par hypothèse, le prolongement \( \tilde u\) est uniformément continu.
\end{proof}

\begin{definition}
    Un \defe{plongement}{plongement} de l'espace topologique \( X\) dans \( Y\) est une application \( f\colon X\to Y\) telle que \( f\colon X\to f(X)\) soit un homéomorphisme.
\end{definition}

\begin{theorem}[Extensiton des isométries]\label{ThoPHllyoB}
    Soit \( \tilde M\) un espace métrique complet et une application isométrique
    \begin{equation}
        f\colon A\to \tilde M
    \end{equation}
    où \( A\) est une partie dense d'un espace métrique \( M\) (pas spécialement complet). Alors \( f\) accepte une une unique extension isométrique
    \begin{equation}
        \tilde f\colon M\to \tilde M
    \end{equation}
    
    Supposons de plus que \( M\) soit complet\footnote{Il me semble que cette hypothèse manque dans \cite{JBRzHwn}.}. Alors \( \tilde f\colon M\to\tilde M\) est une bijection si et seulement si \( f(A)\) est dense dans \( \tilde M\).
\end{theorem}
\index{extension!isométrie}
\index{théorème!extension d'isométrie}

\begin{proof}
    Nous commençons par prouver l'unicité. Soit \( \tilde f_1\) et \( \tilde f_2\), deux extensions de \( f\) et \( x\in M\). Si \( (a_n)\) est une suite dans \( A\) convergeant vers \( x\) (possible parce que \( A\) est dense dans \( M\)), alors nous avons
    \begin{equation}
        \tilde f_1(a_n)=\tilde f_2(a_n)
    \end{equation}
    et donc \( \tilde f_1(x)=\tilde f_2(x)\) par continuité (une application isométrique est continue (proposition \ref{PropLYMgVMJ})).

    Nous démontrons à présent l'existence.
    
    \begin{subproof}
    \item[Construction de \( \tilde f\)]
    Soit \( x\in M\) et \( (a_n)\) une suite dans \( A\) qui converge vers \( x\). Nous définissons
    \begin{equation}    \label{EqHEembqy}
        \tilde f(x)=\lim_{k\to \infty} f(a_k).
    \end{equation}
    Note : nous pouvons prouver que cette définition ne dépend pas du choix de la suite \( (a_n)\) convergeant vers \( x\), mais ce serait superflu parce que nous avons déjà prouvé l'unicité de \( \tilde f\). Par contre nous devons expliquer pourquoi la limite du membre de droite de \eqref{EqHEembqy} existe dans \( \tilde M\). D'abord la suite \( (a_n)\) est de Cauchy parce qu'elle est convergente (attention : \( M\) n'étant pas complet le fait d'être de Cauchy n'implique pas la convergence). Donc, étant donné que \( f\) est une isométrie, la suite \( \big( f(a_n) \big)\) est de Cauchy dans \( \tilde M\). Or ce dernier étant complet, la suite des images converge.
    
    Montrons que cette application \( \tilde f\colon M\to \tilde M\) répond à la question.

\item[\( \tilde f\) est isométrique]

        Soient \( a,b\in M\) et des suites dans \( A\) convergeant vers eux : \( a_n\to a\), \( b_n\to b\). Nous avons, par continuité de l'application distance,
        \begin{subequations}
            \begin{align}
                d\big( \tilde f(a),\tilde f(b) \big)&=\lim_{k\to \infty} d\big( \tilde f(a_k),\tilde f(b) \big)\\
                &=\lim_{k\to \infty}\lim_{l\to \infty}  d\big( \tilde f(a_k),\tilde f(b_l) \big)\\
                &=\lim_{k\to \infty}\lim_{l\to \infty}  d\big(  f(a_k), f(b_l) \big)\\
                &=\lim_{k\to \infty}\lim_{l\to \infty}  d\big( a_k),b_l\big)\\
                &=d(a,b).
            \end{align}
        \end{subequations}
        Cela prouve que \( \tilde f\) est une isométrie.
        
        Pour la suite nous supposons que \( M\) est complet. Notons tout de suite que \( \tilde f\) est injective parce qu'elle est isométrique.

    \item[Bijection (premier sens)]

        Nous supposons que \( \tilde f\colon M\to \tilde M\) est une bijection. Par l'absurde nous supposons que \( f(A)\) n'est pas dense dans \( \tilde M\), c'est à dire que nous avons un point \( x\in \tilde M\) et une boule n'intersectant par \( f(A)\) :
        \begin{equation}
            B(x,r)\cap f(A)=\emptyset.
        \end{equation}
        Étant donné que \( \tilde f\) a pour image des limites de suites dans \( f(A)\), l'image de \( \tilde f\) est contenue dans \( \overline{ f(A) }\). Donc si \( \tilde f\) est surjective, c'est que \( \tilde M\subset \overline{ f(A) }\) et donc que \( \overline{ f(A) }=\tilde M\). Cela prouve que si \( \tilde f\) est bijective, alors \( f(A)\) est dense dans \( \tilde M\).


    \item[Bijection (l'autre sens)]

        Nous supposons que \( \overline{ f(A) }=\tilde M\) et nous devons prouver que \( \tilde f\) est surjective. Soit \( x\in \tilde M\) et \( f(a_n)\) une suite dans \( f(A)\) qui converge vers \( x\); une telle suite existe parce que \( f(A)\) est dense dans \( \tilde M\). Cette suite est de Cauchy dans \( \tilde M\) parce que dans un espace métrique, une suite convergente est de Cauchy. La suite \( (a_n)\) est elle-même également de Cauchy parce que
        \begin{equation}
            d(a_n,a_m)=d\big( f(a_n),f(a_m) \big).
        \end{equation}
        Étant donné que \( (a_n)\) est de Cauchy dans \( M\), elle converge vers un élément que nous nommons \( a\in M\). Par continuité de \( f \) nous avons alors
        \begin{equation}
            \tilde f(a)=\lim_{k\to \infty} f(a_k)=x.
        \end{equation}
        Cela prouve que \( x\) est bien dans l'image de \( \tilde f\) et donc que \( \tilde f\) est surjective.
    \end{subproof}
\end{proof}

Une conséquence du théorème de prolongement est le théorème suivant qui permet de compléter un espace métrique.
\begin{theorem}[Complétion d'un espace métrique\cite{DOVXZwP,JBRzHwn}]\label{ThoKHTQJXZ}  \index{espace!complet}

    Tout espace métrique se plonge par une isométrie à image dense dans un espace métrique complet. De plus ce dernier est unique à isométrie près.

    Plus précisément, soit \( (M,d)\) un espace métrique. Il existe un espace métrique complet \( \tilde M\) muni d'un plongement isométrique \( \varphi\colon M\to \tilde M\) tel que \( \varphi(M)\) soit dense dans \( \tilde M\).

    Ce complété\index{complété!d'un espace métrique} de \( M\) est unique au sens suivant. Si \( \tilde M_1\) et \( \tilde M_2\) sont deux espaces métriques complets munis de plongements isométriques \( f_i\colon M\to \tilde M_1\) dont les images sont denses, alors il existe une bijection isométrique \( \phi\colon \tilde M_1\to \tilde M_2\) telle que \( \phi\circ f_1=f_2\).
\end{theorem}
\index{densité}
\index{complétude}

\begin{proof}
    Nous ne prouvons que l'existence.

    Soit \( C_M\) l'ensemble des suites de Cauchy de \( M\). Nous définissons
    \begin{equation}
        \begin{aligned}
            f\colon C_M\times C_M&\to \eR \\
            u,v&\mapsto \lim_{n\to \infty} d(u_n,v_n).
        \end{aligned}
    \end{equation}
    Notre première tâche est de nous assurer que cela est bien défini, c'est à dire que la limite existe toujours. En effet, si \( u\) et \( v\) sont des suites de Cauchy dans \( M\), nous avons
    \begin{equation}
        \left| d(u_n,v_n)-d(u_m,v_m) \right| \leq d(u_n,v_n)+d(u_m,v_m)\leq 2\epsilon
    \end{equation}
    dès que \( m\) et \( n\) sont assez grand. Cela prouve que la suite \( n\mapsto d(u_n,v_n)\) est de Cauchy dans \( \eR\). Par complétude de \( \eR\), elle converge\footnote{Ici nous utilisons la complétude de \( \eR\). Cette dernière doit donc être démontrée indépendamment. De plus nous ne pouvons pas définir \( \eR\) comme étant le complété de \( \eQ\) en utilisant ce théorème.}. 
    %TODO : lorsque ce sera fait, il faudra mettre ici une référence vers le théorème qui donne la complétude de la droite réelle.
    
    Nous considérons la relation d'équivalence \( u\sim v\) si et seulement si \( f(u,v)=0\). Nous posons \( \tilde M=C_M/\sim\) et nous y mettons la distance
    \begin{equation}    \label{EqDDLNRNF}
        d( [u],[v]  )=f(u,v)
    \end{equation}
    et nous devons encore vérifier que cela est bien défini. Prenons \( u'\sim u\) et \( v'\sim v\). Alors nous avons
    \begin{equation}
        d(u'_n,v'_n)\leq d(u'_n,u_n)+d(u_n,v_n)+d(v_n,v'_n),
    \end{equation}
    et donc 
    \begin{equation}
        d(u',v')=\lim_{n\to \infty} d(u'_n,v'n)\leq \lim_{n\to \infty} d(u_n,v_n)=d(u,v).
    \end{equation}
    Le même argument en inversant les primes et les non primes montre l'inégalité inverse. Donc \( d(u,v)=d(u',v')\) dans \( C_M\), et donc la distance \eqref{EqDDLNRNF} est bien définie sur \( \tilde M\).

    Afin de s'assurer que \( \tilde M\) répond bien à la question du théorème, il faut encore démontrer les points suivants :
    \begin{itemize}
        \item \( M\) se plonge isométriquement dans \( \tilde M\).
        \item l'image de \( M\) par le plongement est dense dans \( \tilde M\).
        \item \( \tilde M\) est complet.
    \end{itemize}

    Nous allons maintenant considérer l'application
    \begin{equation}
        \begin{aligned}
            \varphi\colon M&\to \tilde M \\
            x&\mapsto \text{la classe de la suite constante \( x\).} 
        \end{aligned}
    \end{equation}
    \begin{subproof}
        \item[Plongement isométrique]
        Nous allons montrer que cela est une isométrie bijective et que \( \varphi(M)\) est dense dans \( \tilde M\). Le fait que \( \varphi\) soit bijective entre \( M\) et \( \varphi(M)\) est évident. C'est une isométrie parce que
        \begin{equation}
            d\big( \varphi(x),\varphi(y) \big)=\lim_{n\to \infty} d\big(\varphi(x)_n,\varphi(y)_n\big)=d(x,y).
        \end{equation}
        
    \item[Densité]

        Soit \( [u]\in \tilde M\). Tous les termes \( u_n\) sont des éléments de \( M\). Nous considérons la suite dans \( \varphi(M)\) donnée par
        \begin{equation}
            a_n=\varphi(u_n)
        \end{equation}
        Chaque \( a_n\) est un élément\footnote{À partir de maintenant nous n'écrivons plus explicitement la classe d'équivalence.} de \( \tilde M\). Montrons que \( (a_n)\) converge dans \( \tilde M\) vers \( u\). Nous avons
        \begin{subequations}
            \begin{align}
                d(a_n,u)&=\lim_{k\to \infty} d\big( (a_n)_k,u_k \big)\\
                &=\lim_{k\to \infty} d(u_n,u_k)\\
                &=d(u_n,\ell)
            \end{align}
        \end{subequations}
        en notant \( \ell\) la limite de la suite \( (u_n)\). Ici nous avons utilisé le fait que la fonction distance était continue pour l'inverser avec la limite, par le théorème \ref{ThoLimSuite}. Nous avons alors
        \begin{equation}
            \lim_{n\to \infty} d(a_n,[u])=\lim_{n\to \infty} d(u_n,\ell)=0.
        \end{equation}
        
    \item[Complétude]
        Nous passons maintenant à la preuve du fait que \( \tilde M\) est complet. Soit \( (y_n)\) une suite de Cauchy dans \( \tilde M\). Soit \( \epsilon>0\); nous définissons \( K(n)\) par
        \begin{equation}
            d\big( (y_n)_k,(y_n)_l \big)<\epsilon
        \end{equation}
        dès que \( k,l\geq K(n)\). Cette définition fonctionne parce que pour chaque \( n\), \( y_n\) est une suite de Cauchy dans \( M\). Nous posons
        \begin{equation}
            x_n=(y_n)_{K(n)}\in M
        \end{equation}
        et nous allons montrer que \( (x_n)\) est de Cauchy dans \( M\) --donc est un élément de \( \tilde M\)-- et que \( y_k\to (x_n)\) dans \( \tilde M\). 
        
        Nous commençons par montrer que \( (x_n)\) est de Cauchy dans \( M\). Nous avons
        \begin{subequations}
            \begin{align}
                d(x_n,x_m)&=d\big( (y_n)_{K(n)},(y_m)_{K(m)} \big)\\
                &\leq d\big( (y_n)_{K(n)},(y_n)_l \big)+d\big( (y_n)_{l},(y_m)_l \big)+d\big( (y_m)_{l},(y_m)_{K(m)} \big)
            \end{align}
        \end{subequations}
        Nous choisissons \( n,m\) tels que \( d(y_n,y_m)<\epsilon\), ce qui nous permet de choisir \( l\) de telle façon à avoir \( d\big( (y_n)_k,(y_m)_k \big)<\epsilon\) pour tout \( k\geq l\). De plus, quitte à encore augmenter \( l\), nous supposons que \( l>K(m)\) et \( l>K(m)\). Avec ces choix nous voyons que \( d(x_n,x_m)<3\epsilon\), ce qui signifie que la suite \( (x_n)\) est de Cauchy dans \( M\).

        En ce qui concerne la convergence \( y_n\to (x)\), on a 
        \begin{subequations}
            \begin{align}
                d\big( y_n,(x) \big)&=\lim_{k\to \infty} d\big( (y_n)_k,(y_k)_{K(k)} \big)\\
                &\leq \lim_{k\to \infty} d\big( (y_n)_k,(y_n)_l \big)+\lim_{k\to \infty} d\big( (y_n)_l,(y_k)_{l} \big)+\lim_{k\to \infty} d\big( (y_k)_l,(y_k)_{K(k)} \big)    \label{EqABmqNwo}
            \end{align}
        \end{subequations}
        Nous devons trouver un \( n\) tel que si \( k\) est suffisamment grand, le tout est majoré par \( \epsilon\). Voici nos choix :
        \begin{itemize}
            \item \( n\) tel que \( d(y_n,y_m)<\epsilon\) dès que \( m\geq n\),
            \item \( k>n\),
            \item \( k>K(n)\),
            \item \( l>k\),
            \item \( l>K(k)\),
            \item \( l\) suffisamment grand pour que \( d\big( (y_n)_l,(y_k)_l \big)<\epsilon\).
        \end{itemize}
        Avec tous ces choix, les trois termes de \eqref{EqABmqNwo} sont plus petits que \( \epsilon\).

        Ceci prouve que \( \tilde M\) est complet.
    \end{subproof}
\end{proof}
%TODO : prouver l'unicité; c'est un grande partie le théorème précédent.
%TODO : la construction de la droite réelle et sa complétude.

\begin{theorem}[Principe du prolongement analytique]\label{ThoAVBCewB}
    Soit \( U\) un ouvert connexe. Si deux fonctions analytiques coïncident sur un sous-ensemble \( D\) de \( U\) contenant un point d'accumulation dans \( U\), alors elles sont égales sur \( U\).
\end{theorem}
\index{principe!prolongement analytique}
\index{connexité!prolongement analytique}
\index{prolongement!analytique}

%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
					\section{Un petit extra}
%+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

%TODO : ce serait pas mal de donner un exemple de fonction non mesurable.

Soit $f$ une fonction de $\eR$ dans $\eR$. Supposons que 
\begin{enumerate}

\item		\label{ItemExtrai}
$f(1)=1$,

\item		\label{ItemExtraii}
$f(x+y)=f(x)+f(y)$ pour tout réels $x$ et $y$.

\end{enumerate}
Nous pouvons montrer\footnote{et toi, tu le peux ?} que la seule fonction {\it continue} qui possède ces propriétés est la fonction identité $f(x)=x$ pour tout $x\in\eR$.

De la même manière, il est aisé de voir que les seules applications linéaires de $\eR^n$ dans $\eR^n$ sont de la forme 
\begin{equation}
	f(x)=Ax
\end{equation}
pour une constante réelle $A$. Une question naturelle qu'on peut alors se poser est la suivante: 
\begin{quote} 
	Est-il possible de définir une fonction non continue ayant les propriétés \ref{ItemExtrai} et \ref{ItemExtraii} ?
\end{quote}
En fait, il est possible de démontrer que si $E$ est un espace vectoriel de dimension finie, alors toute application linéaire $f:E\rightarrow  F$ (où $F$ est un espace vectoriel) sera continue. Ceci ne reste plus vrai si l'espace vectoriel $E$ est de dimension infinie. Donc une manière de trouver une réponse positive à la question posée plus haut, serait de voir $\eR^n$ comme espace vectoriel de dimension infinie. Après un peu de réflexion, la réponse est venue à nous (merci à Nicolas et à Samuel). 

Si nous admettons l'\href{http://fr.wikipedia.org/wiki/Axiome_du_choix}{axiome du choix}, alors nous pouvons appliquer le théorème de Zorn
% TODO : lorsque je l'aurai fait, il faudra référentier Zorn ici.
et nous savons que tout espace vectoriel admet une base. En particulier, l'ensemble des réels vu comme espace vectoriel sur $\eQ$ admet une base, i.e. $\exists (e_i)_{i\in I}$  des éléments de $\eR^n$ tels que tout réel s'écrit comme combinaison linéaire à coefficients rationnels  de ces $e_i$, i.e.
\begin{equation}
	\forall r \in \eR^n, \exists (\lambda_i)_{i\in I} \text{ des éléments de } \eQ \text{ tels que  } r = \sum_{i\in I} \lambda_i e_i.
\end{equation}
Utilisons cette base pour définir une fonction $h$ de la manière suivante.
\begin{equation}
\forall i \in I, \mbox{ on définit } h(e_i) = \alpha_i
\end{equation}
 où les $\alpha_i$ doivent être bien choisis dans $\eR^n$. Pour satisfaire la propriété \ref{ItemExtrai}, choisissons sans perte de généralité $e_1 = 1$ et $h(e_1) = 1$.  Ajoutons à cette propriété la linéarité en imposant que 
\begin{equation}
h(\sum \lambda_i e_i) = \sum \lambda_i \alpha_i.
\end{equation}
Les équations (1) et (2) nous permettent de voir que, moyennant le choix des $\alpha_i$, la fonction $h$ est bien définie sur $\eR^n$ et linéaire. Il est clair que si nous prenons par exemple
$$\alpha_i=e_i\;\forall i \in I$$ 
nous obtenons que la fonction $h$ est en fait la fonction identité sur $\eR^n$. Par contre, si nous définissons la fonction $h$ comme satisfaisant la propriété (2) et si nous choisissons les $\alpha_i$ dans (1) de la manière suivante 
\begin{equation}
	\begin{aligned}[]
		h(e_1)	&= e_2\\
		h(e_2)	&= e_1\\
		h(e_i)	&= e_i	&&\forall i\in I\setminus\{ 1,2 \}
	\end{aligned}
\end{equation}
alors la fonction ainsi obtenue est linéaire et bien définie mais n'est plus l'identité. Donc nous avons trouvé une application linéaire de $\eR^n$ dans $\eR^n$ qui n'est pas continue.  

\begin{exercice}
 Trouver d'autres exemples d'applications linéaires non continues (pas nécessairement des transformations de $\eR^n$). 		
\end{exercice}
